{"data":{"allAnantCassandralinks":{"edges":[{"node":{"title":"HAPI Cassandra","alternative_id":4866,"content":"<p>#REST API on top of Cassandra database with hapi Nodejs framework</p><p>The goal of this project is to create a very simple REST API on top of Cassandra tables.\nIn this example, services are created and used by users at a defined date.\nIn coming versions there will be more Cassandra and DataStax Enterprise features like TTL and Spark usage. An interface is also planned to play with the API.</p><p>##Installation</p><ul><li>\n<p>You need a Cassandra cluster running, for download and installation instructions  <a href=\"http://planetcassandra.org/cassandra/\">http://planetcassandra.org/cassandra/</a></p>\n</li>\n<li>\n<p>Clone all js files in a local directory</p>\n</li>\n<li>\n<p>Install <strong>Nodejs</strong> : depending of your OS see <a href=\"https://github.com/joyent/node/wiki/installation\">https://github.com/joyent/node/wiki/installation</a> for installation instructions</p>\n<p>Create your nodejs project</p>\n<pre>$npm init\n</pre>\n</li>\n<li>\n<p>Install <strong>hapi</strong> a server framework for builing application and services (rest api) for nodejs <a href=\"http://hapijs.com/\">http://hapijs.com/</a></p>\n<pre>$npm install hapi -save\n</pre>\n</li>\n<li>\n<p>Install <strong>joi</strong> hapi plugin for object schema validation <a href=\"https://github.com/hapijs/joi\">https://github.com/hapijs/joi</a></p>\n<pre>$npm install --save joi\n</pre>\n</li>\n<li>\n<p>Install <strong>Cassandra Nodejs driver</strong> from <a href=\"https://github.com/datastax/nodejs-driver\">https://github.com/datastax/nodejs-driver</a></p>\n<pre>$npm install --save cassandra-driver\n</pre>\n</li>\n<li>\n<p>In your Cassandra cluster, create the keyspace and the table with CQL found in services_ks.cql file</p>\n</li>\n</ul><p>##Using</p><ul><li>\n<p>Run HTTP Nodejs server</p>\n<pre>$node server.js\n</pre>\n</li>\n<li>\n<p>Test the REST API</p>\n<ul><li>In command line with curl</li>\n</ul><p>Create a service</p>\n<pre>$curl -X POST -H \"Content-Type: application/json\" -d '{\"title\":\"The best service\"}' http://localhost:3000/service/create -i\n</pre>\n<p>Add a user using this service</p>\n<pre>$curl -X POST -H \"Content-Type: application/json\" -d '{\"id\":\"d0f60aa8-54a9-4840-b70c-fe562b68842b\",\"user\":\"victor\"}' http://localhost:3000/service/user -i\n</pre>\n<p>Get all users for a service</p>\n<pre>$curl -X GET http://localhost:3000/service/d0f60aa8-54a9-4840-b70c-fe562b68842b -i\n</pre>\n<p>Get all services</p>\n<pre>$curl -X GET http://localhost:3000/services -i\n</pre>\n<p>Delete a service</p>\n<pre>$curl -X DELETE http://localhost:3000/service/delete/c391b62c-5e72-4e5d-ae74-6a5acd0a3ac3 -i\n</pre>\n</li>\n</ul>"}}]}},"pageContext":{"alternative_id":4866}}