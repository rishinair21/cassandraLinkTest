{"data":{"allAnantCassandralinks":{"edges":[{"node":{"title":"rackerlabs/cdeploy","alternative_id":11859,"content":"<p>cdeploy is a simple tool to manage your Cassandra schema migrations in the style of <a href=\"http://dbdeploy.com/\" rel=\"nofollow\">dbdeploy</a></p><p><code>pip install cdeploy</code></p><p>By default, cdeploy will look for migrations in './migrations'. This can be overridden by passing the path to your migrations directory as the first argument:</p><pre>cdeploy db/migrations\n</pre><p>The migrations directory should contain CQL scripts using the following naming convention: [version]_migration_description.cql</p><p>For example:</p><pre>migrations/\n    001_create_orders_table.cql\n    002_create_customers_table.cql\n</pre><p>Version numbers should begin from 1. Migration scripts may contain multiple semicolon terminated CQL statements. Comment lines can begin with either \"--\" or \"//\".</p><p>Migrations can also specify how to revert the changes by including additional statements following a line containing \"--//@UNDO\". For example:</p><pre>CREATE TABLE orders(\n    order_id uuid PRIMARY KEY,\n    price text\n);\n--//@UNDO\nDROP TABLE orders;\n</pre><p>To undo the most recently applied migration, run:</p><pre>cdeploy --undo\n</pre><div class=\"highlight highlight-source-python\"><pre>    from cdeploy import migrator\n    schema_migrator = migrator.Migrator('/path/to/migrations/directory', cassandra_session)\n    schema_migrator.run_migrations()</pre></div><p>cdeploy will look in your migrations directory for a configuration file named cassandra.yml, in a subdirectory named config:</p><pre>migrations/\n   config/\n       cassandra.yml\n</pre><p>The configuration file specifies the hosts to connect to and the keyspace name, and supports multiple environments. For example:</p><pre>development:\n    hosts: [host1]\n    keyspace: keyspace_name\nproduction:\n    hosts: [host1, host2, host3]\n    keyspace: keyspace_name\n</pre><p>The environment can be set via the ENV shell variable, and defaults to development if not specified:</p><pre>ENV=production cdeploy\n</pre><p>Additional configuration parameters for Cassandra are available:</p><pre>development:\n    hosts: [host1]\n    keyspace: keyspace_name\n    auth_enabled: true\n    auth_username: username\n    auth_password: password\n    port: 9042\n    ssl_enabled: true\n    ssl_ca_certs: /path/to/ca/certs\n    consistency_level: ALL\n    timeout: 10\n</pre>"}}]}},"pageContext":{"alternative_id":11859}}