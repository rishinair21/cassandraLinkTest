{"data":{"allAnantCassandralinks":{"edges":[{"node":{"title":"Apache Cassandra, Part 7: Secondary Index, Replication, and Tips","alternative_id":12090,"content":"<section class=\"section section--body section--first\"><div class=\"section-content\"><div class=\"section-inner sectionLayout--insetColumn\"><p id=\"3cbe\" class=\"graf graf--p graf-after--h3\">This <a href=\"https://blog.emumba.com/apache-cassandra-part-1-introduction-and-key-features-18d02ba0b8cc\" data-href=\"https://blog.emumba.com/apache-cassandra-part-1-introduction-and-key-features-18d02ba0b8cc\" class=\"markup--anchor markup--p-anchor\" target=\"_blank\">series of posts</a> present an introduction to Apache Cassandra. It discusses key Cassandra features, its core concepts, how it works under the hood, how it is different from other data stores, data modelling best practices with examples, and some tips &amp; tricks.</p><figure id=\"9d30\" class=\"graf graf--figure graf-after--p graf--trailing\"><div class=\"aspectRatioPlaceholder is-locked\"><img class=\"graf-image\" data-image-id=\"1*_hy_RYrCzE0r4ryFWbk_gA.png\" data-width=\"400\" data-height=\"268\" src=\"https://cdn-images-1.medium.com/max/1600/1*_hy_RYrCzE0r4ryFWbk_gA.png\" alt=\"image\" /></div></figure></div></div></section><section class=\"section section--body section--last\"><div class=\"section-content\"><div class=\"section-inner sectionLayout--insetColumn\"><h3 id=\"6f7f\" class=\"graf graf--h3 graf--leading\">Secondary Index in Cassandra</h3><p id=\"7c52\" class=\"graf graf--p graf-after--h3\">The purpose of secondary indexes in Cassandra is not to provide fast access to data using attributes other than partition key, rather it just provides a convenience in writing queries and fetching data. The two disk pass approach of secondary indexes, one for reading the secondary index file and second for accessing the actual data makes it inefficient in terms of performance. You can read more on this <a href=\"https://www.datastax.com/dev/blog/cassandra-native-secondary-index-deep-dive\" data-href=\"https://www.datastax.com/dev/blog/cassandra-native-secondary-index-deep-dive\" class=\"markup--anchor markup--p-anchor\" rel=\"noopener\" target=\"_blank\">here</a>.</p><h3 id=\"cb39\" class=\"graf graf--h3 graf-after--p\">Replication in Cassandra</h3><p id=\"3c49\" class=\"graf graf--p graf-after--h3\">Cassandra supports async replication based on a specified replication factor. Consider a scenario where you have 99 partitions with a replication factor of 3. Cassandra will replicate data of each partition on two other partitions. As a result, if a query requests to read all data, Cassandra can find the required data by reading only 33 partitions, hence reducing the number of partitions to read. Replication not only plays an important role in read optimization, but more importantly, it enables fault tolerance by ensuring access to data in case some node goes down in a Cassandra cluster.</p><h3 id=\"a025\" class=\"graf graf--h3 graf-after--p\">Cassandra Tips</h3><p id=\"0312\" class=\"graf graf--p graf-after--h3\">Here are some tips that may come handy during your journey through Cassandra.</p><ul class=\"postList\"><li id=\"893c\" class=\"graf graf--li graf-after--p\">Test your data model as early as possible. Build prototype, insert data, write queries, make sure your workflow works end to end.</li><li id=\"2997\" class=\"graf graf--li graf-after--li\">Use <a href=\"https://docs.datastax.com/en/cassandra/2.1/cassandra/tools/toolsCStress_t.html\" data-href=\"https://docs.datastax.com/en/cassandra/2.1/cassandra/tools/toolsCStress_t.html\" class=\"markup--anchor markup--li-anchor\" rel=\"noopener\" target=\"_blank\">Cassandra stress</a> to generate reads, writes, and to measure performance.</li><li id=\"a677\" class=\"graf graf--li graf-after--li\">Do not try to minimize writes, extra writes to improve reads is worth it.</li><li id=\"0a08\" class=\"graf graf--li graf-after--li\">Data duplication is fact of life in Cassandra, don’t be afraid of it. Disk space is the cheapest available resource.</li><li id=\"0df3\" class=\"graf graf--li graf-after--li\">Always use async writes to keep your code non blocking.</li><li id=\"809f\" class=\"graf graf--li graf-after--li\">Batch inserts are anti pattern unless batch data belongs to same partition.</li><li id=\"2e63\" class=\"graf graf--li graf-after--li\">Regularly view Cassandra logs to look for warnings and suggestions.</li><li id=\"60e0\" class=\"graf graf--li graf-after--li\">Benchmark to measure performance against your needs e.g. data ingestion rate (events/sec) and query execution time.</li></ul><h3 id=\"2eb8\" class=\"graf graf--h3 graf-after--li\">References and Further Reading</h3><p id=\"8b15\" class=\"graf graf--p graf-after--h3\">Here are some resources that helped me in writing this series.</p><p><a href=\"https://academy.datastax.com/developer-blog\" data-href=\"https://academy.datastax.com/developer-blog\" class=\"markup--anchor markup--mixtapeEmbed-anchor\" title=\"https://academy.datastax.com/developer-blog\"><strong class=\"markup--strong markup--mixtapeEmbed-strong\">Developer Blog | DataStax Academy: Free Cassandra Tutorials and Training</strong><br /><em class=\"markup--em markup--mixtapeEmbed-em\">DataStax Enterprise is powered by the best distribution of Apache Cassandra™. ©2017 DataStax, All rights reserved…</em>academy.datastax.com</a></p><p><a href=\"https://www.ebayinc.com/stories/blogs/tech/cassandra-data-modeling-best-practices-part-1/\" data-href=\"https://www.ebayinc.com/stories/blogs/tech/cassandra-data-modeling-best-practices-part-1/\" class=\"markup--anchor markup--mixtapeEmbed-anchor\" title=\"https://www.ebayinc.com/stories/blogs/tech/cassandra-data-modeling-best-practices-part-1/\"><strong class=\"markup--strong markup--mixtapeEmbed-strong\">Cassandra Data Modeling Best Practices, Part 1</strong><br /><em class=\"markup--em markup--mixtapeEmbed-em\">This is the first in a series of posts on Cassandra data modeling, implementation, operations, and related practices…</em>www.ebayinc.com</a></p><p><a href=\"https://intellidzine.blogspot.com/2014/01/cassandra-data-modelling-primary-keys.html\" data-href=\"https://intellidzine.blogspot.com/2014/01/cassandra-data-modelling-primary-keys.html\" class=\"markup--anchor markup--mixtapeEmbed-anchor\" title=\"https://intellidzine.blogspot.com/2014/01/cassandra-data-modelling-primary-keys.html\"><strong class=\"markup--strong markup--mixtapeEmbed-strong\">Cassandra Data Modelling — Primary Keys</strong><br /><em class=\"markup--em markup--mixtapeEmbed-em\">In the previous blog we discussed how data is stored in Cassandra by creating a keyspace and a table. We also inserted…</em>intellidzine.blogspot.com</a></p></div></div></section>"}}]}},"pageContext":{"alternative_id":12090}}