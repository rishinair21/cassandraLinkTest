{"data":{"allAnantCassandralinks":{"edges":[{"node":{"title":"GumGum: Multi-Region Cassandra in AWS","alternative_id":9036,"content":"GumGum: Multi-Region Cassandra in AWS\n      \n      \n      <div id=\"main-nav\" class=\"contain-to-grid fixed\"><p><a class=\"item\" href=\"https://www.slideshare.net/\" aria-labelledby=\"#home\">\n            \n            </a><label id=\"home\">SlideShare</label>\n          \n          <a class=\"item\" href=\"https://www.slideshare.net/explore\" aria-labelledby=\"#explore\">\n            <i class=\"fa fa-compass\">\n            </i></a><label id=\"explore\">Explore</label>\n          \n          \n            <a class=\"item\" href=\"https://www.slideshare.net/login\" aria-labelledby=\"#you\">\n              <i class=\"fa fa-user\">\n              </i></a><label id=\"you\">You</label>\n            </p></div>\n    <div class=\"wrapper\"><p>Successfully reported this slideshow.</p><div id=\"slideview-container\" class=\"\"><div class=\"row\"><div id=\"main-panel\" class=\"small-12 large-8 columns\"><div class=\"sectionElements\"><div class=\"playerWrapper\"><div><div class=\"player lightPlayer fluidImage presentation_player\" id=\"svPlayerId\">GumGum: Multi-Region Cassandra in AWS<div class=\"stage valign-first-slide\"><div class=\"slide_container\"><section data-index=\"1\" class=\"slide show\" itemprop=\"image\"><img class=\"slide_image\" src=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-1-638.jpg?cb=1443906825\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-1-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-1-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-1-1024.jpg?cb=1443906825\" alt=\"CASSANDRA SUMMIT 2015CASSANDRA SUMMIT 2015&#10;Mario Lazaro&#10;September 24th 2015&#10;#CassandraSummit2015&#10;MULTI-REGION CASSANDRA IN...\" /></section><section data-index=\"2\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-2-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-2-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-2-1024.jpg?cb=1443906825\" alt=\"WHOAMIWHOAMI&#10;Mario Cerdan Lazaro&#10;Big Data Engineer&#10;Born and raised in Spain&#10;Joined GumGum 18 months ago&#10;About a year and a...\" /></i></section><section data-index=\"3\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-3-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-3-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-3-1024.jpg?cb=1443906825\" alt=\"#5 Ad Platform in the U.S&#10;10B impressions / month&#10;2,000 brand-safe premium&#10;publisher partners&#10;1B+ global unique visitors&#10;D...\" /></i></section><section data-index=\"4\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-4-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-4-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-4-1024.jpg?cb=1443906825\" alt=\"AGENDAAGENDA&#10;Old cluster&#10;International Expansion&#10;Challenges&#10;Testing&#10;Modus Operandi&#10;Tips&#10;Questions &amp; Answers&#10;\" /></i></section><section data-index=\"5\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-5-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-5-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-5-1024.jpg?cb=1443906825\" alt=\"25 Classic nodes cluster&#10;1 Region / 1 Rack hosted in&#10;AWS EC2 US East&#10;Version 2.0.8&#10;Datastax CQL driver&#10;GumGum's metadata i...\" /></i></section><section data-index=\"6\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-6-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-6-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-6-1024.jpg?cb=1443906825\" alt=\"OLD C* CLUSTER - REALTIME USE CASEOLD C* CLUSTER - REALTIME USE CASE&#10;Billions of rows&#10;Heavy read workload&#10;60/40&#10;TTLs every...\" /></i></section><section data-index=\"7\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-7-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-7-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-7-1024.jpg?cb=1443906825\" alt=\"OLD C* CLUSTER - ANALYTICS USE CASEOLD C* CLUSTER - ANALYTICS USE CASE&#10;Daily ETL jobs to extract / join data&#10;from C*&#10;​Hado...\" /></i></section><section data-index=\"8\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-8-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-8-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-8-1024.jpg?cb=1443906825\" alt=\"INTERNATIONAL EXPANSIONINTERNATIONAL EXPANSION&#10;\" /></i></section><section data-index=\"9\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-9-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-9-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-9-1024.jpg?cb=1443906825\" alt=\"FIRST STEPSFIRST STEPS&#10;Start C* test datacenters in US&#10;East &amp; EU West and test how C*&#10;multi region works in AWS&#10;Run capaci...\" /></i></section><section data-index=\"10\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-10-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-10-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-10-1024.jpg?cb=1443906825\" alt=\"TOO GOOD TO BE TRUE ...TOO GOOD TO BE TRUE ...&#10;\" /></i></section><section data-index=\"11\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-11-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-11-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-11-1024.jpg?cb=1443906825\" alt=\"CHALLENGESCHALLENGES&#10;Problems between Cassandra in EC2&#10;Classic / VPC and Datastax Java&#10;driver&#10;EC2MultiRegionSnitch uses pu...\" /></i></section><section data-index=\"12\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-12-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-12-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-12-1024.jpg?cb=1443906825\" alt=\"Datastax Java Driver Load Balancing&#10;Multiple choices&#10;DCAware + TokenAware&#10;Datastax Java Driver Load Balancing&#10;Multiple cho...\" /></i></section><section data-index=\"13\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-13-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-13-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-13-1024.jpg?cb=1443906825\" alt=\"Zone Aware Connection:&#10;Webapps in 3 different AZs: 1A, 1B, and 1C&#10;C* datacenter spanning 3 AZs with 3 replicas&#10;CHALLENGESC...\" /></i></section><section data-index=\"14\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-14-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-14-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-14-1024.jpg?cb=1443906825\" alt=\"We added it! - Rack/AZ awareness to&#10;TokenAware Policy&#10;CHALLENGESCHALLENGES&#10;\" /></i></section><section data-index=\"15\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-15-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-15-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-15-1024.jpg?cb=1443906825\" alt=\"CHALLENGESCHALLENGES&#10;Third Datacenter: Analytics&#10;Do not impact realtime data access&#10;Spark on top of Cassandra&#10;Spark-Cassan...\" /></i></section><section data-index=\"16\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-16-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-16-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-16-1024.jpg?cb=1443906825\" alt=\"CHALLENGESCHALLENGES&#10;Third Datacenter: Analytics&#10;Cassandra Only DC&#10;Realtime&#10;Cassandra + Spark DC&#10;Analytics&#10;\" /></i></section><section data-index=\"17\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-17-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-17-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-17-1024.jpg?cb=1443906825\" alt=\"CHALLENGESCHALLENGES&#10;Upgrade from 2.0.8 to 2.1.5&#10;Counters implementation is buggy in&#10;pre-2.1 versions&#10;“ My code never has ...\" /></i></section><section data-index=\"18\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-18-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-18-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-18-1024.jpg?cb=1443906825\" alt=\"CHALLENGESCHALLENGES&#10;“ To choose, or not to choose VNodes. That is the question.&#10;(M. Lazaro, 1990 - 2500)&#10;Previous DC usin...\" /></i></section><section data-index=\"19\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-19-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-19-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-19-1024.jpg?cb=1443906825\" alt=\"TESTINGTESTING&#10;\" /></i></section><section data-index=\"20\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-20-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-20-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-20-1024.jpg?cb=1443906825\" alt=\"TESTINGTESTING&#10;Testing requires creating and modifying&#10;many C* nodes&#10;Create and conﬁguring a C* cluster&#10;is time-consuming ...\" /></i></section><section data-index=\"21\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-21-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-21-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-21-1024.jpg?cb=1443906825\" alt=\"TESTING - PERFORMANCETESTING - PERFORMANCE&#10;Performance tests using new&#10;Cassandra 2.1 Stress Tool:&#10;Recreate GumGum metadata...\" /></i></section><section data-index=\"22\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-22-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-22-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-22-1024.jpg?cb=1443906825\" alt=\"TESTING - PERFORMANCETESTING - PERFORMANCE&#10;Main worry:&#10;Latency and replication overseas&#10;Use LOCAL_X consistency levels in ...\" /></i></section><section data-index=\"23\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-23-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-23-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-23-1024.jpg?cb=1443906825\" alt=\"TESTING - PERFORMANCETESTING - PERFORMANCE&#10;Main worries:&#10;Latency&#10;\" /></i></section><section data-index=\"24\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-24-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-24-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-24-1024.jpg?cb=1443906825\" alt=\"TESTING - INSTANCE TYPETESTING - INSTANCE TYPE&#10;Test all kind of instance types. We decided to&#10;go with r3.2xlarge machines ...\" /></i></section><section data-index=\"25\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-25-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-25-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-25-1024.jpg?cb=1443906825\" alt=\"TESTING - UPGRADETESTING - UPGRADE&#10;Upgrade C* Datacenter from 2.0.8 to 2.1.5&#10;Both versions can cohabit in the same DC&#10;New ...\" /></i></section><section data-index=\"26\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-26-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-26-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-26-1024.jpg?cb=1443906825\" alt=\"MODUS OPERANDIMODUS OPERANDI&#10;\" /></i></section><section data-index=\"27\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-27-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-27-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-27-1024.jpg?cb=1443906825\" alt=\"MODUS OPERANDIMODUS OPERANDI&#10;Sum up&#10;From: One cluster / One DC in US East&#10;To: One cluster / Two DCs in US East and one DC&#10;...\" /></i></section><section data-index=\"28\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-28-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-28-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-28-1024.jpg?cb=1443906825\" alt=\"MODUS OPERANDIMODUS OPERANDI&#10;First step:&#10;Upgrade old cluster snitch from EC2Snitch to&#10;EC2MultiRegionSnitch&#10;Upgrade clients...\" /></i></section><section data-index=\"29\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-29-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-29-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-29-1024.jpg?cb=1443906825\" alt=\"MODUS OPERANDIMODUS OPERANDI&#10;Second step:&#10;Upgrade old datacenter from 2.0.8 to 2.1.5&#10;nodetool upgradesstables (multiple no...\" /></i></section><section data-index=\"30\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-30-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-30-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-30-1024.jpg?cb=1443906825\" alt=\"MODUS OPERANDIMODUS OPERANDI&#10;Third step:&#10;Start EU West and new US East DCs within the same&#10;cluster&#10;Replication factor in n...\" /></i></section><section data-index=\"31\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-31-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-31-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-31-1024.jpg?cb=1443906825\" alt=\"MODUS OPERANDIMODUS OPERANDI&#10;RF 3&#10;Clients&#10;RF 3:0:0:0RF 3:3:3:1&#10;US East Realtime&#10;EU West Realtime&#10;US East Analytics&#10;Rebuild...\" /></i></section><section data-index=\"32\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-32-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-32-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-32-1024.jpg?cb=1443906825\" alt=\"From 39d8f76d9cae11b4db405f5a002e2a4f6f764b1d Mon Sep 17 00:00:00 2001&#10;From: mario &lt;mario@gumgum.com&gt;&#10;Date: Wed, 17 Jun 20...\" /></i></section><section data-index=\"33\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-33-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-33-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-33-1024.jpg?cb=1443906825\" alt=\"RF 3:3:3:1&#10;MODUS OPERANDIMODUS OPERANDI&#10;Clients&#10;US East Realtime&#10;EU West Realtime&#10;US East Analytics&#10;RF 0:3:3:1&#10;\" /></i></section><section data-index=\"34\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-34-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-34-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-34-1024.jpg?cb=1443906825\" alt=\"MODUS OPERANDIMODUS OPERANDI&#10;Clients&#10;US East Realtime&#10;EU West Realtime&#10;US East Analytics&#10;RF 0:3:3:1&#10;RF 3:3:1Decomission&#10;\" /></i></section><section data-index=\"35\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-35-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-35-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-35-1024.jpg?cb=1443906825\" alt=\"TIPSTIPS&#10;\" /></i></section><section data-index=\"36\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-36-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-36-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-36-1024.jpg?cb=1443906825\" alt=\"TIPS - AUTOMATED MAINTENANCETIPS - AUTOMATED MAINTENANCE&#10;Maintenance in a multi-region C* cluster:&#10;Ansible + Cassandra mai...\" /></i></section><section data-index=\"37\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-37-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-37-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-37-1024.jpg?cb=1443906825\" alt=\"TIPS - SPARKTIPS - SPARK&#10;Number of workers above number of total C*&#10;nodes in analytics&#10;Each worker uses:&#10;1/4 number of cor...\" /></i></section><section data-index=\"38\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-38-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-38-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-38-1024.jpg?cb=1443906825\" alt=\"val conf = new SparkConf()&#10;.set(&quot;spark.cassandra.connection.host&quot;, cassandraNodes)&#10;.set(&quot;spark.cassandra.connection.local_...\" /></i></section><section data-index=\"39\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-39-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-39-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-39-1024.jpg?cb=1443906825\" alt=\"SINCE C* IN EU WEST ...SINCE C* IN EU WEST ...&#10;US West Datacenter!&#10;EU West DC US East DC Analytics DC US West DC&#10;\" /></i></section><section data-index=\"40\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/planetcassandra/gumgum-multiregion-cassandra-in-aws\" data-small=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/85/gumgum-multiregion-cassandra-in-aws-40-320.jpg?cb=1443906825\" data-normal=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-40-638.jpg?cb=1443906825\" data-full=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-40-1024.jpg?cb=1443906825\" alt=\"Q&amp;AQ&amp;A&#10;GumGum is hiring!&#10;http://gumgum.com/careers&#10;\" /></i></section><div class=\"j-next-container next-container\"><div class=\"content-container\"><div class=\"next-slideshow-wrapper\"><div class=\"j-next-slideshow next-slideshow\"><p>Upcoming SlideShare</p></div><p>Loading in …5</p><p>×</p></div></div></div></div></div></div></div></div></div><div class=\"slideshow-info-container\" itemscope=\"itemscope\" itemtype=\"https://schema.org/MediaObject\"><div class=\"slideshow-tabs-container show-for-medium-up\"><ul class=\"tabs\" data-tab=\"\" role=\"tablist\"><li class=\"active\" role=\"presentation\">\n                <a href=\"#comments-panel\" role=\"tab\" aria-selected=\"true\" aria-controls=\"comments-panel\">\n                  \n                    0 Comments\n                </a>\n              </li>\n            <li class=\"\" role=\"presentation\">\n              <a href=\"#likes-panel\" role=\"tab\" aria-selected=\"false\" aria-controls=\"likes-panel\">\n                <i class=\"fa fa-heart\">\n                \n                  2 Likes\n                \n              </i></a>\n            </li>\n            <li role=\"presentation\">\n              <a href=\"#stats-panel\" class=\"j-stats-tab\" role=\"tab\" aria-selected=\"false\" aria-controls=\"stats-panel\">\n                <i class=\"fa fa-bar-chart\">\n                Statistics\n              </i></a>\n            </li>\n            <li role=\"presentation\">\n              <a href=\"#notes-panel\" role=\"tab\" aria-selected=\"false\" aria-controls=\"notes-panel\">\n                <i class=\"fa fa-file-text\">\n                Notes\n              </i></a>\n            </li>\n          </ul><div class=\"tabs-content\"><div class=\"content\" id=\"likes-panel\" role=\"tabpanel\" aria-hidden=\"false\"><ul id=\"favsList\" class=\"j-favs-list notranslate user-list no-bullet\" itemtype=\"http://schema.org/UserLikes\" itemscope=\"itemscope\"><li itemtype=\"http://schema.org/Person\" itemscope=\"itemscope\">\n                      <div class=\"row\"><div class=\"small-11 columns\"><a class=\"favoriter notranslate\" title=\"jinwookBaek\" rel=\"nofollow\" href=\"https://www.slideshare.net/jinwookBaek?utm_campaign=profiletracking&amp;utm_medium=sssite&amp;utm_source=ssslideshow\">\n                            jinwook Baek\n                            \n                              \n                                , \n                                CTO\n                              \n                              \n                                 at \n                                JJS Media\n                              \n                            \n                            \n                            </a></div></div>\n                    </li>\n                    <li itemtype=\"http://schema.org/Person\" itemscope=\"itemscope\">\n                      <div class=\"row\"><div class=\"small-11 columns\"><a class=\"favoriter notranslate\" title=\"balajibal\" rel=\"nofollow\" href=\"https://www.slideshare.net/balajibal?utm_campaign=profiletracking&amp;utm_medium=sssite&amp;utm_source=ssslideshow\">\n                            Balaji Bal\n                            \n                              \n                                , \n                                Founder\n                              \n                              \n                                 at \n                                TeslaB\n                              \n                            \n                            \n                            </a></div></div>\n                    </li>\n              </ul></div><div class=\"content\" id=\"downloads-panel\" role=\"tabpanel\" aria-hidden=\"true\"><p>No Downloads</p></div><div class=\"content\" id=\"notes-panel\" role=\"tabpanel\" aria-hidden=\"true\"><p>No notes for slide</p></div></div></div><div class=\"notranslate transcript add-padding-right j-transcript\"><ol class=\"j-transcripts transcripts no-bullet no-style\" itemprop=\"text\"><li>\n      1.\n    CASSANDRA SUMMIT 2015CASSANDRA SUMMIT 2015\nMario Lazaro\nSeptember 24th 2015\n#CassandraSummit2015\nMULTI-REGION CASSANDRA IN AWSMULTI-REGION CASSANDRA IN AWS\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-2-638.jpg?cb=1443906825\" title=\"WHOAMIWHOAMI&#10;Mario Cerdan Lazaro&#10;Big Data Engineer&#10;Born and...\" target=\"_blank\">\n        2.\n      </a>\n    WHOAMIWHOAMI\nMario Cerdan Lazaro\nBig Data Engineer\nBorn and raised in Spain\nJoined GumGum 18 months ago\nAbout a year and a half experience with\nCassandra\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-3-638.jpg?cb=1443906825\" title=\"#5 Ad Platform in the U.S&#10;10B impressions / month&#10;2,000 bra...\" target=\"_blank\">\n        3.\n      </a>\n    #5 Ad Platform in the U.S\n10B impressions / month\n2,000 brand-safe premium\npublisher partners\n1B+ global unique visitors\nDaily inventory Impressions\nprocessed - 213M\nMonthly Image Impressions\nprocessed - 2.6B\n123 employees in seven ofﬁces\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-4-638.jpg?cb=1443906825\" title=\"AGENDAAGENDA&#10;Old cluster&#10;International Expansion&#10;Challenges...\" target=\"_blank\">\n        4.\n      </a>\n    AGENDAAGENDA\nOld cluster\nInternational Expansion\nChallenges\nTesting\nModus Operandi\nTips\nQuestions &amp; Answers\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-5-638.jpg?cb=1443906825\" title=\"25 Classic nodes cluster&#10;1 Region / 1 Rack hosted in&#10;AWS EC...\" target=\"_blank\">\n        5.\n      </a>\n    25 Classic nodes cluster\n1 Region / 1 Rack hosted in\nAWS EC2 US East\nVersion 2.0.8\nDatastax CQL driver\nGumGum's metadata including\nvisitors, images, pages, and ad\nperformance\nUsage: realtime data access\nand analytics (MR jobs)\nOLD C* CLUSTER - MARCH 2015OLD C* CLUSTER - MARCH 2015\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-6-638.jpg?cb=1443906825\" title=\"OLD C* CLUSTER - REALTIME USE CASEOLD C* CLUSTER - REALTIME...\" target=\"_blank\">\n        6.\n      </a>\n    OLD C* CLUSTER - REALTIME USE CASEOLD C* CLUSTER - REALTIME USE CASE\nBillions of rows\nHeavy read workload\n60/40\nTTLs everywhere - Tombstones\nHeavy and critical use of counters\nRTB - Read Latency constraints\n(total execution time ~50 ms)\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-7-638.jpg?cb=1443906825\" title=\"OLD C* CLUSTER - ANALYTICS USE CASEOLD C* CLUSTER - ANALYTI...\" target=\"_blank\">\n        7.\n      </a>\n    OLD C* CLUSTER - ANALYTICS USE CASEOLD C* CLUSTER - ANALYTICS USE CASE\nDaily ETL jobs to extract / join data\nfrom C*\n​Hadoop MR jobs\nAdHoc queries with Presto\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-8-638.jpg?cb=1443906825\" title=\"INTERNATIONAL EXPANSIONINTERNATIONAL EXPANSION&#10;\" target=\"_blank\">\n        8.\n      </a>\n    INTERNATIONAL EXPANSIONINTERNATIONAL EXPANSION\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-9-638.jpg?cb=1443906825\" title=\"FIRST STEPSFIRST STEPS&#10;Start C* test datacenters in US&#10;East...\" target=\"_blank\">\n        9.\n      </a>\n    FIRST STEPSFIRST STEPS\nStart C* test datacenters in US\nEast &amp; EU West and test how C*\nmulti region works in AWS\nRun capacity/performance tests.\nWe expect 3x times more trafﬁc\nin 2015 Q4\nFIRST THOUGHTSFIRST THOUGHTS\nUse AWS Virtual Private\nCloud (VPC)\nCassandra &amp; VPC present\nsome connectivity\nissues challenges\nReplicate entire data\nwith same number of replicas\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-10-638.jpg?cb=1443906825\" title=\"TOO GOOD TO BE TRUE ...TOO GOOD TO BE TRUE ...&#10;\" target=\"_blank\">\n        10.\n      </a>\n    TOO GOOD TO BE TRUE ...TOO GOOD TO BE TRUE ...\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-11-638.jpg?cb=1443906825\" title=\"CHALLENGESCHALLENGES&#10;Problems between Cassandra in EC2&#10;Clas...\" target=\"_blank\">\n        11.\n      </a>\n    CHALLENGESCHALLENGES\nProblems between Cassandra in EC2\nClassic / VPC and Datastax Java\ndriver\nEC2MultiRegionSnitch uses public\nIPs. EC2 instances do not have an\ninterface with public IP address -\nCannot connect between instances in\nthe same region using Public IPs\n/**\n* Implementation of {@link AddressTranslater} used by the driver that\n* translate external IPs to internal IPs.\n* @author Mario &lt;mario@gumgum.com&gt;\n*/\npublic class Ec2ClassicTranslater implements AddressTranslater {\nprivate static final Logger LOGGER = LoggerFactory.getLogger(Ec2Cla\nprivate ClusterService clusterService;\nprivate Cluster cluster;\nprivate List&lt;Instance&gt; publicDnss;\n@PostConstruct\npublic void build() {\npublicDnss = clusterService.getInstances(cluster);\n}\n/**\n* Translates a Cassandra {@code rpc_address} to another address if\n* &lt;p&gt;\n*\n* @param address the address of a node as returned by Cassandra.\n* @return {@code address} translated IP address of the source.\n*/\npublic InetSocketAddress translate(InetSocketAddress address) {\nfor (final Instance server : publicDnss) {\nif (server.getPublicIpAddress().equals(address.getHostStrin\nLOGGER.info(\"IP address: {} translated to {}\", address.\nreturn new InetSocketAddress(server.getPrivateIpAddress\n}\n}\nreturn null;\n}\npublic void setClusterService(ClusterService clusterService) {\nthis.clusterService = clusterService;\n}\npublic void setCluster(Cluster cluster) {\nthis.cluster = cluster;\n}\n}\nProblems between Cassandra in EC2\nClassic / VPC and Datastax Java\ndriver\nEC2MultiRegionSnitch uses public\nIPs. EC2 instances do not have an\ninterface with public IP address -\nCannot connect between instances in\nthe same region using Public IPs\nRegion to Region connectivity will use\npublic IPs - Trust those IPs or use\nsoftware/hardware VPN\nProblems between Cassandra in EC2\nClassic / VPC and Datastax Java\ndriver\nEC2MultiRegionSnitch uses public\nIPs. EC2 instances do not have an\ninterface with public IP address -\nCannot connect between instances in\nthe same region using Public IPs\nRegion to Region connectivity will use\npublic IPs - Trust those IPs or use\nsoftware/hardware VPN\nYour application needs to connect to\nC* using private IPs - Custom EC2\ntranslator\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-12-638.jpg?cb=1443906825\" title=\"Datastax Java Driver Load Balancing&#10;Multiple choices&#10;DCAwar...\" target=\"_blank\">\n        12.\n      </a>\n    Datastax Java Driver Load Balancing\nMultiple choices\nDCAware + TokenAware\nDatastax Java Driver Load Balancing\nMultiple choices\nDCAware + TokenAware + ?\nDatastax Java Driver Load Balancing\nMultiple choices\nCHALLENGES\n“ Clients in one AZ attempt to always communicate with C*\nnodes in the same AZ. We call this zone-aware connections. This\nfeature is built into , Netﬂix’s C* Java client library.Astyanax\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-13-638.jpg?cb=1443906825\" title=\"Zone Aware Connection:&#10;Webapps in 3 different AZs: 1A, 1B, ...\" target=\"_blank\">\n        13.\n      </a>\n    Zone Aware Connection:\nWebapps in 3 different AZs: 1A, 1B, and 1C\nC* datacenter spanning 3 AZs with 3 replicas\nCHALLENGESCHALLENGES\n1A\n1B\n1C\n1B1B\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-14-638.jpg?cb=1443906825\" title=\"We added it! - Rack/AZ awareness to&#10;TokenAware Policy&#10;CHALL...\" target=\"_blank\">\n        14.\n      </a>\n    We added it! - Rack/AZ awareness to\nTokenAware Policy\nCHALLENGESCHALLENGES\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-15-638.jpg?cb=1443906825\" title=\"CHALLENGESCHALLENGES&#10;Third Datacenter: Analytics&#10;Do not imp...\" target=\"_blank\">\n        15.\n      </a>\n    CHALLENGESCHALLENGES\nThird Datacenter: Analytics\nDo not impact realtime data access\nSpark on top of Cassandra\nSpark-Cassandra Datastax connector\nReplicate speciﬁc keyspaces\nLess nodes with larger disk space\nSettings are different\nEx: Bloom ﬁlter chance\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-16-638.jpg?cb=1443906825\" title=\"CHALLENGESCHALLENGES&#10;Third Datacenter: Analytics&#10;Cassandra ...\" target=\"_blank\">\n        16.\n      </a>\n    CHALLENGESCHALLENGES\nThird Datacenter: Analytics\nCassandra Only DC\nRealtime\nCassandra + Spark DC\nAnalytics\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-17-638.jpg?cb=1443906825\" title=\"CHALLENGESCHALLENGES&#10;Upgrade from 2.0.8 to 2.1.5&#10;Counters i...\" target=\"_blank\">\n        17.\n      </a>\n    CHALLENGESCHALLENGES\nUpgrade from 2.0.8 to 2.1.5\nCounters implementation is buggy in\npre-2.1 versions\n“ My code never has bugs. It just develops random\nunexpected features\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-18-638.jpg?cb=1443906825\" title=\"CHALLENGESCHALLENGES&#10;“ To choose, or not to choose VNodes. ...\" target=\"_blank\">\n        18.\n      </a>\n    CHALLENGESCHALLENGES\n“ To choose, or not to choose VNodes. That is the question.\n(M. Lazaro, 1990 - 2500)\nPrevious DC using Classic Nodes\nWorks with MR jobs\nComplexity for adding/removing nodes\nManual manage token ranges\nNew DCs will use VNodes\nApache Spark + Spark Cassandra Datastax\nconnector\nEasy to add/remove new nodes as trafﬁc\nincreases\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-19-638.jpg?cb=1443906825\" title=\"TESTINGTESTING&#10;\" target=\"_blank\">\n        19.\n      </a>\n    TESTINGTESTING\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-20-638.jpg?cb=1443906825\" title=\"TESTINGTESTING&#10;Testing requires creating and modifying&#10;many...\" target=\"_blank\">\n        20.\n      </a>\n    TESTINGTESTING\nTesting requires creating and modifying\nmany C* nodes\nCreate and conﬁguring a C* cluster\nis time-consuming / repetitive task\nCreate fully automated process for\ncreating/modifying/destroying\nCassandra clusters with Ansible\n# Ansible settings for provisioning the EC2 instance\n---\nec2_instance_type: r3.2xlarge\nec2_count:\n- 0 # How many in us-east-1a ?\n- 7 # How many in us-east-1b ?\nec2_vpc_subnet:\n- undefined\n- subnet-c51241b2\n- undefined\n- subnet-80f085d9\n- subnet-f9138cd2\nec2_sg:\n- va-ops\n- va-cassandra-realtime-private\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-21-638.jpg?cb=1443906825\" title=\"TESTING - PERFORMANCETESTING - PERFORMANCE&#10;Performance test...\" target=\"_blank\">\n        21.\n      </a>\n    TESTING - PERFORMANCETESTING - PERFORMANCE\nPerformance tests using new\nCassandra 2.1 Stress Tool:\nRecreate GumGum metadata /\nschemas\nRecreate workload and make\nit 3 times bigger\nTry to ﬁnd limits / Saturate\nclients\n# Keyspace Name\nkeyspace: stresscql\n#keyspace_definition: |\n# CREATE KEYSPACE stresscql WITH replication = {'class': #'\n### Column Distribution Specifications ###\ncolumnspec:\n- name: visitor_id\nsize: gaussian(32..32) #domain names are relatively\npopulation: uniform(1..999M) #10M possible domains to pic\n- name: bidder_code\ncluster: fixed(5)\n- name: bluekai_category_id\n- name: bidder_custom\nsize: fixed(32)\n- name: bidder_id\nsize: fixed(32)\n- name: bluekai_id\nsize: fixed(32)\n- name: dt_pd\n- name: rt_exp_dt\n- name: rt_opt_out\n### Batch Ratio Distribution Specifications ###\ninsert:\npartitions: fixed(1) # Our partition key is the v\nselect: fixed(1)/5 # We have 5 bidder_code per dom\nbatchtype: UNLOGGED # Unlogged batches\n#\n# A list of queries you wish to run against the schema\n#\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-22-638.jpg?cb=1443906825\" title=\"TESTING - PERFORMANCETESTING - PERFORMANCE&#10;Main worry:&#10;Late...\" target=\"_blank\">\n        22.\n      </a>\n    TESTING - PERFORMANCETESTING - PERFORMANCE\nMain worry:\nLatency and replication overseas\nUse LOCAL_X consistency levels in your client\nOnly one C* node will contact only one C* node in a\ndifferent DC for sending replicas/mutations\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-23-638.jpg?cb=1443906825\" title=\"TESTING - PERFORMANCETESTING - PERFORMANCE&#10;Main worries:&#10;La...\" target=\"_blank\">\n        23.\n      </a>\n    TESTING - PERFORMANCETESTING - PERFORMANCE\nMain worries:\nLatency\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-24-638.jpg?cb=1443906825\" title=\"TESTING - INSTANCE TYPETESTING - INSTANCE TYPE&#10;Test all kin...\" target=\"_blank\">\n        24.\n      </a>\n    TESTING - INSTANCE TYPETESTING - INSTANCE TYPE\nTest all kind of instance types. We decided to\ngo with r3.2xlarge machines for our cluster:\n60 GB RAM\n8 Cores\n160GB Ephemeral SSD Storage for commit logs and\nsaved caches\nRAID 0 over 4 SSD EBS Volumes for data\nPerformance / Cost and GumGum use\ncase makes r3.2xlarge the best option\nDisclosure: I2 instance family is the best if\nyou can afford it\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-25-638.jpg?cb=1443906825\" title=\"TESTING - UPGRADETESTING - UPGRADE&#10;Upgrade C* Datacenter fr...\" target=\"_blank\">\n        25.\n      </a>\n    TESTING - UPGRADETESTING - UPGRADE\nUpgrade C* Datacenter from 2.0.8 to 2.1.5\nBoth versions can cohabit in the same DC\nNew settings and features tried\n​DateTieredCompactionStrategy:\nCompaction for Time Series Data\nIncremental repairs\nCounters new architecture\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-26-638.jpg?cb=1443906825\" title=\"MODUS OPERANDIMODUS OPERANDI&#10;\" target=\"_blank\">\n        26.\n      </a>\n    MODUS OPERANDIMODUS OPERANDI\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-27-638.jpg?cb=1443906825\" title=\"MODUS OPERANDIMODUS OPERANDI&#10;Sum up&#10;From: One cluster / One...\" target=\"_blank\">\n        27.\n      </a>\n    MODUS OPERANDIMODUS OPERANDI\nSum up\nFrom: One cluster / One DC in US East\nTo: One cluster / Two DCs in US East and one DC\nin EU West\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-28-638.jpg?cb=1443906825\" title=\"MODUS OPERANDIMODUS OPERANDI&#10;First step:&#10;Upgrade old cluste...\" target=\"_blank\">\n        28.\n      </a>\n    MODUS OPERANDIMODUS OPERANDI\nFirst step:\nUpgrade old cluster snitch from EC2Snitch to\nEC2MultiRegionSnitch\nUpgrade clients to handle it (aka translators)\nMake sure your clients do not lose connection to upgraded\nC* nodes (JIRA DataStax - )JAVA-809\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-29-638.jpg?cb=1443906825\" title=\"MODUS OPERANDIMODUS OPERANDI&#10;Second step:&#10;Upgrade old datac...\" target=\"_blank\">\n        29.\n      </a>\n    MODUS OPERANDIMODUS OPERANDI\nSecond step:\nUpgrade old datacenter from 2.0.8 to 2.1.5\nnodetool upgradesstables (multiple nodes at a time)\nNot possible to rebuild a 2.1.X C* node from a 2.0.X C*\ndatacenter.\nrebuild\nWARN [Thread-12683] 2015-06-17 10:17:22,845 IncomingTcpConnection.java:91 -\nUnknownColumnFamilyException reading from socket;\nclosing org.apache.cassandra.db.UnknownColumnFamilyException: Couldn't find cfId=XXX\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-30-638.jpg?cb=1443906825\" title=\"MODUS OPERANDIMODUS OPERANDI&#10;Third step:&#10;Start EU West and ...\" target=\"_blank\">\n        30.\n      </a>\n    MODUS OPERANDIMODUS OPERANDI\nThird step:\nStart EU West and new US East DCs within the same\ncluster\nReplication factor in new DCs: 0\nUse dc_sufﬁx to differentiate new Virginia DC from old one\nClients do not talk to new DCs. Only C* knows they exist\nReplication factor to 3 on all except analytics 1\n​​Start receiving new data\nNodetool rebuild &lt;old-datacenter&gt;\n​Old data\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-31-638.jpg?cb=1443906825\" title=\"MODUS OPERANDIMODUS OPERANDI&#10;RF 3&#10;Clients&#10;RF 3:0:0:0RF 3:3:...\" target=\"_blank\">\n        31.\n      </a>\n    MODUS OPERANDIMODUS OPERANDI\nRF 3\nClients\nRF 3:0:0:0RF 3:3:3:1\nUS East Realtime\nEU West Realtime\nUS East Analytics\nRebuild\nRebuild\nRebuild\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-32-638.jpg?cb=1443906825\" title=\"From 39d8f76d9cae11b4db405f5a002e2a4f6f764b1d Mon Sep 17 00...\" target=\"_blank\">\n        32.\n      </a>\n    From 39d8f76d9cae11b4db405f5a002e2a4f6f764b1d Mon Sep 17 00:00:00 2001\nFrom: mario &lt;mario@gumgum.com&gt;\nDate: Wed, 17 Jun 2015 14:21:32 -0700\nSubject: [PATCH] AT-3576 Start using new Cassandra realtime cluster\n---\nsrc/main/java/com/gumgum/cassandra/Client.java | 30 ++++------------------\n.../com/gumgum/cassandra/Ec2ClassicTranslater.java | 30 ++++++++++++++--------\nsrc/main/java/com/gumgum/cluster/Cluster.java | 3 ++-\n.../resources/applicationContext-cassandra.xml | 13 ++++------\nsrc/main/resources/dev.properties | 2 +-\nsrc/main/resources/eu-west-1.prod.properties | 3 +++\nsrc/main/resources/prod.properties | 3 +--\nsrc/main/resources/us-east-1.prod.properties | 3 +++\n.../CassandraAdPerformanceDaoImplTest.java | 2 --\n.../asset/cassandra/CassandraImageDaoImplTest.java | 2 --\n.../CassandraExactDuplicatesDaoTest.java | 2 --\n.../com/gumgum/page/CassandraPageDoaImplTest.java | 2 --\n.../cassandra/CassandraVisitorDaoImplTest.java | 2 --\n13 files changed, 39 insertions(+), 58 deletions(-)\nMODUS OPERANDIMODUS OPERANDI\nStart using new Cassandra DCs\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-33-638.jpg?cb=1443906825\" title=\"RF 3:3:3:1&#10;MODUS OPERANDIMODUS OPERANDI&#10;Clients&#10;US East Rea...\" target=\"_blank\">\n        33.\n      </a>\n    RF 3:3:3:1\nMODUS OPERANDIMODUS OPERANDI\nClients\nUS East Realtime\nEU West Realtime\nUS East Analytics\nRF 0:3:3:1\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-34-638.jpg?cb=1443906825\" title=\"MODUS OPERANDIMODUS OPERANDI&#10;Clients&#10;US East Realtime&#10;EU We...\" target=\"_blank\">\n        34.\n      </a>\n    MODUS OPERANDIMODUS OPERANDI\nClients\nUS East Realtime\nEU West Realtime\nUS East Analytics\nRF 0:3:3:1\nRF 3:3:1Decomission\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-35-638.jpg?cb=1443906825\" title=\"TIPSTIPS&#10;\" target=\"_blank\">\n        35.\n      </a>\n    TIPSTIPS\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-36-638.jpg?cb=1443906825\" title=\"TIPS - AUTOMATED MAINTENANCETIPS - AUTOMATED MAINTENANCE&#10;Ma...\" target=\"_blank\">\n        36.\n      </a>\n    TIPS - AUTOMATED MAINTENANCETIPS - AUTOMATED MAINTENANCE\nMaintenance in a multi-region C* cluster:\nAnsible + Cassandra maintenance keyspace +\nemail report = zero human intervention!\nCREATE TABLE maintenance.history (\ndc text,\nop text,\nts timestamp,\nip text,\nPRIMARY KEY ((dc, op), ts)\n) WITH CLUSTERING ORDER BY (ts ASC) AND\nbloom_filter_fp_chance=0.010000 AND\ncaching='{\"keys\":\"ALL\", \"rows_per_partition\":\"NONE\"}' AND\ncomment='' AND\ndclocal_read_repair_chance=0.100000 AND\ngc_grace_seconds=864000 AND\nread_repair_chance=0.000000 AND\ncompaction={'class': 'SizeTieredCompactionStrategy'} AND\ncompression={'sstable_compression': 'LZ4Compressor'};\nCREATE INDEX history_kscf_idx ON maintenance.history (kscf);\n3-133-65:/opt/scripts/production/groovy$ groovy CassandraMaintenanceCheck.groovy -dc us-east-va-realtime -op compaction -e mari\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-37-638.jpg?cb=1443906825\" title=\"TIPS - SPARKTIPS - SPARK&#10;Number of workers above number of ...\" target=\"_blank\">\n        37.\n      </a>\n    TIPS - SPARKTIPS - SPARK\nNumber of workers above number of total C*\nnodes in analytics\nEach worker uses:\n1/4 number of cores of each instance\n1/3 total available RAM of each instance\nCassandra-Spark connector\n​SpanBy\n.joinWithCassandraTable(:x, :y)\nSpark.cassandra.output.batch.size.bytes\nSpark.cassandra.output.concurrent.writes\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-38-638.jpg?cb=1443906825\" title=\"val conf = new SparkConf()&#10;.set(&quot;spark.cassandra.connection...\" target=\"_blank\">\n        38.\n      </a>\n    val conf = new SparkConf()\n.set(\"spark.cassandra.connection.host\", cassandraNodes)\n.set(\"spark.cassandra.connection.local_dc\", \"us-east-va-analytics\")\n.set(\"spark.cassandra.connection.factory\", \"com.gumgum.spark.bluekai.DirectLinkConnectionFactory\")\n.set(\"spark.driver.memory\",\"4g\")\n.setAppName(\"Cassandra presidential candidates app\")\nTIPS - SPARKTIPS - SPARK\nCreate \"translator\" if using EC2MultiRegionSnitch\nSpark.cassandra.connection.factory\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-39-638.jpg?cb=1443906825\" title=\"SINCE C* IN EU WEST ...SINCE C* IN EU WEST ...&#10;US West Data...\" target=\"_blank\">\n        39.\n      </a>\n    SINCE C* IN EU WEST ...SINCE C* IN EU WEST ...\nUS West Datacenter!\nEU West DC US East DC Analytics DC US West DC\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandra-summit-2015-gumgum6-151003201902-lva1-app6891/95/gumgum-multiregion-cassandra-in-aws-40-638.jpg?cb=1443906825\" title=\"Q&amp;AQ&amp;A&#10;GumGum is hiring!&#10;http://gumgum.com/careers&#10;\" target=\"_blank\">\n        40.\n      </a>\n    Q&amp;AQ&amp;A\nGumGum is hiring!\nhttp://gumgum.com/careers\n \n  </li>\n              </ol></div></div></div><aside id=\"side-panel\" class=\"small-12 large-4 columns j-related-more-tab\"><dl class=\"tabs related-tabs small\" data-tab=\"\"><dd class=\"active\">\n      <a href=\"#related-tab-content\" data-ga-cat=\"bigfoot_slideview\" data-ga-action=\"relatedslideshows_tab\">\n        Recommended\n      </a>\n    </dd>\n</dl><div class=\"tabs-content\"><ul id=\"related-tab-content\" class=\"content active no-bullet notranslate\"><li class=\"lynda-item\">\n  <a data-ssid=\"53500779\" title=\"Test Prep: GRE\" href=\"https://www.linkedin.com/learning/test-prep-gre?trk=slideshare_sv_learning\" data-ga-cat=\"sv_loggedout\" data-ga-label=\"lil_rec_Test Prep: GRE\" data-ga-action=\"click\">\n    <div class=\"lynda-thumbnail\"><img class=\"j-thumbnail j-lazy-thumb\" alt=\"Test Prep: GRE\" src=\"https://www.linkedin.com/media-proxy/ext?w=1200&amp;h=675&amp;hash=zRN9cYKLcI5pMFN7G1fZgp5AHQw%3D&amp;ora=1%2CaFBCTXdkRmpGL2lvQUFBPQ%2CxAVta5g-0R6plxVUzgUv5K_PrkC9q0RIUJDPBy-lXSSj-9OfZHHocMbZZLSiol8QcS4DkQA2e-ahSTLnEI69LcLmY4Yx3A\" /></div>\n    <div class=\"lynda-content\"><p>Test Prep: GRE</p><p>Online Course - LinkedIn Learning</p></div>\n  </a>\n</li>\n          <li class=\"lynda-item\">\n  <a data-ssid=\"53500779\" title=\"PowerPoint for Teachers: Creating Interactive Lessons\" href=\"https://www.linkedin.com/learning/powerpoint-for-teachers-creating-interactive-lessons?trk=slideshare_sv_learning\" data-ga-cat=\"sv_loggedout\" data-ga-label=\"lil_rec_PowerPoint for Teachers: Creating Interactive Lessons\" data-ga-action=\"click\">\n    <div class=\"lynda-thumbnail\"><img class=\"j-thumbnail j-lazy-thumb\" alt=\"PowerPoint for Teachers: Creating Interactive Lessons\" src=\"https://www.linkedin.com/media-proxy/ext?w=1200&amp;h=675&amp;hash=NrZ6QSg%2BBWntE4IYVUxrWwdlQFs%3D&amp;ora=1%2CaFBCTXdkRmpGL2lvQUFBPQ%2CxAVta5g-0R6plxVUzgUv5K_PrkC9q0RIUJDPBy-lXCeu-NKfZHDrfcXYZLSiol4QfyoDmQEyfuerQzPmFY69LcLmY4Yx3A\" /></div>\n    <div class=\"lynda-content\"><p>PowerPoint for Teachers: Creating Interactive Lessons</p><p>Online Course - LinkedIn Learning</p></div>\n  </a>\n</li>\n          <li class=\"lynda-item\">\n  <a data-ssid=\"53500779\" title=\"Communication in the 21st Century Classroom\" href=\"https://www.linkedin.com/learning/communication-in-the-21st-century-classroom?trk=slideshare_sv_learning\" data-ga-cat=\"sv_loggedout\" data-ga-label=\"lil_rec_Communication in the 21st Century Classroom\" data-ga-action=\"click\">\n    <div class=\"lynda-thumbnail\"><img class=\"j-thumbnail j-lazy-thumb\" alt=\"Communication in the 21st Century Classroom\" src=\"https://www.linkedin.com/media-proxy/ext?w=1200&amp;h=675&amp;hash=jpGZZw5ymAXBiG%2B8nbN88R%2BVVZo%3D&amp;ora=1%2CaFBCTXdkRmpGL2lvQUFBPQ%2CxAVta5g-0R6plxVUzgUv5K_PrkC9q0RIUJDPBy-lWCWq_defZHTpecDdZLSiol4QfyoDlg00fuutSDPoEo69LcLmY4Yx3A\" /></div>\n    <div class=\"lynda-content\"><p>Communication in the 21st Century Classroom</p><p>Online Course - LinkedIn Learning</p></div>\n  </a>\n</li>\n        <li class=\"j-related-item\">\n  <a data-ssid=\"53858704\" data-algo-id=\"21\" data-source-name=\"BROWSEMAP\" data-source-model=\"21\" data-urn-type=\"Slideshow\" data-score=\"1\" class=\"j-related-impression slideview_related_item j-recommendation-tracking\" title=\"Multi-Region Cassandra Clusters\" href=\"https://www.slideshare.net/Instaclustr/cassandra-multi-region-clusters-cassandra-summit-2014\">\n    \n    <div class=\"related-content\"><p>Multi-Region Cassandra Clusters</p><p>Instaclustr</p></div>\n  </a>\n</li>\n        <li class=\"j-related-item\">\n  <a data-ssid=\"77306108\" data-algo-id=\"\" data-source-name=\"MORE_FROM_USER\" data-source-model=\"\" data-urn-type=\"Slideshow\" data-score=\"\" class=\"j-related-impression slideview_related_item j-recommendation-tracking\" title=\"Forrester CXNYC 2017 - Delivering great real-time cx is a true craft\" href=\"https://www.slideshare.net/planetcassandra/forrester-cxnyc-2017-delivering-great-realtime-cx-is-a-true-craft\">\n    \n    <div class=\"related-content\"><p>Forrester CXNYC 2017 - Delivering great real-time cx is a true craft</p><p>DataStax Academy</p></div>\n  </a>\n</li>\n        <li class=\"j-related-item\">\n  <a data-ssid=\"64947458\" data-algo-id=\"\" data-source-name=\"MORE_FROM_USER\" data-source-model=\"\" data-urn-type=\"Slideshow\" data-score=\"\" class=\"j-related-impression slideview_related_item j-recommendation-tracking\" title=\"Introduction to DataStax Enterprise Graph Database\" href=\"https://www.slideshare.net/planetcassandra/introduction-to-datastax-enterprise-graph-database\">\n    \n    <div class=\"related-content\"><p>Introduction to DataStax Enterprise Graph Database</p><p>DataStax Academy</p></div>\n  </a>\n</li>\n        <li class=\"j-related-item\">\n  <a data-ssid=\"64947204\" data-algo-id=\"\" data-source-name=\"MORE_FROM_USER\" data-source-model=\"\" data-urn-type=\"Slideshow\" data-score=\"\" class=\"j-related-impression slideview_related_item j-recommendation-tracking\" title=\"Introduction to DataStax Enterprise Advanced Replication with Apache Cassandra\" href=\"https://www.slideshare.net/planetcassandra/introduction-to-datastax-enterprise-advanced-replication-with-apache-cassandra\">\n    \n    <div class=\"related-content\"><p>Introduction to DataStax Enterprise Advanced Replication with Apache Cassandra</p><p>DataStax Academy</p></div>\n  </a>\n</li>\n        <li class=\"j-related-item\">\n  <a data-ssid=\"64223739\" data-algo-id=\"\" data-source-name=\"MORE_FROM_USER\" data-source-model=\"\" data-urn-type=\"Slideshow\" data-score=\"\" class=\"j-related-impression slideview_related_item j-recommendation-tracking\" title=\"Cassandra on Docker @ Walmart Labs\" href=\"https://www.slideshare.net/planetcassandra/cassandra-on-docker-walmart-labs\">\n    \n    <div class=\"related-content\"><p>Cassandra on Docker @ Walmart Labs</p><p>DataStax Academy</p></div>\n  </a>\n</li>\n        <li class=\"j-related-item\">\n  <a data-ssid=\"64222983\" data-algo-id=\"\" data-source-name=\"MORE_FROM_USER\" data-source-model=\"\" data-urn-type=\"Slideshow\" data-score=\"\" class=\"j-related-impression slideview_related_item j-recommendation-tracking\" title=\"Cassandra 3.0 Data Modeling\" href=\"https://www.slideshare.net/planetcassandra/cassandra-30-data-modeling\">\n    \n    <div class=\"related-content\"><p>Cassandra 3.0 Data Modeling</p><p>DataStax Academy</p></div>\n  </a>\n</li>\n        <li class=\"j-related-item\">\n  <a data-ssid=\"64222866\" data-algo-id=\"\" data-source-name=\"MORE_FROM_USER\" data-source-model=\"\" data-urn-type=\"Slideshow\" data-score=\"\" class=\"j-related-impression slideview_related_item j-recommendation-tracking\" title=\"Cassandra Adoption on Cisco UCS &amp; Open stack\" href=\"https://www.slideshare.net/planetcassandra/cassandra-adoption-on-cisco-ucs-open-stack\">\n    \n    <div class=\"related-content\"><p>Cassandra Adoption on Cisco UCS &amp; Open stack</p><p>DataStax Academy</p></div>\n  </a>\n</li>\n    </ul></div>\n    </aside></div></div><footer>\n          <div class=\"row\"><div class=\"columns\"><ul class=\"main-links text-center\"><li><a href=\"https://www.slideshare.net/about\">About</a></li>\n                \n                <li><a href=\"http://blog.slideshare.net/\">Blog</a></li>\n                <li><a href=\"https://www.slideshare.net/terms\">Terms</a></li>\n                <li><a href=\"https://www.slideshare.net/privacy\">Privacy</a></li>\n                <li><a href=\"http://www.linkedin.com/legal/copyright-policy\">Copyright</a></li>\n                \n              </ul></div></div>\n          \n          <div class=\"row\"><div class=\"columns\"><p class=\"copyright text-center\">LinkedIn Corporation © 2018</p></div></div>\n        </footer></div>\n    \n    <div class=\"modal_popup_container\"><div id=\"top-clipboards-modal\" class=\"reveal-modal xlarge top-clipboards-modal\" data-reveal=\"\" aria-labelledby=\"modal-title\" aria-hidden=\"true\" role=\"dialog\"><h4 class=\"modal-title\">Public clipboards featuring this slide</h4><hr /><p>No public clipboards found for this slide</p></div><div id=\"select-clipboard-modal\" class=\"reveal-modal medium\" data-reveal=\"\" aria-labelledby=\"modal-title\" aria-hidden=\"true\" role=\"dialog\" translate=\"no\"><p></p><h4 class=\"modal-title\">Select another clipboard</h4>\n    <hr /><a class=\"close-reveal-modal button-lrg\" href=\"#\" aria-label=\"Close\">×</a><div class=\"modal-content\"><div class=\"default-clipboard-panel radius\"><p>Looks like you’ve clipped this slide to <strong class=\"default-clipboard-title\"> already.</strong></p></div><div class=\"clipboard-list-container\"><div class=\"clipboard-create-new\"><p>Create a clipboard</p></div></div></div></div><div id=\"clipboard-create-modal\" class=\"reveal-modal medium\" data-reveal=\"\" aria-labelledby=\"modal-title\" aria-hidden=\"true\" role=\"dialog\" translate=\"no\"><p></p><h3>You just clipped your first slide!</h3>\n      \n        Clipping is a handy way to collect important slides you want to go back to later. Now customize the name of a clipboard to store your clips.<h4 class=\"modal-title\" id=\"modal-title\">\n    \n    <label>Description\n          \n        </label></h4></div>\n    <div class=\"row\"><label>Visibility\n        <small id=\"privacy-switch-description\">Others can see my Clipboard</small>\n          </label><label for=\"privacy-switch\">\n      </label></div>\n        \n    </div>\n    \n    \n      <noscript>\n    </noscript>"}}]}},"pageContext":{"alternative_id":9036}}