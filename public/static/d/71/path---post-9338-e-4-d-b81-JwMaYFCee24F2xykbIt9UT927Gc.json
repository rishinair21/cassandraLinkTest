{"data":{"allAnantCassandralinks":{"edges":[{"node":{"title":"Deletes Without Tombstones or TTLs (Eric Stevens, ProtectWise) | Cass…","alternative_id":9338,"content":"Deletes Without Tombstones or TTLs (Eric Stevens, ProtectWise) | Cass…\n      \n      \n      <div id=\"main-nav\" class=\"contain-to-grid fixed\"><p><a class=\"item\" href=\"https://www.slideshare.net/\" aria-labelledby=\"#home\">\n            \n            </a><label id=\"home\">SlideShare</label>\n          \n          <a class=\"item\" href=\"https://www.slideshare.net/explore\" aria-labelledby=\"#explore\">\n            <i class=\"fa fa-compass\">\n            </i></a><label id=\"explore\">Explore</label>\n          \n          \n            <a class=\"item\" href=\"https://www.slideshare.net/login\" aria-labelledby=\"#you\">\n              <i class=\"fa fa-user\">\n              </i></a><label id=\"you\">You</label>\n            </p></div>\n    <div class=\"wrapper\"><p>Successfully reported this slideshow.</p><div id=\"slideview-container\" class=\"\"><div class=\"row\"><div id=\"main-panel\" class=\"small-12 large-8 columns\"><div class=\"sectionElements\"><div class=\"playerWrapper\"><div><div class=\"player lightPlayer fluidImage presentation_player\" id=\"svPlayerId\">Deletes Without Tombstones or TTLs (Eric Stevens, ProtectWise) | Cassandra Summit 2016<div class=\"stage valign-first-slide\"><div class=\"slide_container\"><section data-index=\"1\" class=\"slide show\" itemprop=\"image\"><img class=\"slide_image\" src=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-1-638.jpg?cb=1474041531\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-1-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-1-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-1-1024.jpg?cb=1474041531\" alt=\"Deletes Without&#10;Tombstones or TTLs&#10;Eric Stevens, Principal Architect&#10;ProtectWise, Inc.&#10;\" /></section><section data-index=\"2\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-2-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-2-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-2-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;About ProtectWise&#10;An enterprise security company that records, analyzes, and ...\" /></i></section><section data-index=\"3\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-3-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-3-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-3-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;With one sensor, ProtectWise captured the&#10;following data at Super Bowl 50:&#10;● ...\" /></i></section><section data-index=\"4\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-4-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-4-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-4-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● How Deletes (tombstones) in Cassandra Work Today&#10;● The Limitations of Tombs...\" /></i></section><section data-index=\"5\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-5-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-5-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-5-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Increases both write and read I/O pressure&#10;● Not an effective means of recl...\" /></i></section><section data-index=\"6\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-6-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-6-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-6-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;When do tombstones (and expired TTL’d&#10;records) go away?&#10;● Never before it’s g...\" /></i></section><section data-index=\"7\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-7-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-7-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-7-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Misconception about Tombstone Performance&#10;● The performance degradation from ...\" /></i></section><section data-index=\"8\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-8-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-8-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-8-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;PK1 CK1&#10;CK2&#10;1 2 ... o&#10;1 2 ... p&#10;... ...&#10;CKn 1 2 ... q&#10;PK1 DELETE 1 – n-1&#10;SSTa...\" /></i></section><section data-index=\"9\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-9-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-9-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-9-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;{&#10;{&#10;{&#10;{&#10;Compaction Review&#10;↑ Writes&#10;← Older Data Newer Data →&#10;\" /></i></section><section data-index=\"10\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-10-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-10-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-10-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Tombstones in Compaction&#10;↑ Delete&#10;SSTable&#10;containing&#10;record to&#10;delete ↑&#10;\" /></i></section><section data-index=\"11\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-11-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-11-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-11-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Tombstones in Compaction&#10;↑ Other Writes&#10;SSTable&#10;containing&#10;record to&#10;delete ↑&#10;\" /></i></section><section data-index=\"12\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-12-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-12-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-12-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Tombstones in Compaction&#10;↑ Other Writes&#10;SSTable&#10;containing&#10;record to&#10;delete ↑&#10;\" /></i></section><section data-index=\"13\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-13-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-13-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-13-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Tombstones in Compaction&#10;↑ Other Writes&#10;SSTable&#10;containing&#10;record to&#10;delete ↑&#10;\" /></i></section><section data-index=\"14\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-14-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-14-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-14-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Tombstones in Compaction&#10;↑ Other Writes&#10;Finally&#10;Deleted ↑&#10;\" /></i></section><section data-index=\"15\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-15-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-15-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-15-1024.jpg?cb=1474041531\" alt=\"Showing why tombstones are not the same thing as a delete.&#10;Tombstone Demo&#10;\" /></i></section><section data-index=\"16\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-16-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-16-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-16-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Setup&#10;cqlsh&gt; CREATE TABLE testing(&#10;… p blob,&#10;… c blob,&#10;… v blob,&#10;… PRIMARY KE...\" /></i></section><section data-index=\"17\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-17-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-17-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-17-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Setup&#10;cqlsh&gt; INSERT INTO testing&#10;(p,c,v) VALUES (0xcafebabe,&#10;0xdeadbeef, 0xde...\" /></i></section><section data-index=\"18\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-18-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-18-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-18-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Setup&#10;cqlsh&gt; DELETE FROM testing WHERE&#10;p=0xcafebabe AND c=0xdeadbeef;&#10;$ nodet...\" /></i></section><section data-index=\"19\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-19-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-19-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-19-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Let’s look at the data&#10;$ hexdump testing-testing-ka-1-Data.db&#10;0000000 4b 00 0...\" /></i></section><section data-index=\"20\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-20-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-20-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-20-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Let’s look at the data&#10;$ hexdump testing-testing-ka-2-Data.db&#10;0000000 4b 00 0...\" /></i></section><section data-index=\"21\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-21-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-21-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-21-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Let’s look at the data&#10;$ hexdump testing-testing-ka-3-Data.db&#10;0000000 33 00 0...\" /></i></section><section data-index=\"22\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-22-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-22-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-22-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Time to Compact&#10;Simulate compaction&#10;happening on data that&#10;has been deleted, ...\" /></i></section><section data-index=\"23\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-23-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-23-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-23-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Let’s look again:&#10;$ hexdump testing-testing-ka-4-Data.db&#10;0000000 4b 00 00 00 ...\" /></i></section><section data-index=\"24\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-24-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-24-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-24-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;What happened?&#10;● The tombstone for primary key (0xcafebabe,0xdeadbeef) was wr...\" /></i></section><section data-index=\"25\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-25-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-25-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-25-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Why is this a problem&#10;● In all mainline compaction strategies:&#10;○ Data written...\" /></i></section><section data-index=\"26\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-26-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-26-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-26-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Once a TTL has been written, there is no&#10;way to change your mind except to ...\" /></i></section><section data-index=\"27\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-27-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-27-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-27-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Customers get to change their mind about how&#10;long they want us to retain th...\" /></i></section><section data-index=\"28\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-28-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-28-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-28-1024.jpg?cb=1474041531\" alt=\"Our Unconventional Solution&#10;\" /></i></section><section data-index=\"29\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-29-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-29-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-29-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● If you have hot swappable drives, this is a&#10;lot easier, if not, you might h...\" /></i></section><section data-index=\"30\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-30-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-30-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-30-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Step 3&#10;\" /></i></section><section data-index=\"31\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-31-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-31-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-31-1024.jpg?cb=1474041531\" alt=\"Deleting Compaction Strategy&#10;\" /></i></section><section data-index=\"32\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-32-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-32-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-32-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Records are removed from the next&#10;compaction as soon as they should be&#10;evic...\" /></i></section><section data-index=\"33\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-33-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-33-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-33-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● If you choose to, you can create a backup&#10;automatically of the deleted reco...\" /></i></section><section data-index=\"34\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-34-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-34-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-34-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Configurable and extensible&#10;● Several provided implementations can&#10;be reaso...\" /></i></section><section data-index=\"35\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-35-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-35-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-35-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;ALTER TABLE bar WITH compaction = {&#10;'class': 'DeletingCompactionStrategy',&#10;'d...\" /></i></section><section data-index=\"36\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-36-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-36-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-36-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Compaction’s Inner Workings&#10;Credit: DataStax&#10;https://docs.datastax.com/en/cas...\" /></i></section><section data-index=\"37\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-37-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-37-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-37-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Compaction’s Inner Workings&#10;Credit: DataStax&#10;https://docs.datastax.com/en/cas...\" /></i></section><section data-index=\"38\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-38-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-38-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-38-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Compaction’s Inner Workings&#10;Credit: DataStax&#10;https://docs.datastax.com/en/cas...\" /></i></section><section data-index=\"39\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-39-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-39-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-39-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Rules:&#10;A =&gt; ✓&#10;B =&gt; ✗&#10;C =&gt; ✓&#10;D =&gt; ✗&#10;E =&gt; ✓&#10;* if configured to backup convicted...\" /></i></section><section data-index=\"40\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-40-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-40-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-40-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Compaction performance is often bounded&#10;by available write capacity&#10;● Fewer...\" /></i></section><section data-index=\"41\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-41-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-41-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-41-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Records past the deletion boundary may&#10;still be visible to your application...\" /></i></section><section data-index=\"42\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-42-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-42-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-42-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Read repair and in general any repair may&#10;cause a record to fully resurrect...\" /></i></section><section data-index=\"43\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-43-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-43-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-43-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Supports and tested against Cassandra 2.x&#10;series&#10;● In 3.x the package and c...\" /></i></section><section data-index=\"44\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-44-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-44-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-44-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;https://github.com/protectwise/cassandra-util&#10;Also includes:&#10;● Our DataStax D...\" /></i></section><section data-index=\"45\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-45-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-45-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-45-1024.jpg?cb=1474041531\" alt=\"www.protectwise.com/careers.html&#10;Especially if you’re in Denver!&#10;Scala, Akka, Spark, Node, DevOps&#10;We’re Hiring!&#10;\" /></i></section><section data-index=\"46\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-46-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-46-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-46-1024.jpg?cb=1474041531\" alt=\"©2016 ProtectWise, Inc. All rights reserved.&#10;\" /></i></section><section data-index=\"47\" class=\"slide\"><i class=\"fa fa-spinner fa-spin\"><img class=\"slide_image\" src=\"https://www.slideshare.net/DataStax/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016\" data-small=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/85/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-47-320.jpg?cb=1474041531\" data-normal=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-47-638.jpg?cb=1474041531\" data-full=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-47-1024.jpg?cb=1474041531\" alt=\"Cold Storage that Isn’t Glacial&#10;Tomorrow 10:45 Room LL20D&#10;Using Approximate Data for Small,&#10;Insightful Analytics&#10;Tomorrow ...\" /></i></section><div class=\"j-next-container next-container\"><div class=\"content-container\"><div class=\"next-slideshow-wrapper\"><div class=\"j-next-slideshow next-slideshow\"><p>Upcoming SlideShare</p></div><p>Loading in …5</p><p>×</p></div></div></div></div></div></div></div></div></div><div class=\"slideshow-info-container\" itemscope=\"itemscope\" itemtype=\"https://schema.org/MediaObject\"><div class=\"slideshow-tabs-container show-for-medium-up\"><ul class=\"tabs\" data-tab=\"\" role=\"tablist\"><li class=\"active\" role=\"presentation\">\n                <a href=\"#comments-panel\" role=\"tab\" aria-selected=\"true\" aria-controls=\"comments-panel\">\n                  \n                    0 Comments\n                </a>\n              </li>\n            <li class=\"\" role=\"presentation\">\n              <a href=\"#likes-panel\" role=\"tab\" aria-selected=\"false\" aria-controls=\"likes-panel\">\n                <i class=\"fa fa-heart\">\n                \n                  6 Likes\n                \n              </i></a>\n            </li>\n            <li role=\"presentation\">\n              <a href=\"#stats-panel\" class=\"j-stats-tab\" role=\"tab\" aria-selected=\"false\" aria-controls=\"stats-panel\">\n                <i class=\"fa fa-bar-chart\">\n                Statistics\n              </i></a>\n            </li>\n            <li role=\"presentation\">\n              <a href=\"#notes-panel\" role=\"tab\" aria-selected=\"false\" aria-controls=\"notes-panel\">\n                <i class=\"fa fa-file-text\">\n                Notes\n              </i></a>\n            </li>\n          </ul><div class=\"tabs-content\"><div class=\"content\" id=\"likes-panel\" role=\"tabpanel\" aria-hidden=\"false\"><ul id=\"favsList\" class=\"j-favs-list notranslate user-list no-bullet\" itemtype=\"http://schema.org/UserLikes\" itemscope=\"itemscope\"><li itemtype=\"http://schema.org/Person\" itemscope=\"itemscope\">\n                      <div class=\"row\"><div class=\"small-11 columns\"><a class=\"favoriter notranslate\" title=\"gregorypub\" rel=\"nofollow\" href=\"https://www.slideshare.net/gregorypub?utm_campaign=profiletracking&amp;utm_medium=sssite&amp;utm_source=ssslideshow\">\n                            gregorypub\n                            \n                              \n                                \n                                \n                              \n                              \n                                \n                                \n                              \n                            \n                            \n                            </a></div></div>\n                    </li>\n                    <li itemtype=\"http://schema.org/Person\" itemscope=\"itemscope\">\n                      <div class=\"row\"><div class=\"small-11 columns\"><a class=\"favoriter notranslate\" title=\"NELLAIVIJAY1\" rel=\"nofollow\" href=\"https://www.slideshare.net/NELLAIVIJAY1?utm_campaign=profiletracking&amp;utm_medium=sssite&amp;utm_source=ssslideshow\">\n                            Vijayakumar Ramdoss\n                            \n                              \n                                , \n                                Platform Architect\n                              \n                              \n                                 at \n                                Dell\n                              \n                            \n                            \n                            </a></div></div>\n                    </li>\n                    <li itemtype=\"http://schema.org/Person\" itemscope=\"itemscope\">\n                      <div class=\"row\"><div class=\"small-11 columns\"><a class=\"favoriter notranslate\" title=\"will971\" rel=\"nofollow\" href=\"https://www.slideshare.net/will971?utm_campaign=profiletracking&amp;utm_medium=sssite&amp;utm_source=ssslideshow\">\n                            Fabrice FACORAT\n                            \n                              \n                                , \n                                Linux system administrator, NoSQL and Big Data Expert\n                              \n                              \n                                 at \n                                Agoda\n                              \n                            \n                            \n                            </a></div></div>\n                    </li>\n                    <li itemtype=\"http://schema.org/Person\" itemscope=\"itemscope\">\n                      <div class=\"row\"><div class=\"small-11 columns\"><a class=\"favoriter notranslate\" title=\"soloix\" rel=\"nofollow\" href=\"https://www.slideshare.net/soloix?utm_campaign=profiletracking&amp;utm_medium=sssite&amp;utm_source=ssslideshow\">\n                            soloix\n                            \n                              \n                                \n                                \n                              \n                              \n                                \n                                \n                              \n                            \n                            \n                            </a></div></div>\n                    </li>\n                    <li itemtype=\"http://schema.org/Person\" itemscope=\"itemscope\">\n                      <div class=\"row\"><div class=\"small-11 columns\"><a class=\"favoriter notranslate\" title=\"stavroskontopoulos\" rel=\"nofollow\" href=\"https://www.slideshare.net/stavroskontopoulos?utm_campaign=profiletracking&amp;utm_medium=sssite&amp;utm_source=ssslideshow\">\n                            Stavros Kontopoulos\n                            \n                              \n                                , \n                                Senior Software Engineer at Lightbend, PSM I, PSPO I, Phd Student\n                              \n                              \n                                 at \n                                Lightbend\n                              \n                            \n                            \n                            </a></div></div>\n                    </li>\n              </ul><div class=\"more-container text-center\"><a href=\"#\" class=\"j-more-favs\">\n                    Show More\n                    \n                  </a></div></div><div class=\"content\" id=\"downloads-panel\" role=\"tabpanel\" aria-hidden=\"true\"><p>No Downloads</p></div><div class=\"content\" id=\"notes-panel\" role=\"tabpanel\" aria-hidden=\"true\"><p>No notes for slide</p>Essentially tombstones will never go away as long as a partition contains data in more than one SSTable, sometimes not even then (bloom filter collisions)When you write to Cassandra, the writes initially go to Memtables.   <br />When the memtables get full, they flush to disk as an immutable SSTable <br />When you perform a read, Cassandra needs to consider all the SSTables on disk, so as you accumulate lots of small SSTables, read performance will degrade <br />What do you think will be in SSTable 4? <br />Optimally it should be an empty table, the only record in it has been deleted. <br />However…What happened?</div></div></div><div class=\"notranslate transcript add-padding-right j-transcript\"><ol class=\"j-transcripts transcripts no-bullet no-style\" itemprop=\"text\"><li>\n      1.\n    Deletes Without\nTombstones or TTLs\nEric Stevens, Principal Architect\nProtectWise, Inc.\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-2-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;About ProtectW...\" target=\"_blank\">\n        2.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nAbout ProtectWise\nAn enterprise security company that records, analyzes, and visualizes your network on demand to detect\ncomplex threats that others can’t see\nBig DataData Ingestion and Availability\n● Well north of a billion new records\nper day\n● Processed, analyzed, and stored\nin soft real time\n● Fully indexed and searchable with\np95 query response times &lt;1\nsecond\n○ Shortening the OODA loop\n● Hundreds of Cassandra servers\n● Hundreds of Billions of Records\n● Multiple Petabytes of Data\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-3-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;With one senso...\" target=\"_blank\">\n        3.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nWith one sensor, ProtectWise captured the\nfollowing data at Super Bowl 50:\n● 8.806 Terabytes of data seen. Primarily HTTP,\nSSL and traffic to Amazon AWS, Facebook,\nTwitter, and Instagram.\n● 1.550 Terabytes of data captured (82%\noptimization)\n● 17 million URLs hit\n● 8,085,949 DNS requests\nWith a single sensor deployed on the Levi's\nPublic Wi-Fi Network, ProtectWise captured\n8.806 Terabytes of Data and was able to optimize\nit by 82% to just 1.550 Terabytes of data, a true\ntestament to the scale and power of our platform.\nUse Case – Super Bowl 50\nThe Broncos weren’t the only team from Denver in Levi’s Stadium\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-4-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● How Deletes ...\" target=\"_blank\">\n        4.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\n● How Deletes (tombstones) in Cassandra Work Today\n● The Limitations of Tombstones\n● Misconceptions about Tombstones\n● How TTL (Time to Live) in Cassandra works today\n● The limitations of TTLs\n● Why neither strategy works for ProtectWise\n● Our unconventional solution\n● Advantages of our solution\n● Disadvantages of our solution\nOverview\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-5-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Increases bo...\" target=\"_blank\">\n        5.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\n● Increases both write and read I/O pressure\n● Not an effective means of reclaiming disk\ncapacity\n● May be difficult to locate correct records for\ndeletion\n● Makes reads more expensive\n● Actual tombstones can often greatly outlive\ntheir deleted data (much longer than\ngc_grace)\nTerrible\n● Surgically target data for removal\n● Easy to reason about from a read\nconsistency perspective\nTerrific\nThe Trouble with Tombstones\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-6-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;When do tombst...\" target=\"_blank\">\n        6.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nWhen do tombstones (and expired TTL’d\nrecords) go away?\n● Never before it’s gc_grace old (this is a good thing, and you get to control it)\n● During compaction, for a tombstone past gc_grace, its partition key is checked\nagainst the bloom filters of all other SSTables for the given CQL table.\n● If there is a bloom filter collision, the tombstone will remain, even if the bloom\nfilter collision was a false positive\n● If there is ANY data, even other tombstones for that partition in any SSTable,\nthe tombstone will not get cleaned up\n● If bloom filters indicate there is no chance of overlap on that partition key, the\ntombstone will get cleaned up\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-7-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Misconception ...\" target=\"_blank\">\n        7.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nMisconception about Tombstone Performance\n● The performance degradation from tombstones isn’t from the tombstone itself.\n● If you do\n○ for (n &lt;- 0 to 100000) {\nINSERT INTO table (partitionKey, clusterKey) VALUES ( 1, n )\n}\n● You can later create a range tombstone that is tiny bytes wise:\n○ DELETE FROM table WHERE partitionKey = 1 AND clusterKey &lt; 99999\n● But if you then\n○ SELECT * FROM table WHERE partitionKey = 1 LIMIT 1\n● Cassandra will have to read then discard rows with clusterKey values from 0\nto 99998 before the LIMIT 1 can be reached\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-8-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;PK1 CK1&#10;CK2&#10;1 ...\" target=\"_blank\">\n        8.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nPK1 CK1\nCK2\n1 2 ... o\n1 2 ... p\n... ...\nCKn 1 2 ... q\nPK1 DELETE 1 – n-1\nSSTable 1\nSSTable 2\n3\nSELECT * FROM table WHERE pk1 LIMIT 1\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-9-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;{&#10;{&#10;{&#10;{&#10;Compac...\" target=\"_blank\">\n        9.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\n{\n{\n{\n{\nCompaction Review\n↑ Writes\n← Older Data Newer Data →\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-10-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Tombstones in ...\" target=\"_blank\">\n        10.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nTombstones in Compaction\n↑ Delete\nSSTable\ncontaining\nrecord to\ndelete ↑\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-11-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Tombstones in ...\" target=\"_blank\">\n        11.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nTombstones in Compaction\n↑ Other Writes\nSSTable\ncontaining\nrecord to\ndelete ↑\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-12-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Tombstones in ...\" target=\"_blank\">\n        12.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nTombstones in Compaction\n↑ Other Writes\nSSTable\ncontaining\nrecord to\ndelete ↑\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-13-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Tombstones in ...\" target=\"_blank\">\n        13.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nTombstones in Compaction\n↑ Other Writes\nSSTable\ncontaining\nrecord to\ndelete ↑\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-14-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Tombstones in ...\" target=\"_blank\">\n        14.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nTombstones in Compaction\n↑ Other Writes\nFinally\nDeleted ↑\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-15-638.jpg?cb=1474041531\" title=\"Showing why tombstones are not the same thing as a delete.&#10;...\" target=\"_blank\">\n        15.\n      </a>\n    Showing why tombstones are not the same thing as a delete.\nTombstone Demo\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-16-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Setup&#10;cqlsh&gt; C...\" target=\"_blank\">\n        16.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nSetup\ncqlsh&gt; CREATE TABLE testing(\n… p blob,\n… c blob,\n… v blob,\n… PRIMARY KEY(p,c)\n… ) WITH gc_grace_seconds=0;\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-17-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Setup&#10;cqlsh&gt; I...\" target=\"_blank\">\n        17.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nSetup\ncqlsh&gt; INSERT INTO testing\n(p,c,v) VALUES (0xcafebabe,\n0xdeadbeef, 0xdeadc0de);\n$ nodetool flush &amp;&amp; ls *-Data.db\ntesting-testing-ka-1-Data.db\ntesting-testing-ka-2-Data.db\ncqlsh&gt; INSERT INTO testing\n(p,c,v) VALUES (0xcafebabe,\n0xdeadbeef, 0xfacefeed);\n$ nodetool flush &amp;&amp; ls *-Data.db\ntesting-testing-ka-1-Data.db\n0xcafebabe:0xdeadbeef:0xfacefeed1 0xcafebabe:0xdeadbeef:0xfacefeed1\n0xcafebabe:0xdeadbeef:0xdeadc0de2\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-18-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Setup&#10;cqlsh&gt; D...\" target=\"_blank\">\n        18.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nSetup\ncqlsh&gt; DELETE FROM testing WHERE\np=0xcafebabe AND c=0xdeadbeef;\n$ nodetool flush &amp;&amp; ls *-Data.db\ntesting-testing-ka-1-Data.db\ntesting-testing-ka-2-Data.db\ntesting-testing-ka-3-Data.db\ncqlsh&gt; select * from testing;\np | c | v\n------------+------------+------------\n0xcafebabe | 0xdeadbeef | 0xdeadc0de\n0xcafebabe:0xdeadbeef:0xfacefeed1\n0xcafebabe:0xdeadbeef:0xdeadc0de2\n0xcafebabe:0xdeadbeef:DELETE3\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-19-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Let’s look at ...\" target=\"_blank\">\n        19.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nLet’s look at the data\n$ hexdump testing-testing-ka-1-Data.db\n0000000 4b 00 00 00 c3 00 04 ca fe ba be 7f ff ff ff 80\n0000010 00 01 00 72 0a 00 04 de ad be ef 0e 00 71 05 34\n0000020 3b d8 4e df f1 0d 00 14 0b 19 00 29 01 76 1a 00\n0000030 70 04 fa ce fe ed 00 00 6f 9b 15 17\n0xcafebabe:0xdeadbeef:0xfacefeed1\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-20-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Let’s look at ...\" target=\"_blank\">\n        20.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nLet’s look at the data\n$ hexdump testing-testing-ka-2-Data.db\n0000000 4b 00 00 00 c3 00 04 ca fe ba be 7f ff ff ff 80\n0000010 00 01 00 72 0a 00 04 de ad be ef 0e 00 71 05 34\n0000020 3b e3 86 df 23 0d 00 14 0b 19 00 29 01 76 1a 00\n0000030 70 04 de ad c0 de 00 00 62 de 14 02\n0xcafebabe:0xdeadbeef:0xdeadc0de2\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-21-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Let’s look at ...\" target=\"_blank\">\n        21.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nLet’s look at the data\n$ hexdump testing-testing-ka-3-Data.db\n0000000 33 00 00 00 c3 00 04 ca fe ba be 7f ff ff ff 80\n0000010 00 01 00 94 07 00 04 de ad be ef ff 10 0a 00 f0\n0000020 00 01 57 4f 2d 69 00 05 34 3b e6 ab 47 c8 00 00\n0000030 db 77 12 69\n0xcafebabe:0xdeadbeef:DELETE3\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-22-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Time to Compac...\" target=\"_blank\">\n        22.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nTime to Compact\nSimulate compaction\nhappening on data that\nhas been deleted, but\nwhere the tombstone is\nnot involved in the\ncompaction\n% jmx_invoke -m\norg.apache.cassandra.db:type=CompactionMan\nager forceUserDefinedCompaction testing-\ntesting-ka-1-Data.db,testing-testing-ka-2-\nData.db\n$ ls *-Data.db\ntesting-testing-ka-3-Data.db\ntesting-testing-ka-4-Data.db\n0xcafebabe:0xdeadbeef:0xfacefeed1\n0xcafebabe:0xdeadbeef:0xdeadc0de2 0xcafebabe:0xdeadbeef:??????????4\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-23-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Let’s look aga...\" target=\"_blank\">\n        23.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nLet’s look again:\n$ hexdump testing-testing-ka-4-Data.db\n0000000 4b 00 00 00 c3 00 04 ca fe ba be 7f ff ff ff 80\n0000010 00 01 00 72 0a 00 04 de ad be ef 0e 00 71 05 34\n0000020 3b e3 86 df 23 0d 00 14 0b 19 00 29 01 76 1a 00\n0000030 70 04 de ad c0 de 00 00 62 de 14 02\n0xcafebabe:0xdeadbeef:0xdeadc0de4\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-24-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;What happened?...\" target=\"_blank\">\n        24.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nWhat happened?\n● The tombstone for primary key (0xcafebabe,0xdeadbeef) was written in\nSSTable 3\n● SSTable 3 wasn’t involved in the compaction\n● ∴The data at rest didn’t get cleaned up\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-25-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Why is this a ...\" target=\"_blank\">\n        25.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nWhy is this a problem\n● In all mainline compaction strategies:\n○ Data written close together chronologically tends to compact together relatively quickly\n○ Data written chronologically far apart tends to take a long time to compact together\n■ This is why it’s an anti-pattern to append or overwrite the same partition over long\nperiods of time, your reads to that partition will end up needing to read out of a large\nnumber of SSTables\n○ Because disk capacity is not recovered until the tombstone and its underlying data are\ninvolved in the same compaction, it can take a long time to recover disk capacity\n● Some compaction strategies (DateTiered, TimeWindowed) have controls that\nallow for data to permanently stop compacting.\n○ Under these conditions there become times where it’s impossible to ever recover disk capacity\nNote, See CASSANDRA-7019 for an upcoming alternative\nAlso “Improving Tombstone Compactions” today at 4:10 in 210C\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-26-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Once a TTL h...\" target=\"_blank\">\n        26.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\n● Once a TTL has been written, there is no\nway to change your mind except to write the\nrecord again with a new TTL\n● Rows written to more than one time may\nhave inconsistent TTLs leading to dirty or\nincomplete reads.\n● TTL’d records may remain at rest much\nlonger than you realize in some\ncircumstances\nTrouble\n● Fire and forget, your data will “go away”\nfairly predictably\nTerrific\nThe Trouble with TTLs\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-27-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Customers ge...\" target=\"_blank\">\n        27.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\n● Customers get to change their mind about how\nlong they want us to retain their data\n● Changing TTL’s is expensive, both in terms of\nI/O pressure, and temporarily doubling the size\nof your data at rest\n● Disks are cheap… lots of disks are not\n● Cassandra data at rest has an ongoing cost, if\na customer stops paying for it, we need to as\nwell\n● Timeliness of deletes is important\n● Sensitive data spillage means we need to\nremove some data quickly\nWhy Neither Strategy Works for Us\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-28-638.jpg?cb=1474041531\" title=\"Our Unconventional Solution&#10;\" target=\"_blank\">\n        28.\n      </a>\n    Our Unconventional Solution\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-29-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● If you have ...\" target=\"_blank\">\n        29.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\n● If you have hot swappable drives, this is a\nlot easier, if not, you might have some\ntemporary downtime due to RF change.\nStep 2: Disconnect Drive\n● There are some weird anti-entropy corner\ncases that are solved if you disable\nreplication\nStep 1: Set RF=1\nBasic Strategy\nSuccessfully used to delete significant amounts of data with little to no performance impact\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-30-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Step 3&#10;\" target=\"_blank\">\n        30.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nStep 3\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-31-638.jpg?cb=1474041531\" title=\"Deleting Compaction Strategy&#10;\" target=\"_blank\">\n        31.\n      </a>\n    Deleting Compaction Strategy\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-32-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Records are ...\" target=\"_blank\">\n        32.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\n● Records are removed from the next\ncompaction as soon as they should be\nevicted\n● If we need to recover capacity quickly we\ncan use user defined compaction to\nselectively target our oldest files\nEvicting Compaction Strategy\n● During compaction, use deterministic logic\nto determine which records should be\nremoved\n● Prevent records from surviving the\ncompaction process\n● Clean up indexes at the time the record is\nremoved\nDelete While Compacting\nBasic Strategy\nFor real this time.\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-33-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● If you choos...\" target=\"_blank\">\n        33.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\n● If you choose to, you can create a backup\nautomatically of the deleted records\n● Save yourself from deletion remorse\n● Incorrect deletion logic\n● Change of heart by you(r customer)\n● Move those records to cheaper storage\nBacking up your deletes\n● Acts as a parent strategy with your\npreferred child compaction strategy\n● Child strategy is responsible for sstable\nselection\n● You get the characteristics of your strategy,\nwith the deletes of our strategy\nWrapping Compaction Strategy\nFeatures\nDoes it support feature X of my preferred compaction strategy?\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-34-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Configurable...\" target=\"_blank\">\n        34.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\n● Configurable and extensible\n● Several provided implementations can\nbe reasonably surgically controlled by\nreading deletion rules out of a table\nyou specify\n● Extend one of several base classes to\nprovide more sophisticated custom\nlogic\n● Restoring backups\n● To restore accidentally deleted\nrecords, copy these files to the right\npath and do nodetool refresh\n● Or if your topology has changed you\ncan restore them with sstableloader\nFeatures\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-35-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;ALTER TABLE ba...\" target=\"_blank\">\n        35.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nALTER TABLE bar WITH compaction = {\n'class': 'DeletingCompactionStrategy',\n'dcs_underlying_compactor':\n'LeveledCompactionStrategy',\n'sstable_size_in_mb': 160\n};\nALTER TABLE foo WITH compaction = {\n'class': 'DeletingCompactionStrategy',\n'dcs_underlying_compactor':\n'SizeTieredCompactionStrategy',\n'min_threshold': '2',\n'max_threshold': '8'\n};\nA Wrapping Compaction Strategy\nDoesn’t change the fundamental characteristics\nof your preferred compaction strategy\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-36-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Compaction’s I...\" target=\"_blank\">\n        36.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nCompaction’s Inner Workings\nCredit: DataStax\nhttps://docs.datastax.com/en/cassandra/2.1/cassandra/dml/dml_write_path_c.html\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-37-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Compaction’s I...\" target=\"_blank\">\n        37.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nCompaction’s Inner Workings\nCredit: DataStax\nhttps://docs.datastax.com/en/cassandra/2.1/cassandra/dml/dml_write_path_c.html\n{\nCompaction Strategy\nselects SSTables\nReturns SSTableIterators\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-38-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Compaction’s I...\" target=\"_blank\">\n        38.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nCompaction’s Inner Workings\nCredit: DataStax\nhttps://docs.datastax.com/en/cassandra/2.1/cassandra/dml/dml_write_path_c.html\n}\nFilteringSSTableIterators\nexclude data which should be\ndeleted, and also notify\nIndexManager if appropriate to\nclean up associated indexes.\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-39-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;Rules:&#10;A =&gt; ✓&#10;...\" target=\"_blank\">\n        39.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nRules:\nA =&gt; ✓\nB =&gt; ✗\nC =&gt; ✓\nD =&gt; ✗\nE =&gt; ✓\n* if configured to backup convicted records\nAn Evicting Compaction Strategy\nRecords involved in compaction which are convicted do not\nsurvive into the newly compacted SSTable\nA\nB\nC\nA\nB\nD\nC\nD\nE\nA\nC\nE\nSSTable 1 SSTable 2 SSTable 3\nNew SSTable Backup SSTable*\nB\nD\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-40-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Compaction p...\" target=\"_blank\">\n        40.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\n● Compaction performance is often bounded\nby available write capacity\n● Fewer records surviving into the target table\nreduces write pressure during compaction\n● Testing of records for conviction is\nlightweight (depending on the complexity of\nyour business logic), and mostly CPU\nbound\nOften Faster than Existing Compaction\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-41-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Records past...\" target=\"_blank\">\n        41.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\n● Records past the deletion boundary may\nstill be visible to your application\n● You may get inconsistent reads for\nsuch records\n● Evicted records may resurrect temporarily\ndue to repair\n● They’ll end up in a new SSTable and\nwill evict again during the next auto\ncompaction\nBoundary Consistency\n● Like all other baked in deletion options, disk\ncapacity is reclaimed only eventually\n● Old SSTables still tend not to compact\nvery frequently\n● However by triggering user defined\ncompaction, you can reclaim space\nimmediately without resorting to major\ncompaction\nEventual Deletes\nLimitations\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-42-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Read repair ...\" target=\"_blank\">\n        42.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\n● Read repair and in general any repair may\ncause a record to fully resurrect temporarily\n● Resurrected record will appear in the\nyoungest SSTables\n● Will disappear again when those new\nSSTables next compact (generally relatively\nquickly for an active cluster)\nRepair = Resurrection\n● Logic for deletes needs to be deterministic\nor you’ll end up with consistency issues\n● Probably not a good idea to base any\ndeletion logic on anything outside of the\nprimary key except in narrow use cases\nRequires deletion determinism\nLimitations\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-43-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;● Supports and...\" target=\"_blank\">\n        43.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\n● Supports and tested against Cassandra 2.x\nseries\n● In 3.x the package and class names\nchanged, needs to be ported\n● Tests are written in Scala, they cover a lot\nof surface area but would need to be\nrewritten prior to contribution\n● Needs additional general purpose\nconvictors\n● Principally tested against STCS and\ndeserves better coverage for other child\nstrategies\nCurrent Project Status\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-44-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;https://github...\" target=\"_blank\">\n        44.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\nhttps://github.com/protectwise/cassandra-util\nAlso includes:\n● Our DataStax Driver Wrapper for Scala\n● Our CCM wrapper lib for automating unit tests in Scala\nGitHub\nAvailability &amp; Compatibility\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-45-638.jpg?cb=1474041531\" title=\"www.protectwise.com/careers.html&#10;Especially if you’re in De...\" target=\"_blank\">\n        45.\n      </a>\n    www.protectwise.com/careers.html\nEspecially if you’re in Denver!\nScala, Akka, Spark, Node, DevOps\nWe’re Hiring!\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-46-638.jpg?cb=1474041531\" title=\"©2016 ProtectWise, Inc. All rights reserved.&#10;\" target=\"_blank\">\n        46.\n      </a>\n    ©2016 ProtectWise, Inc. All rights reserved.\n \n  </li>\n  <li>\n      <a href=\"https://image.slidesharecdn.com/cassandrasummit2016-deleteswithouttombstonesorttls-160915170409/95/deletes-without-tombstones-or-ttls-eric-stevens-protectwise-cassandra-summit-2016-47-638.jpg?cb=1474041531\" title=\"Cold Storage that Isn’t Glacial&#10;Tomorrow 10:45 Room LL20D&#10;U...\" target=\"_blank\">\n        47.\n      </a>\n    Cold Storage that Isn’t Glacial\nTomorrow 10:45 Room LL20D\nUsing Approximate Data for Small,\nInsightful Analytics\nTomorrow 2:00 Room LL20A\nSee Our Other Talks\n \n  </li>\n              </ol></div></div></div><aside id=\"side-panel\" class=\"small-12 large-4 columns j-related-more-tab\"><dl class=\"tabs related-tabs small\" data-tab=\"\"><dd class=\"active\">\n      <a href=\"#related-tab-content\" data-ga-cat=\"bigfoot_slideview\" data-ga-action=\"relatedslideshows_tab\">\n        Recommended\n      </a>\n    </dd>\n</dl><div class=\"tabs-content\"><ul id=\"related-tab-content\" class=\"content active no-bullet notranslate\"><li class=\"lynda-item\">\n  <a data-ssid=\"66066829\" title=\"PowerPoint: Designing Better Slides\" href=\"https://www.linkedin.com/learning/powerpoint-designing-better-slides?trk=slideshare_sv_learning\" data-ga-cat=\"sv_loggedout\" data-ga-label=\"lil_rec_PowerPoint: Designing Better Slides\" data-ga-action=\"click\">\n    <div class=\"lynda-thumbnail\"><img class=\"j-thumbnail j-lazy-thumb\" alt=\"PowerPoint: Designing Better Slides\" src=\"https://www.linkedin.com/media-proxy/ext?w=1200&amp;h=675&amp;hash=Qzyjo5pakOdYhauvchS%2F2whtPj0%3D&amp;ora=1%2CaFBCTXdkRmpGL2lvQUFBPQ%2CxAVta5g-0R6plxVUzgUv5K_PrkC9q0RIUJDPBy-kUyWs-dWfZX_pf8TfZLSiol4feCwDkwc2feivRTXiEY69LcLmY4Yx3A\" /></div>\n    <div class=\"lynda-content\"><p>PowerPoint: Designing Better Slides</p><p>Online Course - LinkedIn Learning</p></div>\n  </a>\n</li>\n          <li class=\"lynda-item\">\n  <a data-ssid=\"66066829\" title=\"Learning Study Skills\" href=\"https://www.linkedin.com/learning/learning-study-skills?trk=slideshare_sv_learning\" data-ga-cat=\"sv_loggedout\" data-ga-label=\"lil_rec_Learning Study Skills\" data-ga-action=\"click\">\n    <div class=\"lynda-thumbnail\"><img class=\"j-thumbnail j-lazy-thumb\" alt=\"Learning Study Skills\" src=\"https://www.linkedin.com/media-proxy/ext?w=1200&amp;h=675&amp;hash=AkCmIodsxaZhRytp%2F97%2FxxQM0Q8%3D&amp;ora=1%2CaFBCTXdkRmpGL2lvQUFBPQ%2CxAVta5g-0R6plxVUzgUv5K_PrkC9q0RIUJDPBy-iXCej-NWfY3DrcMXfZLSiolwQfy0HkQQxfe6rRTbmFI69LcLmY4Yx3A\" /></div>\n    <div class=\"lynda-content\"><p>Learning Study Skills</p><p>Online Course - LinkedIn Learning</p></div>\n  </a>\n</li>\n          <li class=\"lynda-item\">\n  <a data-ssid=\"66066829\" title=\"Teacher Tips\" href=\"https://www.linkedin.com/learning/teacher-tips?trk=slideshare_sv_learning\" data-ga-cat=\"sv_loggedout\" data-ga-label=\"lil_rec_Teacher Tips\" data-ga-action=\"click\">\n    <div class=\"lynda-thumbnail\"><img class=\"j-thumbnail j-lazy-thumb\" alt=\"Teacher Tips\" src=\"https://www.linkedin.com/media-proxy/ext?w=1200&amp;h=675&amp;hash=mN807ffzPmE7p%2FNpTyJseUnrM8Q%3D&amp;ora=1%2CaFBCTXdkRmpGL2lvQUFBPQ%2CxAVta5g-0R6plxVUzgUv5K_PrkC9q0RIUJDPBy-gXySu_NCfYXPofcHaZLSiol8eeiUIlwE0feuvQjDoEo69LcLmY4Yx3A\" /></div>\n    <div class=\"lynda-content\"><p>Teacher Tips</p><p>Online Course - LinkedIn Learning</p></div>\n  </a>\n</li>\n        <li class=\"j-related-item\">\n  <a data-ssid=\"66646862\" data-algo-id=\"21\" data-source-name=\"BROWSEMAP\" data-source-model=\"21\" data-urn-type=\"Slideshow\" data-score=\"1\" class=\"j-related-impression slideview_related_item j-recommendation-tracking\" title=\"Light Weight Transactions Under Stress  (Christopher Batey, The Last Pickle) | Cassandra Summit 2016\" href=\"https://www.slideshare.net/DataStax/light-weight-transactions-under-stress-christopher-batey-the-last-pickle-cassandra-summit-2016\">\n    \n    <div class=\"related-content\"><p>Light Weight Transactions Under Stress  (Christopher Batey, The Last Pickle) ...</p><p>DataStax</p></div>\n  </a>\n</li>\n        <li class=\"j-related-item\">\n  <a data-ssid=\"66238420\" data-algo-id=\"21\" data-source-name=\"BROWSEMAP\" data-source-model=\"21\" data-urn-type=\"Slideshow\" data-score=\"1\" class=\"j-related-impression slideview_related_item j-recommendation-tracking\" title=\"C* Capacity Forecasting (Ajay Upadhyay, Jyoti Shandil, Arun Agrawal, Netflix) | Cassandra Summit 2016\" href=\"https://www.slideshare.net/DataStax/c-capacity-planning-and-upgrade-at-scale-ajay-upadhyay-jyoti-shandil-arun-agrawal-netflix-cassandra-summit-2016\">\n    \n    <div class=\"related-content\"><p>C* Capacity Forecasting (Ajay Upadhyay, Jyoti Shandil, Arun Agrawal, Netflix)...</p><p>DataStax</p></div>\n  </a>\n</li>\n        <li class=\"j-related-item\">\n  <a data-ssid=\"15540478\" data-algo-id=\"21\" data-source-name=\"BROWSEMAP\" data-source-model=\"21\" data-urn-type=\"Slideshow\" data-score=\"1\" class=\"j-related-impression slideview_related_item j-recommendation-tracking\" title=\"Optimizing Cassandra in AWS\" href=\"https://www.slideshare.net/greggulrich/re-invent-2012-cassandra-final3\">\n    \n    <div class=\"related-content\"><p>Optimizing Cassandra in AWS</p><p>greggulrich</p></div>\n  </a>\n</li>\n        <li class=\"j-related-item\">\n  <a data-ssid=\"66190842\" data-algo-id=\"21\" data-source-name=\"BROWSEMAP\" data-source-model=\"21\" data-urn-type=\"Slideshow\" data-score=\"1\" class=\"j-related-impression slideview_related_item j-recommendation-tracking\" title=\"Advanced Cassandra Operations via JMX (Nate McCall, The Last Pickle) | C* Summit 2016\" href=\"https://www.slideshare.net/DataStax/advanced-cassandra-operations-via-jmx-nate-mccall-the-last-pickle-c-summit-2016\">\n    \n    <div class=\"related-content\"><p>Advanced Cassandra Operations via JMX (Nate McCall, The Last Pickle) | C* Sum...</p><p>DataStax</p></div>\n  </a>\n</li>\n        <li class=\"j-related-item\">\n  <a data-ssid=\"66190675\" data-algo-id=\"21\" data-source-name=\"BROWSEMAP\" data-source-model=\"21\" data-urn-type=\"Slideshow\" data-score=\"1\" class=\"j-related-impression slideview_related_item j-recommendation-tracking\" title=\"KillrVideo: Data Modeling Evolved (Patrick McFadin, Datastax) | Cassandra Summit 2016\" href=\"https://www.slideshare.net/DataStax/killrvideo-data-modeling-evolved-patrick-mcfadin-datastax-cassandra-summit-2016\">\n    \n    <div class=\"related-content\"><p>KillrVideo: Data Modeling Evolved (Patrick McFadin, Datastax) | Cassandra Sum...</p><p>DataStax</p></div>\n  </a>\n</li>\n        <li class=\"j-related-item\">\n  <a data-ssid=\"66111486\" data-algo-id=\"21\" data-source-name=\"BROWSEMAP\" data-source-model=\"21\" data-urn-type=\"Slideshow\" data-score=\"1\" class=\"j-related-impression slideview_related_item j-recommendation-tracking\" title=\"A look at the CQL changes in 3.x (Benjamin Lerer, Datastax) | Cassandra Summit 2016\" href=\"https://www.slideshare.net/DataStax/a-look-at-the-cql-changes-in-3x-benjamin-lerer-datastax-cassandra-summit-2016\">\n    \n    <div class=\"related-content\"><p>A look at the CQL changes in 3.x (Benjamin Lerer, Datastax) | Cassandra Summi...</p><p>DataStax</p></div>\n  </a>\n</li>\n        <li class=\"j-related-item\">\n  <a data-ssid=\"66112228\" data-algo-id=\"21\" data-source-name=\"BROWSEMAP\" data-source-model=\"21\" data-urn-type=\"Slideshow\" data-score=\"1\" class=\"j-related-impression slideview_related_item j-recommendation-tracking\" title=\"Cassandra Tuning - Above and Beyond (Matija Gobec, SmartCat) | Cassandra Summit 2016\" href=\"https://www.slideshare.net/DataStax/cassandra-tuning-above-and-beyond-matija-gobec-smartcat-cassandra-summit-2016\">\n    \n    <div class=\"related-content\"><p>Cassandra Tuning - Above and Beyond (Matija Gobec, SmartCat) | Cassandra Summ...</p><p>DataStax</p></div>\n  </a>\n</li>\n    </ul></div>\n    </aside></div></div><footer>\n          <div class=\"row\"><div class=\"columns\"><ul class=\"main-links text-center\"><li><a href=\"https://www.slideshare.net/about\">About</a></li>\n                \n                <li><a href=\"http://blog.slideshare.net/\">Blog</a></li>\n                <li><a href=\"https://www.slideshare.net/terms\">Terms</a></li>\n                <li><a href=\"https://www.slideshare.net/privacy\">Privacy</a></li>\n                <li><a href=\"http://www.linkedin.com/legal/copyright-policy\">Copyright</a></li>\n                \n              </ul></div></div>\n          \n          <div class=\"row\"><div class=\"columns\"><p class=\"copyright text-center\">LinkedIn Corporation © 2018</p></div></div>\n        </footer></div>\n    \n    <div class=\"modal_popup_container\"><div id=\"top-clipboards-modal\" class=\"reveal-modal xlarge top-clipboards-modal\" data-reveal=\"\" aria-labelledby=\"modal-title\" aria-hidden=\"true\" role=\"dialog\"><h4 class=\"modal-title\">Public clipboards featuring this slide</h4><hr /><p>No public clipboards found for this slide</p></div><div id=\"select-clipboard-modal\" class=\"reveal-modal medium\" data-reveal=\"\" aria-labelledby=\"modal-title\" aria-hidden=\"true\" role=\"dialog\" translate=\"no\"><p></p><h4 class=\"modal-title\">Select another clipboard</h4>\n    <hr /><a class=\"close-reveal-modal button-lrg\" href=\"#\" aria-label=\"Close\">×</a><div class=\"modal-content\"><div class=\"default-clipboard-panel radius\"><p>Looks like you’ve clipped this slide to <strong class=\"default-clipboard-title\"> already.</strong></p></div><div class=\"clipboard-list-container\"><div class=\"clipboard-create-new\"><p>Create a clipboard</p></div></div></div></div><div id=\"clipboard-create-modal\" class=\"reveal-modal medium\" data-reveal=\"\" aria-labelledby=\"modal-title\" aria-hidden=\"true\" role=\"dialog\" translate=\"no\"><p></p><h3>You just clipped your first slide!</h3>\n      \n        Clipping is a handy way to collect important slides you want to go back to later. Now customize the name of a clipboard to store your clips.<h4 class=\"modal-title\" id=\"modal-title\">\n    \n    <label>Description\n          \n        </label></h4></div>\n    <div class=\"row\"><label>Visibility\n        <small id=\"privacy-switch-description\">Others can see my Clipboard</small>\n          </label><label for=\"privacy-switch\">\n      </label></div>\n        \n    </div>\n    \n    \n    \n  \n    \n    \n  \n  \n  <noscript>\n    </noscript>"}}]}},"pageContext":{"alternative_id":9338}}