{"data":{"allAnantCassandralinks":{"edges":[{"node":{"title":"thelastpickle/cassandra-reaper","alternative_id":1662,"content":"<h3>\n      <svg aria-hidden=\"true\" class=\"octicon octicon-book\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/>\n      README.md\n    </h3><article class=\"markdown-body entry-content\" itemprop=\"text\"><p><a href=\"https://gitter.im/thelastpickle/cassandra-reaper?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge\"><img src=\"https://camo.githubusercontent.com/5e262c01099ba64ecf896f34217288393c84e72f/68747470733a2f2f6261646765732e6769747465722e696d2f7468656c6173747069636b6c652f63617373616e6472612d7265617065722e737667\" alt=\"Join the chat at https://gitter.im/thelastpickle/cassandra-reaper\" data-canonical-src=\"https://badges.gitter.im/thelastpickle/cassandra-reaper.svg\"/></a></p>\n<p><a href=\"https://travis-ci.org/thelastpickle/cassandra-reaper\"><img src=\"https://camo.githubusercontent.com/2f1afe9a49ba161b69c481251fd180600f187692/68747470733a2f2f7472617669732d63692e6f72672f7468656c6173747069636b6c652f63617373616e6472612d7265617065722e7376673f6272616e63683d6d6173746572\" alt=\"Build Status\" data-canonical-src=\"https://travis-ci.org/thelastpickle/cassandra-reaper.svg?branch=master\"/></a></p>\n<p><em>Note: This repo is a fork from the original Reaper project, created by the awesome folks at Spotify.  The WebUI has been merged in with support for incremental repairs added.</em></p>\n<p>Reaper is a centralized, stateful, and highly configurable tool for running Apache Cassandra\nrepairs against single or multi-site clusters.</p>\n<p>The current version supports running Apache Cassandra cluster repairs in a segmented manner,\nopportunistically running multiple parallel repairs at the same time on different nodes\nwithin the cluster. Basic repair scheduling functionality is also supported.</p>\n<p>Reaper comes with a GUI, which if you're running in local mode can be at <a href=\"http://localhost:8080/webui/\">http://localhost:8080/webui/</a></p>\n<p>Please see the <a href=\"https://github.com/thelastpickle/cassandra-reaper/issues\">Issues</a> section for more\ninformation on planned development, and known issues.</p>\n<h2><a id=\"user-content-system-overview\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#system-overview\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>System Overview</h2>\n<p>Reaper consists of a database containing the full state of the system, a REST-full API,\nand a CLI tool called <em>spreaper</em> that provides an alternative way to issue commands to a running\nReaper instance. Communication with Cassandra nodes in registered clusters is handled through JMX.</p>\n<p>Reaper system does not use internal caches for state changes regarding running repairs and\nregistered clusters, which means that any changes done to the storage will reflect to the running\nsystem dynamically.</p>\n<p>You can also run the Reaper with memory storage, which is not persistent, and is meant to\nbe used only for testing purposes.</p>\n<p>This project is built on top of Dropwizard:\n<a href=\"http://dropwizard.io/\">http://dropwizard.io/</a></p>\n<h2><a id=\"user-content-usage\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#usage\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Usage</h2>\n<p>To run Cassandra Reaper you need to simply build a project package using Maven, and\nthen execute the created Java jar file, and give a path to the system configuration file\nas the first and only argument. You can also use the provided <code>bin/cassandra-reaper</code> script\nto run the service.</p>\n<p>When using database based storage, you must setup a PostgreSQL database yourself and configure\nReaper to use it, or use an embedded H2 database (set the appropriate configuration in the yaml file).\nThe schema will get initialized/upgraded upon startup by FlyWay.</p>\n<p>When using cassandra based storage, you must setup an Apache Cassandra database yourself and configure\nReaper to use it. You need to create a keyspace and configure reaper to use it in the yaml file. The schema will be created by Reaper on the first run.</p>\n<p>Reaper uses the dropwizard-cassandra bundle and full configuration reference is available here : <a href=\"https://github.com/composable-systems/dropwizard-cassandra\">https://github.com/composable-systems/dropwizard-cassandra</a></p>\n<p>Find more information on how to use each storage backend in the <strong>Configuration</strong> section below.</p>\n<p>For configuring the service, see the available configuration options in later section\nof this readme document.</p>\n<p>You can call the service directly through the REST API using a tool like <em>curl</em>. You can also\nuse the provided CLI tool in <em>bin/spreaper</em> to call the service.</p>\n<p>Run the tool with <em>-h</em> or <em>--help</em> option to see usage instructions.</p>\n<h3><a id=\"user-content-debian-and-rpm-packages\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#debian-and-rpm-packages\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Debian and RPM Packages</h3>\n<h4><a id=\"user-content-make\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#make\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Make</h4>\n<p>Debian and RPM packages can be built from this project using Make, for example:</p>\n<div class=\"highlight highlight-source-shell\"><pre>make all</pre></div>\n<h4><a id=\"user-content-docker\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#docker\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Docker</h4>\n<p>A <a href=\"https://docs.docker.com/engine/installation/\">Docker</a> build environment is\nalso provided to build the entire project and can be run by using\n<a href=\"https://docs.docker.com/compose/install/\">Docker Compose</a>:</p>\n<div class=\"highlight highlight-source-shell\"><pre>docker-compose -f docker-build/docker-compose.yml build \\\n    &amp;&amp; docker-compose -f docker-build/docker-compose.yml run build</pre></div>\n<p>The final packages will be located within:</p>\n<p><code>./packages/</code></p>\n<h4><a id=\"user-content-install-rpm-or-deb-package-and-run-as-a-service\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#install-rpm-or-deb-package-and-run-as-a-service\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Install RPM or DEB package and run as a service</h4>\n<p>Install the RPM (Fedora based distros like RHEL or Centos) using : <code>sudo rpm -ivh reaper-*.*.*.x86_64.rpm</code><br/>Install the DEB (Debian based distros like Ubuntu) using : <code>sudo dpkg -i reaper_*.*.*_amd64.deb</code></p>\n<p>The yaml file used by the service is located at <code>/etc/cassandra-reaper/cassandra-reaper.yaml</code> and alternate config templates can be found under <code>/etc/cassandra-reaper/configs</code>.\nIt is recommended to create a new file with your specific configuration and symlink it as <code>/etc/cassandra-reaper/cassandra-reaper.yaml</code> to avoid your configuration from being overwritten during upgrades.<br/>Adapt the config file to suit your setup and then run <code>sudo service cassandra-reaper start</code>.</p>\n<p>Log files can be found at <code>/var/log/cassandra-reaper.log</code> and <code>/var/log/cassandra-reaper.err</code>.</p>\n<p>Stop the service by running : <code>sudo service cassandra-reaper stop</code></p>\n<h2><a id=\"user-content-configuration\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#configuration\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Configuration</h2>\n<p>An example testing configuration YAML file can be found from within this project repository:\n<code>src/test/resources/cassandra-reaper.yaml</code></p>\n<p>The configuration file structure is provided by Dropwizard, and help on configuring the server,\ndatabase connection, or logging, can be found at:</p>\n<p><a href=\"http://www.dropwizard.io/1.1.0/docs/manual/configuration.html\">http://www.dropwizard.io/1.1.0/docs/manual/configuration.html</a></p>\n<p><strong>Storage Backend</strong></p>\n<p>Cassandra Reaper can be used with either an ephemeral memory storage or persistent database. Running Reaper with memory storage, which is not persistent, means that all\nthe registered clusters, column families, and repair runs will be lost upon service restart.\nThe memory based storage is meant to be used for testing purposes only. Enable this type of storage by using the <code>storageType: memory</code> setting in your config file (enabled by default).</p>\n<p>For persistent relational database storage, you must either setup PostgreSQL or H2. You also need to set <code>storageType: database</code> in the config file.</p>\n<ul><li>PostgreSQL - The schema will be initialized/upgraded automatically upon startup in the configured database.\nMake sure to specify the correct credentials in your JDBC settings in <code>cassandra-reaper.yaml</code> to allow objects creation.</li>\n<li>H2 - the database will automatically created for you under the path configured in <code>cassandra-reaper.yaml</code>. Please\ncomment/uncomment the H2 settings and modify the path as needed or use the <code>cassandra-reaper-h2.yaml</code> as a base.</li>\n</ul><p>For persistent Apache Cassandra storage, you need to set <code>storageType: cassandra</code> in the config file.\nYou'll also need to fill in the connection details to your Apache Cassandra cluster used to store the Reaper schema (reaper_db by default), in the <code>cassandra:</code> section of the yaml file.</p>\n<p>A sample yaml file is available in the <code>resource</code> directory for each storage backend :</p>\n<ul><li>cassandra-reaper-memory.yaml</li>\n<li>cassandra-reaper-postgres.yaml</li>\n<li>cassandra-reaper-h2.yaml</li>\n<li>cassandra-reaper-cassandra.yaml</li>\n</ul><p>For configuring other aspects of the service, see the available configuration options in later section\nof this readme document.</p>\n<p><strong>Reaper Settings</strong></p>\n<p>The Reaper service specific configuration values are:</p>\n<ul><li>\n<p>segmentCount:</p>\n<p>Defines the default amount of repair segments to create for newly registered Cassandra\nrepair runs (token rings). When running a repair run by the Reaper, each segment is\nrepaired separately by the Reaper process, until all the segments in a token ring\nare repaired. The count might be slightly off the defined value, as clusters residing\nin multiple data centers require additional small token ranges in addition to the expected.\nYou can overwrite this value per repair run, when calling the Reaper.</p>\n</li>\n<li>\n<p>repairParallelism:</p>\n<p>Defines the default type of parallelism to use for repairs.\nRepair parallelism value must be one of: \"sequential\", \"parallel\", or \"datacenter_aware\".\nIf you try to use \"datacenter_aware\" in clusters that don't support it yet (older than 2.0.12),\nReaper will fall back into using \"sequential\" for those clusters.</p>\n</li>\n<li>\n<p>repairIntensity:</p>\n<p>Repair intensity is a value between 0.0 and 1.0, but not zero. Repair intensity defines\nthe amount of time to sleep between triggering each repair segment while running a repair run.\nWhen intensity is one, it means that Reaper doesn't sleep at all before triggering next segment,\nand otherwise the sleep time is defined by how much time it took to repair the last segment\ndivided by the intensity value. 0.5 means half of the time is spent sleeping, and half running.\nIntensity 0.75 means that 25% of the total time is used sleeping and 75% running.\nThis value can also be overwritten per repair run when invoking repairs.</p>\n</li>\n<li>\n<p>incrementalRepair:</p>\n<p>Incremental repair is a boolean value (true | false).\nNote that this is only supported with the PARALLEL repairParallelism setting.\nFor more details in incremental repair, please refer to the following article\n<a href=\"http://www.datastax.com/dev/blog/more-efficient-repairs\">http://www.datastax.com/dev/blog/more-efficient-repairs</a></p>\n</li>\n<li>\n<p>repairRunThreadCount:</p>\n<p>The amount of threads to use for handling the Reaper tasks. Have this big enough not to cause\nblocking in cause some thread is waiting for I/O, like calling a Cassandra cluster through JMX.</p>\n</li>\n<li>\n<p>hangingRepairTimeoutMins:</p>\n<p>The amount of time in minutes to wait for a single repair to finish. If this timeout is reached,\nthe repair segment in question will be cancelled, if possible, and then scheduled for later\nrepair again within the same repair run process.</p>\n</li>\n<li>\n<p>scheduleDaysBetween:</p>\n<p>Defines the amount of days to wait between scheduling new repairs.\nThe value configured here is the default for new repair schedules, but you can also\ndefine it separately for each new schedule. Using value 0 for continuous repairs\nis also supported.</p>\n</li>\n<li>\n<p>storageType:</p>\n<p>Whether to use database or memory based storage for storing the system state.\nValue can be either \"memory\", \"database\" or \"cassandra\".\nIf you are using the recommended (persistent) storage type \"database\" or \"cassandra\", you need to define\nthe database client parameters in a database/cassandra section in the configuration file. See the example\nsettings in provided testing configuration in <em>src/test/resources/cassandra-reaper.yaml</em>.</p>\n</li>\n<li>\n<p>jmxPorts:</p>\n<p>Optional mapping of custom JMX ports to use for individual hosts. The used default JMX port\nvalue is 7199. <a href=\"https://github.com/pcmanus/ccm\">CCM</a> users will find IP and port number\nto add in <code>~/.ccm/&lt;cluster&gt;/*/node.conf</code> or by running <code>ccm &lt;node&gt; show</code>.</p>\n</li>\n<li>\n<p>jmxAuth:</p>\n<p>Optional setting for giving username and password credentials for the used JMX connections\nin case you are using password based JMX authentication with your Cassandra clusters.</p>\n<pre>jmxAuth:\n  username: cassandra\n  password: cassandra\n</pre>\n</li>\n<li>\n<p>enableCrossOrigin:</p>\n<p>Optional setting which you can set to be \"true\", if you wish to enable the CORS headers\nfor running an external GUI application, like <a href=\"https://github.com/spodkowinski/cassandra-reaper-ui\">this project</a>.</p>\n</li>\n<li>\n<p>autoScheduling:</p>\n<p>Optional setting to automatically setup repair schedules for all non-system keyspaces in a cluster.\nIf enabled, adding a new cluster will automatically setup a schedule repair\nfor each keyspace. Cluster keyspaces are monitored based on a configurable frequency,\nso that adding or removing a keyspace will result in adding / removing the corresponding scheduled repairs.</p>\n</li>\n<li>\n<p>cassandra:</p>\n<p>Optional setting to provide cassandra store when <code>storageType: cassandra</code>\nThe sample here shows setup using plain authentication with ssl.</p>\n<pre>cassandra:\n  clusterName: \"test\"\n  contactPoints: [\"127.0.0.1\"]\n  keyspace: reaper_db\n  authProvider:\n    type: plainText\n    username: cassandra\n    password: cassandra\n  ssl:\n    type: jdk\n</pre>\n<p>Refer to resource/cassandra-reaper-cassandra-ssl.yaml for cassandra with Auth</p>\n</li>\n</ul><p>Notice that in the <em>server</em> section of the configuration, if you want to bind the service\nto all interfaces, use value \"0.0.0.0\", or just leave the <em>bindHost</em> line away completely.\nUsing \"*\" as bind value won't work.</p>\n<h2><a id=\"user-content-clusters-with-closed-cross-dc-jmx-ports\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#clusters-with-closed-cross-dc-jmx-ports\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Clusters with closed cross DC JMX ports</h2>\n<p>For security reasons, it is possible that Reaper will be able to access only a single DC nodes through JMX.\nThe <em>allowUnreachableNodes</em> parameter in cassandra-reaper.yaml must then be set to true in order for Reaper to control the repair process through the reachable nodes only.\nLimitations of this setup are:</p>\n<ul><li>All keyspaces must be replicated on the reachable DC using NetworkTopologyStrategy</li>\n<li>Reaper won't be able to check the unreachable DC nodes for pending compactions or running repairs, which disables repair overload prevention</li>\n</ul><p>Leaving <em>allowUnreachableNodes</em> to false will prevent all repair sessions once a single node from the cluster is unreachable.</p>\n<h2><a id=\"user-content-rest-api\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#rest-api\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>REST API</h2>\n<p>Source code for all the REST resources can be found from package com.spotify.reaper.resources.</p>\n<h2><a id=\"user-content-ping-resource\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#ping-resource\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Ping Resource</h2>\n<ul><li>GET     /ping\n<ul><li>Expected query parameters: <em>None</em></li>\n<li>Simple ping resource that can be used to check whether the reaper is running.</li>\n</ul></li>\n</ul><h2><a id=\"user-content-cluster-resource\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#cluster-resource\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Cluster Resource</h2>\n<ul><li>\n<p>GET     /cluster</p>\n<ul><li>Expected query parameters:\n<ul><li><em>seedHost</em>: Limit the returned cluster list based on the given seed host. (Optional)</li>\n</ul></li>\n<li>Returns a list of registered cluster names in the service.</li>\n</ul></li>\n<li>\n<p>GET     /cluster/{cluster_name}</p>\n<ul><li>Expected query parameters:\n<ul><li><em>limit</em>: Limit the number of repair runs returned. Recent runs are prioritized. (Optional)</li>\n</ul></li>\n<li>Returns a cluster object identified by the given \"cluster_name\" path parameter.</li>\n</ul></li>\n<li>\n<p>POST    /cluster</p>\n<ul><li>Expected query parameters:\n<ul><li><em>seedHost</em>: Host name or IP address of the added Cassandra\nclusters seed host.</li>\n</ul></li>\n<li>Adds a new cluster to the service, and returns the newly added cluster object,\nif the operation was successful.</li>\n</ul></li>\n<li>\n<p>PUT     /cluster/{cluster_name}</p>\n<ul><li>Expected query parameters:\n<ul><li><em>seedHost</em>: New host name or IP address used as Cassandra cluster seed.</li>\n</ul></li>\n<li>Modifies a cluster's seed host. Comes in handy when the previous seed has left the cluster.</li>\n</ul></li>\n<li>\n<p>DELETE  /cluster/{cluster_name}</p>\n<ul><li>Expected query parameters: <em>None</em></li>\n<li>Delete a cluster object identified by the given \"cluster_name\" path parameter.\nCluster will get deleted only if there are no schedules or repair runs for the cluster,\nor the request will fail. Delete repair runs and schedules first before calling this.</li>\n</ul></li>\n</ul><h2><a id=\"user-content-repair-run-resource\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#repair-run-resource\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Repair Run Resource</h2>\n<ul><li>\n<p>GET     /repair_run</p>\n<ul><li>Optional query parameters:\n<ul><li><em>state</em>: Comma separated list of repair run state names. Only names found in\ncom.spotify.reaper.core.RunState are accepted.</li>\n</ul></li>\n<li>Returns a list of repair runs, optionally fetching only the ones with <em>state</em> state.</li>\n</ul></li>\n<li>\n<p>GET     /repair_run/{id}</p>\n<ul><li>Expected query parameters: <em>None</em></li>\n<li>Returns a repair run object identified by the given \"id\" path parameter.</li>\n</ul></li>\n<li>\n<p>GET     /repair_run/cluster/{cluster_name} (com.spotify.reaper.resources.RepairRunResource)</p>\n<ul><li>Expected query parameters: <em>None</em></li>\n<li>Returns a list of all repair run statuses found for the given \"cluster_name\" path parameter.</li>\n</ul></li>\n<li>\n<p>POST    /repair_run</p>\n<ul><li>Expected query parameters:\n<ul><li><em>clusterName</em>: Name of the Cassandra cluster.</li>\n<li><em>keyspace</em>: The name of the table keyspace.</li>\n<li><em>tables</em>: The name of the targeted tables (column families) as comma separated list.\nIf no tables given, then the whole keyspace is targeted. (Optional)</li>\n<li><em>owner</em>: Owner name for the run. This could be any string identifying the owner.</li>\n<li><em>cause</em>: Identifies the process, or cause the repair was started. (Optional)</li>\n<li><em>segmentCount</em>: Defines the amount of segments to create for repair run. (Optional)</li>\n<li><em>repairParallelism</em>: Defines the used repair parallelism for repair run. (Optional)</li>\n<li><em>intensity</em>: Defines the repair intensity for repair run. (Optional)</li>\n<li><em>incrementalRepair</em>: Defines if incremental repair should be done. [true/false] (Optional)</li>\n</ul></li>\n</ul></li>\n<li>\n<p>PUT    /repair_run/{id}</p>\n<ul><li>Expected query parameters:\n<ul><li><em>state</em>: New value for the state of the repair run.\nPossible values for given state are: \"PAUSED\" or \"RUNNING\".</li>\n</ul></li>\n<li>Starts, pauses, or resumes a repair run identified by the \"id\" path parameter.</li>\n<li>Can also be used to reattempt a repair run in state \"ERROR\", picking up where it left off.</li>\n</ul></li>\n<li>\n<p>DELETE  /repair_run/{id}</p>\n<ul><li>Expected query parameters:\n<ul><li><em>owner</em>: Owner name for the run. If the given owner does not match the stored owner,\nthe delete request will fail.</li>\n</ul></li>\n<li>Delete a repair run object identified by the given \"id\" path parameter.\nRepair run and all the related repair segments will be deleted from the database.</li>\n</ul></li>\n</ul><h2><a id=\"user-content-repair-schedule-resource\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#repair-schedule-resource\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Repair Schedule Resource</h2>\n<ul><li>\n<p>GET     /repair_schedule</p>\n<ul><li>Expected query parameters:\n<ul><li><em>clusterName</em>: Filter the returned schedule list based on the given\ncluster name. (Optional)</li>\n<li><em>keyspaceName</em>: Filter the returned schedule list based on the given\nkeyspace name. (Optional)</li>\n</ul></li>\n<li>Returns all repair schedules present in the Reaper</li>\n</ul></li>\n<li>\n<p>GET     /repair_schedule/{id}</p>\n<ul><li>Expected query parameters: <em>None</em></li>\n<li>Returns a repair schedule object identified by the given \"id\" path parameter.</li>\n</ul></li>\n<li>\n<p>POST    /repair_schedule</p>\n<ul><li>Expected query parameters:\n<ul><li><em>clusterName</em>: Name of the Cassandra cluster.</li>\n<li><em>keyspace</em>: The name of the table keyspace.</li>\n<li><em>tables</em>: The name of the targeted tables (column families) as comma separated list.\nIf no tables given, then the whole keyspace is targeted. (Optional)</li>\n<li><em>owner</em>: Owner name for the schedule. This could be any string identifying the owner.</li>\n<li><em>segmentCount</em>: Defines the amount of segments to create for scheduled repair runs. (Optional)</li>\n<li><em>repairParallelism</em>: Defines the used repair parallelism for scheduled repair runs. (Optional)</li>\n<li><em>intensity</em>: Defines the repair intensity for scheduled repair runs. (Optional)</li>\n<li><em>incrementalRepair</em>: Defines if incremental repair should be done. [true/false] (Optional)</li>\n<li><em>scheduleDaysBetween</em>: Defines the amount of days to wait between scheduling new repairs.\nFor example, use value 7 for weekly schedule, and 0 for continuous.</li>\n<li><em>scheduleTriggerTime</em>: Defines the time for first scheduled trigger for the run.\nIf you don't give this value, it will be next mid-night (UTC).\nGive date values in ISO format, e.g. \"2015-02-11T01:00:00\". (Optional)</li>\n</ul></li>\n</ul></li>\n<li>\n<p>DELETE  /repair_schedule/{id}</p>\n<ul><li>Expected query parameters:\n<ul><li><em>owner</em>: Owner name for the schedule. If the given owner does not match the stored owner,\nthe delete request will fail.</li>\n</ul></li>\n<li>Delete a repair schedule object identified by the given \"id\" path parameter.\nRepair schedule will get deleted only if there are no associated repair runs for the schedule.\nDelete all the related repair runs before calling this endpoint.</li>\n</ul></li>\n</ul><h2><a id=\"user-content-building-and-running-reaper\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#building-and-running-reaper\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Building and Running Reaper</h2>\n<p>To build Reaper without rebuilding the UI, run the following command :</p>\n<p><code>mvn clean package</code></p>\n<p>To only regenerate the UI (requires npm and bower) :</p>\n<p><code>mvn generate-sources -Pbuild-ui</code></p>\n<p>To rebuild both the UI and Reaper :</p>\n<p><code>mvn clean package -Pbuild-ui</code></p>\n<p>To build the docker image :</p>\n<p><code>mvn clean package docker:build</code></p>\n<h3><a id=\"user-content-running-reaper\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#running-reaper\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Running Reaper</h3>\n<p>After modifying the <code>resource/cassandra-reaper.yaml</code> config file, Reaper can be started using the following command line :</p>\n<p><code>java -jar target/cassandra-reaper-X.X.X.jar server resource/cassandra-reaper.yaml</code></p>\n<p>Once started, the UI can be accessed through : <a href=\"http://127.0.0.1:8080/webui/\">http://127.0.0.1:8080/webui/</a></p>\n<p>Reaper can also be accessed using the REST API exposed on port 8080, or using the command line tool <code>bin/spreaper</code></p>\n<h2><a id=\"user-content-running-a-dockerized-reaper-example\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#running-a-dockerized-reaper-example\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Running a Dockerized Reaper Example</h2>\n<h3><a id=\"user-content-build-reaper-docker-image\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#build-reaper-docker-image\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Build Reaper Docker Image</h3>\n<p>First, build the Docker image and add it to your local image cache using the\n<code>cassandra-reaper:latest</code> tag:</p>\n<p><code>mvn clean package docker:build</code></p>\n<h3><a id=\"user-content-start-docker-environment\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#start-docker-environment\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Start Docker Environment</h3>\n<p>First, start the Cassandra cluster:</p>\n<p><code>docker-compose up cassandra</code></p>\n<p>You can use the <code>nodetool</code> Docker Compose service to check on the Cassandra\nnode's status:</p>\n<p><code>docker-compose run nodetool status</code></p>\n<p>Once the Cassandra node is online and accepting CQL connections,\ncreate the required <code>reaper_db</code> Cassandra keyspace to allow Reaper to save\nits cluster and scheduling data.</p>\n<p>By default, the <code>reaper_db</code> keyspace is created using a replication factor\nof 1. To change this replication factor, provide the intended replication\nfactor as an optional argument:</p>\n<p><code>docker-compose run initialize-reaper_db [$REPLICATION_FACTOR]</code></p>\n<p>Wait a few moments for the <code>reaper_db</code> schema change to propagate,\nthen start Reaper:</p>\n<p><code>docker-compose up reaper</code></p>\n<h3><a id=\"user-content-access-the-environment\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#access-the-environment\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Access The Environment</h3>\n<p>Once started, the UI can be accessed through:</p>\n<p><a href=\"http://127.0.0.1:8080/webui/\">http://127.0.0.1:8080/webui/</a></p>\n<p>When adding the Cassandra node to the Reaper UI, use the IP address found via:</p>\n<p><code>docker-compose run nodetool status</code></p>\n<p>The helper <code>cqlsh</code> Docker Compose service has also been included:</p>\n<p><code>docker-compose run cqlsh</code></p>\n<h3><a id=\"user-content-destroying-the-docker-environment\" class=\"anchor\" href=\"https://github.com/thelastpickle/cassandra-reaper#destroying-the-docker-environment\" aria-hidden=\"true\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"/></a>Destroying the Docker Environment</h3>\n<p>When terminating the infrastructure, use the following command to stop\nall related Docker Compose services:</p>\n<p><code>docker-compose down</code></p>\n<p>To completely clean up all persistent data, delete the <code>./data/</code> directory:</p>\n<p><code>rm -rf ./data/</code></p>\n</article>"}}]}},"pageContext":{"alternative_id":1662}}