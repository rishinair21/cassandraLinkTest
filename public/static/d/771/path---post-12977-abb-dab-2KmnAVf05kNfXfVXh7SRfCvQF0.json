{"data":{"allAnantCassandralinks":{"edges":[{"node":{"title":"Cassandra Datacenter & Racks","alternative_id":12977,"content":"<p>This last post in this series is <a href=\"https://compositecode.blog/2018/10/08/distributed-database-things-to-know-consistent-hashing/\" target=\"_blank\" rel=\"noopener\">Distributed Database Things to Know: Consistent Hashing</a>.</p>\n<p>Let’s talk about the analogy of <em>Apache Cassandra Datacenter &amp; Racks</em> to actual datacenter and racks. I kind of enjoy the use of the terms datacenter and racks to describe architectural elements of Cassandra. However, as time moves on the relationship between these terms and why they’re called datacenter and racks can be obfuscated.</p>\n<p>Take for instance, a datacenter could just be a cloud provider, an actual physical datacenter location, a zone in Azure, or region in some other provider. What an actual Datacenter in Cassandra parlance actually is can vary, but the origins of why it’s called a Datacenter remains the same. The elements of racks also can vary, but also remain the same.</p>\n<h2>Origins: Racks &amp; Datacenters?</h2>\n<p>Let’s cover the actual things in this industry we call <em>datacenter</em> and <em>racks</em> first, unrelated to Apache Cassandra terms.</p>\n<p><strong>Racks</strong>: The easiest way to describe a physical rack is to show pictures of datacenter racks via the ole’ Google images.</p>\n<p><a href=\"https://www.google.com/search?rlz=1C5CHFA_enUS793US793&amp;biw=1280&amp;bih=1090&amp;tbm=isch&amp;sa=1&amp;ei=mjvWW9X-KsW10PEP76i52AI&amp;q=data+center+racks&amp;oq=data+center+racks&amp;gs_l=img.3..0l2j0i7i30j0i5i30l2j0i8i30l2j0i24l3.4078.5164..5371...0.0..0.45.507.12......1....1..gws-wiz-img.......0i8i7i30j0i7i5i30.b-QP90OSuUs\" target=\"_blank\" rel=\"noopener\"><img data-attachment-id=\"14484\" data-permalink=\"https://compositecode.blog/2018/10/29/cassandra-datacenter-racks/racks/\" data-orig-file=\"https://compositecode.files.wordpress.com/2018/08/racks.png?w=625\" data-orig-size=\"1277,581\" data-comments-opened=\"1\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"racks\" data-image-description=\"\" data-medium-file=\"https://compositecode.files.wordpress.com/2018/08/racks.png?w=625?w=300\" data-large-file=\"https://compositecode.files.wordpress.com/2018/08/racks.png?w=625?w=625\" class=\"alignnone size-full wp-image-14484\" src=\"https://compositecode.files.wordpress.com/2018/08/racks.png?w=625\" alt=\"racks.png\" srcset=\"https://compositecode.files.wordpress.com/2018/08/racks.png?w=625 625w, https://compositecode.files.wordpress.com/2018/08/racks.png?w=1248 1248w, https://compositecode.files.wordpress.com/2018/08/racks.png?w=150 150w, https://compositecode.files.wordpress.com/2018/08/racks.png?w=300 300w, https://compositecode.files.wordpress.com/2018/08/racks.png?w=768 768w, https://compositecode.files.wordpress.com/2018/08/racks.png?w=1024 1024w\" /></a></p>\n<p>A rack is something that is located in a data-center, or even just someone’s garage in some odd scenarios. Ya know, if somebody wants serious hardware to work with. The rack then has a number of servers, often various kinds, within that rack itself. As you can see from the images above there’s a wide range of these racks.</p>\n<p><strong>Datacenter</strong>: Again the easiest way to describe a datacenter is to just look at a bunch of pictures of datacenter, albeit you see lots of racks again. But really, that’s what a datacenter is, is a building that has lots and lots of racks.</p>\n<p><a href=\"https://www.google.com/search?q=data+center&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ved=0ahUKEwj0wYHomqreAhXNGTQIHdEDBXMQ_AUIDygC&amp;biw=1280&amp;bih=1090\" target=\"_blank\" rel=\"noopener\"><img data-attachment-id=\"14485\" data-permalink=\"https://compositecode.blog/2018/10/29/cassandra-datacenter-racks/data-center/\" data-orig-file=\"https://compositecode.files.wordpress.com/2018/08/data-center.png?w=625\" data-orig-size=\"1279,765\" data-comments-opened=\"1\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"data-center\" data-image-description=\"\" data-medium-file=\"https://compositecode.files.wordpress.com/2018/08/data-center.png?w=625?w=300\" data-large-file=\"https://compositecode.files.wordpress.com/2018/08/data-center.png?w=625?w=625\" class=\"alignnone size-full wp-image-14485\" src=\"https://compositecode.files.wordpress.com/2018/08/data-center.png?w=625\" alt=\"data-center.png\" srcset=\"https://compositecode.files.wordpress.com/2018/08/data-center.png?w=625 625w, https://compositecode.files.wordpress.com/2018/08/data-center.png?w=1250 1250w, https://compositecode.files.wordpress.com/2018/08/data-center.png?w=150 150w, https://compositecode.files.wordpress.com/2018/08/data-center.png?w=300 300w, https://compositecode.files.wordpress.com/2018/08/data-center.png?w=768 768w, https://compositecode.files.wordpress.com/2018/08/data-center.png?w=1024 1024w\" /></a></p>\n<p>However in Apache Cassandra (and respectively DataStax Enterprise products) a datacenter and rack do not directly correlate to a physical rack or datacenter. The idea is more of an abstraction than hard mapping to the physical realm. In turn it is better to think of datacenter and racks as a way to structure and organize your DataStax Enterprise or Apache Cassandra architecture. From a tree perspective of organizing your cluster, think of things in this hierarchy.</p>\n<ul><li>Cluster\n<ul><li>Datacenter(s)\n<ul><li>Rack(s)\n<ul><li>Server(s)\n<ul><li>Node (vnode)</li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul><h2>Apache Cassandra Datacenter</h2>\n<p>An Apache Cassandra Datacenter is a group of nodes, related and configured within a cluster for replication purposes. Setting up a specific set of related nodes into a datacenter helps to reduce latency, prevent transactions from impact by other workloads, and related effects. The replication factor can also be setup to write to multiple datacenter, providing additional flexibility in architectural design and organization. One specific element of datacenter to note is that they must contain only one node type:</p>\n<ul><li>Transactional: A standard Cassandra node.</li>\n<li><a href=\"https://docs.datastax.com/en/dse/6.0/dse-admin/datastax_enterprise/graph/graphTOC.html\" target=\"_blank\" rel=\"noopener\">DataStax Enterprise Graph</a>: The Graph database offering from Datastax.</li>\n<li><a href=\"https://docs.datastax.com/en/dse/6.0/dse-admin/datastax_enterprise/analytics/analyticsOverview.html\" target=\"_blank\" rel=\"noopener\">DataStax Enterprise Analytics</a>: An integration with <a href=\"https://spark.apache.org/\" target=\"_blank\" rel=\"noopener\">Apache Spark</a>.</li>\n<li><a href=\"https://docs.datastax.com/en/dse/6.0/dse-admin/datastax_enterprise/search/searchTOC.html\" target=\"_blank\" rel=\"noopener\">DataStax Enterprise Search</a>: Integration with <a href=\"http://lucene.apache.org/solr/\" target=\"_blank\" rel=\"noopener\">Apache Solr</a>.</li>\n<li><a href=\"https://docs.datastax.com/en/dse/6.0/dse-dev/datastax_enterprise/analytics/dseSearchAnalyticsOverview.html\" target=\"_blank\" rel=\"noopener\">DataStax Enterprise Search Analytics</a>: Search queries within analytics jobs.</li>\n</ul><p>Depending on the replication factor, data can be written to multiple datacenters. Datacenters must never span physical locations.Each datacenter usually contains only one node type. The node types are:</p>\n<ul class=\"ul\"><li class=\"li\">Transactional: Previously referred to as a Cassandra node.</li>\n<li class=\"li\"><a class=\"xref\" href=\"https://docs.datastax.com/en/dse/6.0/dse-admin/datastax_enterprise/graph/graphTOC.html\" target=\"_blank\" rel=\"noopener\">DSE Graph</a>: A graph database for managing, analyzing, and searching highly-connected data.</li>\n<li class=\"li\"><a class=\"xref\" href=\"https://docs.datastax.com/en/dse/6.0/dse-admin/datastax_enterprise/analytics/analyticsOverview.html\" target=\"_blank\" rel=\"noopener\">DSE Analytics</a>: Integration with Apache Spark.</li>\n<li class=\"li\"><a class=\"xref\" href=\"https://docs.datastax.com/en/dse/6.0/dse-admin/datastax_enterprise/search/searchAbout.html\" target=\"_blank\" rel=\"noopener\">DSE Search</a>: Integration with Apache Solr. Previously referred to as a Solr node.</li>\n<li class=\"li\"><a class=\"xref\" href=\"https://docs.datastax.com/en/dse/6.0/dse-admin/datastax_enterprise/analytics/dseSearchAnalyticsOverview.html\" target=\"_blank\" rel=\"noopener\">DSE SearchAnalytics</a>: DSE Search queries within DSE Analytics jobs.</li>\n</ul><h2>Apache Cassandra Racks</h2>\n<p>An Apache Cassandra Rack is a grouped set of servers. The architecture of Cassandra uses racks so that no replica is stored redundantly inside a singular rack, ensuring that replicas are spread around through different racks in case one rack goes down. Within a datacenter there could be multiple racks with multiple servers, as the hierarchy shown above would dictate.</p>\n<p>To determine where data goes within a rack or sets of racks Apache Cassandra uses what is referred to as a snitch. A snitch determines which racks and datacenter a particular node belongs to, and by respect of that, determines where the replicas of data will end up. This replication strategy which is informed by the snitch can take the form of numerous kinds of snitches, some examples include;</p>\n<ul><li>SimpleSnitch – this snitch treats order as proximity. This is primarily only used when in a single-datacenter deployment.</li>\n<li>Dynamic Snitching – the dynamic snitch monitors read latencies to avoid reading from hosts that have slowed down.</li>\n<li>RackInferringSnitch – Proximity is determined by rack and datacenter, assumed corresponding to 3rd and 2nd octet of each node’s IP address. This particular snitch is often used as an example for writing a custom snitch class since it isn’t particularly useful unless it happens to match one’s deployment conventions.</li>\n</ul><p>In the future I’ll outline a few more snitches, how some of them work with more specific detail, and I’ll get into a whole selection of other topics. Be sure to subscribe to the blog, the ole’ RSS feed works great too, and follow <a href=\"https://twitter.com/CompositeCode\" target=\"_blank\" rel=\"noopener\">@CompositeCode</a> for blog updates. For discourse and hot takes follow me <a href=\"https://twitter.com/Adron\" target=\"_blank\" rel=\"noopener\">@Adron</a>.</p>\n<blockquote>\n<h2>Distributed Database Things to Know Series</h2>\n<ol><li><a href=\"https://compositecode.blog/2018/10/08/distributed-database-things-to-know-consistent-hashing/\" target=\"_blank\" rel=\"noopener\">Consistent Hashing</a></li>\n<li>Apache Cassandra Datacenter &amp; Racks (this post)</li>\n</ol></blockquote>\n\n\t\t<div id=\"geo-post-14483\" class=\"geo geo-post\">\n\t\t\t47.666712\n\t\t\t-122.383132\n\t\t</div>"}}]}},"pageContext":{"alternative_id":12977}}