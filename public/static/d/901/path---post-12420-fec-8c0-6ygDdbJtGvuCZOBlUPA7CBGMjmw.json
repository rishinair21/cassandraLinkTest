{"data":{"allAnantCassandralinks":{"edges":[{"node":{"title":"Cassandra - Database - Secrets Engines - Vault by HashiCorp","alternative_id":12420,"content":"<p>Cassandra is one of the supported plugins for the database secrets engine. This\nplugin generates database credentials dynamically based on configured roles for\nthe Cassandra database.</p><p>See the <a href=\"https://www.vaultproject.io/docs/secrets/databases/index.html\">database secrets engine</a> docs for\nmore information about setting up the database secrets engine.</p><h2 id=\"setup\">\n  <a name=\"setup\" class=\"anchor\" href=\"#setup\">»</a>\n  Setup\n</h2><ol><li><p>Enable the database secrets engine if it is not already enabled:</p>\n<div class=\"highlight\"><pre>$ vault secrets enable database\nSuccess! Enabled the database secrets engine at: database/\n</pre></div><p>By default, the secrets engine will enable at the name of the engine. To\nenable the secrets engine at a different path, use the <code>-path</code> argument.</p>\n</li>\n<li><p>Configure Vault with the proper plugin and connection information:</p>\n<div class=\"highlight\"><pre>$ vault write database/config/my-cassandra-database \\\n    plugin_name=\"cassandra-database-plugin\" \\\n    hosts=127.0.0.1 \\\n    protocol_version=4 \\\n    username=cassandra \\\n    password=cassandra \\\n    allowed_roles=my-role\n</pre></div></li>\n<li><p>Configure a role that maps a name in Vault to an SQL statement to execute to\ncreate the database credential:</p>\n<div class=\"highlight\"><pre>$ vault write database/roles/my-role \\\n    db_name=my-cassandra-database \\\n    creation_statements=\"CREATE USER '{{username}}' WITH PASSWORD '{{password}}' NOSUPERUSER; \\\n         GRANT SELECT ON ALL KEYSPACES TO {{username}};\" \\\n    default_ttl=\"1h\" \\\n    max_ttl=\"24h\"\nSuccess! Data written to: database/roles/my-role\n</pre></div></li>\n</ol><h2 id=\"usage\">\n  <a name=\"usage\" class=\"anchor\" href=\"#usage\">»</a>\n  Usage\n</h2><p>After the secrets engine is configured and a user/machine has a Vault token with\nthe proper permission, it can generate credentials.</p><ol><li><p>Generate a new credential by reading from the <code>/creds</code> endpoint with the name\nof the role:</p>\n<div class=\"highlight\"><pre>$ vault read database/creds/my-role\nKey                Value\n---                -----\nlease_id           database/creds/my-role/2f6a614c-4aa2-7b19-24b9-ad944a8d4de6\nlease_duration     1h\nlease_renewable    true\npassword           8cab931c-d62e-a73d-60d3-5ee85139cd66\nusername           v-root-e2978cd0-\n</pre></div></li>\n</ol><h2 id=\"api\">\n  <a name=\"api\" class=\"anchor\" href=\"#api\">»</a>\n  API\n</h2><p>The full list of configurable options can be seen in the <a href=\"https://www.vaultproject.io/api/secret/databases/cassandra.html\">Cassandra database\nplugin API</a> page.</p><p>For more information on the database secrets engine's HTTP API please see the <a href=\"https://www.vaultproject.io/api/secret/databases/index.html\">Database secret\nsecrets engine API</a> page.</p>"}}]}},"pageContext":{"alternative_id":12420}}