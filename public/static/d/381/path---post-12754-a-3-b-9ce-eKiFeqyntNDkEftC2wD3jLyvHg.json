{"data":{"allAnantCassandralinks":{"edges":[{"node":{"title":"yabinmeng/cassgatling","alternative_id":12754,"content":"<article class=\"markdown-body entry-content\" itemprop=\"text\">\n<p>This is a sample code of utilizing <a href=\"https://gatling.io/\" rel=\"nofollow\">Gatling</a> testing framework for stress testing with DSE</p>\n<h3><a id=\"user-content-pre-requisites\" class=\"anchor\" aria-hidden=\"true\" href=\"#pre-requisites\"></a>Pre-requisites</h3>\n<p>Note: At the moment, the latest version of Gatling framework is 2.3.1. However, the CQL plugin 0.0.7 is not compatible with Gatling 2.3.1 yet.</p>\n<ol><li>Gatling high charts bundle version 2.2.5:</li>\n</ol><ul><li><a href=\"https://repo1.maven.org/maven2/io/gatling/highcharts/gatling-charts-highcharts-bundle/2.2.5/\" rel=\"nofollow\">https://repo1.maven.org/maven2/io/gatling/highcharts/gatling-charts-highcharts-bundle/2.2.5/</a></li>\n</ul><ol start=\"2\"><li>Gatling CQL plugin v0.0.7 (latest version as of writing)</li>\n</ol><p><strong>[NOTES]</strong> - as of April 10, 2018, Gatling CQL plugin has released version 0.0.8 which works with the latest Gatling framework 2.3.1. Please feel free to download these latest versions for your test. Please also be aware that Gatling 2.3.1 requires scala 2.1.2 and make sure your scala version is upgraded first.</p>\n<h3><a id=\"user-content-notes-about-the-example-simulation-scenario\" class=\"anchor\" aria-hidden=\"true\" href=\"#notes-about-the-example-simulation-scenario\"></a>Notes about the Example Simulation Scenario</h3>\n<p>The simulation scenario (MyTestSimu.scala) as included in this example simulates a mixed read/write workload. The core steps of the scenario are summarized below and you can follow the same steps when creating your own scenario:</p>\n<ol><li>Set up connection to Cassandra/DSE cluster with proper properties, such as \"contact points\", \"load balancing policy\", etc.</li>\n<li>Create the application keyspace and table schema</li>\n<li>Define the (random) value generator for table columns based on their types</li>\n<li>Define the Read/Write statements to be used in the simulation, including the Consistency Level associated with the statements</li>\n<li>Set up the user simulation behavior for Read and Write. The key parts include:</li>\n</ol><ul><li>How many concurrent users (can be constant or some variance) to be simulated per second.</li>\n<li>How long does the simulation executes</li>\n</ul><h3><a id=\"user-content-procedure\" class=\"anchor\" aria-hidden=\"true\" href=\"#procedure\"></a>Procedure</h3>\n<ol><li>Set up Gatling framework and the CQL plug-in (just unzip, as per description found <a href=\"https://github.com/gatling-cql/GatlingCql\">here</a>)</li>\n<li>Download the MyTestSimu.scala file and put it under folder &lt;GATLING_HOME&gt;/user-files/simulations/</li>\n<li>Execute the Gatling simulation (stress-testing) scenario by running command: &lt;GATLING_HOME&gt;/bin/gatling.sh. Follow the instructions on the command-line output.</li>\n</ol><p>NOTE: The simulation scenario (MyTestSimu.scala) is tested against a DSE cluster (version 5.1.6) with UserName/Password authentication. Please adjust accordingly for your case.</p>\n<hr /><p>An example is as below. Simulation number 1 is the Cassandra stres-testing scenario as defined by this example.</p>\n<pre>$ bin/gatling.sh\nGATLING_HOME is set to /home/automaton/gatling-charts-highcharts-bundle-2.2.5\nChoose a simulation number:\n     [0] cassandra.CassandraSimulation\n     [1] cassandra.MyTestSimu\n     [2] computerdatabase.BasicSimulation\n     [3] computerdatabase.advanced.AdvancedSimulationStep01\n     [4] computerdatabase.advanced.AdvancedSimulationStep02\n     [5] computerdatabase.advanced.AdvancedSimulationStep03\n     [6] computerdatabase.advanced.AdvancedSimulationStep04\n     [7] computerdatabase.advanced.AdvancedSimulationStep05\n1\nSelect simulation id (default is 'mytestsimu'). Accepted characters are a-z, A-Z, 0-9, - and _\nSelect run description (optional)\nSimulation cassandra.MyTestSimu started...\n================================================================================\n2018-04-04 15:33:43                                           5s elapsed\n---- Requests ------------------------------------------------------------------\n&gt; Global                                                   (OK=232    KO=0     )\n&gt; upsertStmt                                               (OK=93     KO=0     )\n&gt; readStmt                                                 (OK=139    KO=0     )\n---- Read Workload Scenario ----------------------------------------------------\n[#                                                                         ]  1%\n          waiting: 8861   / active: 0      / done:139\n---- Write Workload Scenario ---------------------------------------------------\n[                                                                          ]  0%\n          waiting: 20907  / active: 0      / done:93\n================================================================================\n... ...\n================================================================================\n2018-04-04 15:43:39                                         600s elapsed\n---- Requests ------------------------------------------------------------------\n&gt; Global                                                   (OK=30000  KO=0     )\n&gt; upsertStmt                                               (OK=21000  KO=0     )\n&gt; readStmt                                                 (OK=9000   KO=0     )\n---- Read Workload Scenario ----------------------------------------------------\n[##########################################################################]100%\n          waiting: 0      / active: 0      / done:9000\n---- Write Workload Scenario ---------------------------------------------------\n[##########################################################################]100%\n          waiting: 0      / active: 0      / done:21000\n================================================================================\nSimulation cassandra.MyTestSimu completed in 600 seconds\nParsing log file(s)...\nParsing log file(s) done\nGenerating reports...\n================================================================================\n---- Global Information --------------------------------------------------------\n&gt; request count                                      30000 (OK=30000  KO=0     )\n&gt; min response time                                      0 (OK=0      KO=-     )\n&gt; max response time                                    224 (OK=224    KO=-     )\n&gt; mean response time                                     2 (OK=2      KO=-     )\n&gt; std deviation                                          5 (OK=5      KO=-     )\n&gt; response time 50th percentile                          1 (OK=1      KO=-     )\n&gt; response time 75th percentile                          2 (OK=2      KO=-     )\n&gt; response time 95th percentile                          3 (OK=3      KO=-     )\n&gt; response time 99th percentile                          7 (OK=7      KO=-     )\n&gt; mean requests/sec                                     50 (OK=50     KO=-     )\n---- Response Time Distribution ------------------------------------------------\n&gt; t &lt; 800 ms                                         30000 (100%)\n&gt; 800 ms &lt; t &lt; 1200 ms                                   0 (  0%)\n&gt; t &gt; 1200 ms                                            0 (  0%)\n&gt; failed                                                 0 (  0%)\n================================================================================\nReports generated in 4s.\nPlease open the following file: /home/automaton/gatling-charts-highcharts-bundle-2.2.5/results/mytestsimu-1522856018600/index.html\n</pre>\n</article>"}}]}},"pageContext":{"alternative_id":12754}}