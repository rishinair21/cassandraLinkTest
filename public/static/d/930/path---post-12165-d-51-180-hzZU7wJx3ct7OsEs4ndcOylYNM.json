{"data":{"allAnantCassandralinks":{"edges":[{"node":{"title":"instaclustr/cassandra-sstable-tools","alternative_id":12165,"content":"<article class=\"markdown-body entry-content\" itemprop=\"text\">\n<pre>$ git clone git@github.com:instaclustr/cassandra-sstable-tools.git\n$ cd cassandra-sstable-tools\n# Select the correct branch for major version (default is cassandra-3.11)\n$ git checkout cassandra-3.11\n$ ant\n</pre>\n<p>You can compile against an older minor version with <code>-Dcassandra.version=&lt;version&gt;</code>. For example:</p>\n<pre>$ ant -Dcassandra.version=3.11.2\n</pre>\n<p>However only the version specified in build.xml is officially supported,\nas compatibility between minor versions can break.</p>\n<p>Copy ic-sstable-tools.jar to Cassandra JAR folder, eg. <code>/usr/share/cassandra</code></p>\n<p>Copy the bin/ic-* files into your $PATH</p>\n<table><thead><tr><th>Command</th>\n<th>Description</th>\n</tr></thead><tbody><tr><td>ic-summary</td>\n<td>Summary information about all column families including how much of the data is repaired</td>\n</tr><tr><td>ic-sstables</td>\n<td>Print out metadata for sstables the belong to a column family</td>\n</tr><tr><td>ic-pstats</td>\n<td>Partition size statistics for a column family</td>\n</tr><tr><td>ic-cfstats</td>\n<td>Detailed statistics about cells in a column family</td>\n</tr><tr><td>ic-purge</td>\n<td>Statistics about reclaimable data for a column family</td>\n</tr></tbody></table><h2><a id=\"user-content-ic-summary\" class=\"anchor\" aria-hidden=\"true\" href=\"#ic-summary\"></a>ic-summary</h2>\n<p>Provides summary information about all column families. Useful for finding\nthe largest column families and how much data has been repaired by incremental repairs.</p>\n<h3><a id=\"user-content-usage\" class=\"anchor\" aria-hidden=\"true\" href=\"#usage\"></a>Usage</h3>\n<pre>ic-summary\n</pre>\n<h3><a id=\"user-content-output\" class=\"anchor\" aria-hidden=\"true\" href=\"#output\"></a>Output</h3>\n<table><thead><tr><th>Column</th>\n<th>Description</th>\n</tr></thead><tbody><tr><td>Keyspace</td>\n<td>Keyspace the column family belongs to</td>\n</tr><tr><td>Column Family</td>\n<td>Name of column family</td>\n</tr><tr><td>SSTables</td>\n<td>Number of sstables on this node for the column family</td>\n</tr><tr><td>Disk Size</td>\n<td>Compressed size on disk for this node</td>\n</tr><tr><td>Data Size</td>\n<td>Uncompressed size of the data for this node</td>\n</tr><tr><td>Last Repaired</td>\n<td>Maximum repair timestamp on sstables</td>\n</tr><tr><td>Repair %</td>\n<td>Percentage of data marked as repaired</td>\n</tr></tbody></table><h2><a id=\"user-content-ic-sstables\" class=\"anchor\" aria-hidden=\"true\" href=\"#ic-sstables\"></a>ic-sstables</h2>\n<p>Print out sstable metadata for a column family. Useful in helping to tune compaction settings.</p>\n<h3><a id=\"user-content-usage-1\" class=\"anchor\" aria-hidden=\"true\" href=\"#usage-1\"></a>Usage</h3>\n<pre>ic-sstables &lt;keyspace&gt; &lt;column-family&gt;\n</pre>\n<h3><a id=\"user-content-output-1\" class=\"anchor\" aria-hidden=\"true\" href=\"#output-1\"></a>Output</h3>\n<table><thead><tr><th>Column</th>\n<th>Description</th>\n</tr></thead><tbody><tr><td>SSTable</td>\n<td>Data.db filename of sstable</td>\n</tr><tr><td>Disk Size</td>\n<td>Size of sstable on disk</td>\n</tr><tr><td>Total Size</td>\n<td>Uncompressed size of data contained in the sstable</td>\n</tr><tr><td>Min Timestamp</td>\n<td>Minimum cell timestamp contained in the sstable</td>\n</tr><tr><td>Max Timestamp</td>\n<td>Maximum cell timestamp contained in the sstable</td>\n</tr><tr><td>Duration</td>\n<td>The time span between minimum and maximum cell timestamps</td>\n</tr><tr><td>Min Deletion Time</td>\n<td>The minimum deletion time</td>\n</tr><tr><td>Max Deletion Time</td>\n<td>The maximum deletion time</td>\n</tr><tr><td>Level</td>\n<td>Leveled Tiered Compaction sstable level</td>\n</tr><tr><td>Keys</td>\n<td>Number of partition keys</td>\n</tr><tr><td>Avg Partition Size</td>\n<td>Average partition size</td>\n</tr><tr><td>Max Partition Size</td>\n<td>Maximum partition size</td>\n</tr><tr><td>Avg Column Count</td>\n<td>Average number of columns in a partition</td>\n</tr><tr><td>Max Column Count</td>\n<td>Maximum number of columns in a partition</td>\n</tr><tr><td>Droppable</td>\n<td>Estimated droppable tombstones</td>\n</tr><tr><td>Repaired At</td>\n<td>Time when marked as repaired by incremental repair</td>\n</tr></tbody></table><h2><a id=\"user-content-ic-pstats\" class=\"anchor\" aria-hidden=\"true\" href=\"#ic-pstats\"></a>ic-pstats</h2>\n<p>Tool for finding largest partitions. Reads the Index.db files so is relatively quick.</p>\n<h3><a id=\"user-content-usage-2\" class=\"anchor\" aria-hidden=\"true\" href=\"#usage-2\"></a>Usage</h3>\n<pre>ic-pstats [-n &lt;num&gt;] [-t &lt;snapshot&gt;] [-f &lt;filter&gt;] &lt;keyspace&gt; &lt;column-family&gt;\n</pre>\n<table><thead><tr><th>-h</th>\n<th>Display help</th>\n</tr></thead><tbody><tr><td>-b</td>\n<td>Batch mode. Uses progress indicator that is friendly for running in batch jobs.</td>\n</tr><tr><td>-n </td>\n<td>Number of partitions to display</td>\n</tr><tr><td>-t </td>\n<td>Snapshot to analyse. Snapshot is created if none is specified.</td>\n</tr><tr><td>-f </td>\n<td>Comma separated list of Data.db sstables to filter on</td>\n</tr></tbody></table><h3><a id=\"user-content-output-2\" class=\"anchor\" aria-hidden=\"true\" href=\"#output-2\"></a>Output</h3>\n<p>Summary: Summary statistics about partitions</p>\n<table><thead><tr><th>Column</th>\n<th>Description</th>\n</tr></thead><tbody><tr><td>Count (Size)</td>\n<td>Number of partition keys on this node</td>\n</tr><tr><td>Total (Size)</td>\n<td>Total uncompressed size of all partitions on this node</td>\n</tr><tr><td>Total (SSTable)</td>\n<td>Number of sstables on this node</td>\n</tr><tr><td>Minimum (Size)</td>\n<td>Minimum uncompressed partition size</td>\n</tr><tr><td>Minimum (SSTable)</td>\n<td>Minimum number of sstables a partition belongs to</td>\n</tr><tr><td>Average (Size)</td>\n<td>Average (mean) uncompressed partition size</td>\n</tr><tr><td>Average (SSTable)</td>\n<td>Average (mean) number of sstables a partition belongs to</td>\n</tr><tr><td>std dev. (Size)</td>\n<td>Standard deviation of partition sizes</td>\n</tr><tr><td>std dev. (SSTable)</td>\n<td>Standard deviation of number of sstables for a partition</td>\n</tr><tr><td>50% (Size)</td>\n<td>Estimated 50th percentile of partition sizes</td>\n</tr><tr><td>50% (SSTable)</td>\n<td>Estimated 50th percentile of sstables for a partition</td>\n</tr><tr><td>75% (Size)</td>\n<td>Estimated 75th percentile of partition sizes</td>\n</tr><tr><td>75% (SSTable)</td>\n<td>Estimated 75th percentile of sstables for a partition</td>\n</tr><tr><td>90% (Size)</td>\n<td>Estimated 90th percentile of partition sizes</td>\n</tr><tr><td>90% (SSTable)</td>\n<td>Estimated 90th percentile of sstables for a partition</td>\n</tr><tr><td>95% (Size)</td>\n<td>Estimated 95th percentile of partition sizes</td>\n</tr><tr><td>95% (SSTable)</td>\n<td>Estimated 95th percentile of sstables for a partition</td>\n</tr><tr><td>99% (Size)</td>\n<td>Estimated 99th percentile of partition sizes</td>\n</tr><tr><td>99% (SSTable)</td>\n<td>Estimated 99th percentile of sstables for a partition</td>\n</tr><tr><td>99.9% (Size)</td>\n<td>Estimated 99.9th percentile of partition sizes</td>\n</tr><tr><td>99.9% (SSTable)</td>\n<td>Estimated 99.9th percentile of sstables for a partition</td>\n</tr><tr><td>Maximum (Size)</td>\n<td>Maximum uncompressed partition size</td>\n</tr><tr><td>Maximum (SSTable)</td>\n<td>Maximum number of sstables a partition belongs to</td>\n</tr></tbody></table><p>Largest partitions: The top N largest partitions</p>\n<table><thead><tr><th>Column</th>\n<th>Description</th>\n</tr></thead><tbody><tr><td>Key</td>\n<td>The partition key</td>\n</tr><tr><td>Size</td>\n<td>Total uncompressed size of the partition</td>\n</tr><tr><td>SSTable Count</td>\n<td>Number of sstables that contain the partition</td>\n</tr></tbody></table><p>SSTable Leaders: The top N partitions that belong to the most sstables</p>\n<table><thead><tr><th>Column</th>\n<th>Description</th>\n</tr></thead><tbody><tr><td>Key</td>\n<td>The partition key</td>\n</tr><tr><td>SSTable Count</td>\n<td>Number of sstables that contain the partition</td>\n</tr><tr><td>Size</td>\n<td>Total uncompressed size of the partition</td>\n</tr></tbody></table><p>SSTables: Metadata about sstables as it relates to partitions.</p>\n<table><thead><tr><th>Column</th>\n<th>Description</th>\n</tr></thead><tbody><tr><td>SSTable</td>\n<td>Data.db filename of SSTable</td>\n</tr><tr><td>Size</td>\n<td>Uncompressed size</td>\n</tr><tr><td>Min Timestamp</td>\n<td>Minimum cell timestamp in the sstable</td>\n</tr><tr><td>Max Timestamp</td>\n<td>Maximum cell timestamp in the sstable</td>\n</tr><tr><td>Level</td>\n<td>Leveled Tiered Compaction level of sstable</td>\n</tr><tr><td>Partitions</td>\n<td>Number of partition keys in the sstable</td>\n</tr><tr><td>Avg Partition Size</td>\n<td>Average uncompressed partition size in sstable</td>\n</tr><tr><td>Max Partition Size</td>\n<td>Maximum uncompressed partition size in sstable</td>\n</tr></tbody></table><h2><a id=\"user-content-ic-cfstats\" class=\"anchor\" aria-hidden=\"true\" href=\"#ic-cfstats\"></a>ic-cfstats</h2>\n<p>Tool for getting detailed cell statistics that can help identify issues with data model.</p>\n<h3><a id=\"user-content-usage-3\" class=\"anchor\" aria-hidden=\"true\" href=\"#usage-3\"></a>Usage</h3>\n<pre>ic-cfstats [-r &lt;limit&gt;] [-n &lt;num&gt;] [-t &lt;snapshot&gt;] [-f &lt;filter&gt;] &lt;keyspace&gt; &lt;column-family&gt;\n</pre>\n<table><thead><tr><th>-h</th>\n<th>Display help</th>\n</tr></thead><tbody><tr><td>-b</td>\n<td>Batch mode. Uses progress indicator that is friendly for running in batch jobs.</td>\n</tr><tr><td>-r </td>\n<td>Limit read throughput to ratelimit MB/s</td>\n</tr><tr><td>-n </td>\n<td>Number of partitions to display</td>\n</tr><tr><td>-t </td>\n<td>Snapshot to analyse. Snapshot is created if none is specified.</td>\n</tr><tr><td>-f </td>\n<td>Comma separated list of Data.db sstables to filter on</td>\n</tr></tbody></table><h3><a id=\"user-content-output-3\" class=\"anchor\" aria-hidden=\"true\" href=\"#output-3\"></a>Output</h3>\n<p>Summary: Summary statistics about partitions</p>\n<table><thead><tr><th>Column</th>\n<th>Description</th>\n</tr></thead><tbody><tr><td>Count (Size)</td>\n<td>Number of partition keys on this node</td>\n</tr><tr><td>Rows (Size)</td>\n<td>Number of clustering rows</td>\n</tr><tr><td>(deleted)</td>\n<td>Number of clustering row deletions</td>\n</tr><tr><td>Total (Size)</td>\n<td>Total uncompressed size of all partitions on this node</td>\n</tr><tr><td>Total (SSTable)</td>\n<td>Number of sstables on this node</td>\n</tr><tr><td>Minimum (Size)</td>\n<td>Minimum uncompressed partition size</td>\n</tr><tr><td>Minimum (SSTable)</td>\n<td>Minimum number of sstables a partition belongs to</td>\n</tr><tr><td>Average (Size)</td>\n<td>Average (mean) uncompressed partition size</td>\n</tr><tr><td>Average (SSTable)</td>\n<td>Average (mean) number of sstables a partition belongs to</td>\n</tr><tr><td>std dev. (Size)</td>\n<td>Standard deviation of partition sizes</td>\n</tr><tr><td>std dev. (SSTable)</td>\n<td>Standard deviation of number of sstables for a partition</td>\n</tr><tr><td>50% (Size)</td>\n<td>Estimated 50th percentile of partition sizes</td>\n</tr><tr><td>50% (SSTable)</td>\n<td>Estimated 50th percentile of sstables for a partition</td>\n</tr><tr><td>75% (Size)</td>\n<td>Estimated 75th percentile of partition sizes</td>\n</tr><tr><td>75% (SSTable)</td>\n<td>Estimated 75th percentile of sstables for a partition</td>\n</tr><tr><td>90% (Size)</td>\n<td>Estimated 90th percentile of partition sizes</td>\n</tr><tr><td>90% (SSTable)</td>\n<td>Estimated 90th percentile of sstables for a partition</td>\n</tr><tr><td>95% (Size)</td>\n<td>Estimated 95th percentile of partition sizes</td>\n</tr><tr><td>95% (SSTable)</td>\n<td>Estimated 95th percentile of sstables for a partition</td>\n</tr><tr><td>99% (Size)</td>\n<td>Estimated 99th percentile of partition sizes</td>\n</tr><tr><td>99% (SSTable)</td>\n<td>Estimated 99th percentile of sstables for a partition</td>\n</tr><tr><td>99.9% (Size)</td>\n<td>Estimated 99.9th percentile of partition sizes</td>\n</tr><tr><td>99.9% (SSTable)</td>\n<td>Estimated 99.9th percentile of sstables for a partition</td>\n</tr><tr><td>Maximum (Size)</td>\n<td>Maximum uncompressed partition size</td>\n</tr><tr><td>Maximum (SSTable)</td>\n<td>Maximum number of sstables a partition belongs to</td>\n</tr></tbody></table><p>Row Histogram: Histogram of number of rows per partition</p>\n<table><thead><tr><th>Column</th>\n<th>Description</th>\n</tr></thead><tbody><tr><td>Percentile</td>\n<td>Minimum, average, standard deviation (std dev.), percentile, maximum</td>\n</tr><tr><td>Count</td>\n<td>Estimated number of rows per partition for the given percentile</td>\n</tr></tbody></table><p>Largest partitions: Partitions with largest uncompressed size</p>\n<table><thead><tr><th>Column</th>\n<th>Description</th>\n</tr></thead><tbody><tr><td>Key</td>\n<td>The partition key</td>\n</tr><tr><td>Size</td>\n<td>Total uncompressed size of the partition</td>\n</tr><tr><td>Rows</td>\n<td>Total number of clustering rows in the partition</td>\n</tr><tr><td>(deleted)</td>\n<td>Number of row deletions in the partition</td>\n</tr><tr><td>Tombstones</td>\n<td>Number of cell or range tombstones</td>\n</tr><tr><td>(droppable)</td>\n<td>Number of tombstones that can be dropped as per gc_grace_seconds</td>\n</tr><tr><td>Cells</td>\n<td>Number of cells in the partition</td>\n</tr><tr><td>SSTable Count</td>\n<td>Number of sstables that contain the partition</td>\n</tr></tbody></table><p>Widest partitions: Partitions with the most cells</p>\n<table><thead><tr><th>Column</th>\n<th>Description</th>\n</tr></thead><tbody><tr><td>Key</td>\n<td>The partition key</td>\n</tr><tr><td>Rows</td>\n<td>Total number of clustering rows in the partition</td>\n</tr><tr><td>(deleted)</td>\n<td>Number of row deletions in the partition</td>\n</tr><tr><td>Cells</td>\n<td>Number of cells in the partition</td>\n</tr><tr><td>Tombstones</td>\n<td>Number of cell or range tombstones</td>\n</tr><tr><td>(droppable)</td>\n<td>Number of tombstones that can be dropped as per gc_grace_seconds</td>\n</tr><tr><td>Size</td>\n<td>Total uncompressed size of the partition</td>\n</tr><tr><td>SSTable Count</td>\n<td>Number of sstables that contain the partition</td>\n</tr></tbody></table><p>Most Deleted Rows: Partitions with the most row deletions</p>\n<table><thead><tr><th>Column</th>\n<th>Description</th>\n</tr></thead><tbody><tr><td>Key</td>\n<td>The partition key</td>\n</tr><tr><td>Rows</td>\n<td>Total number of clustering rows in the partition</td>\n</tr><tr><td>(deleted)</td>\n<td>Number of row deletions in the partition</td>\n</tr><tr><td>Size</td>\n<td>Total uncompressed size of the partition</td>\n</tr><tr><td>SSTable Count</td>\n<td>Number of sstables that contain the partition</td>\n</tr></tbody></table><p>Tombstone Leaders: Partitions with the most tombstones</p>\n<table><thead><tr><th>Column</th>\n<th>Description</th>\n</tr></thead><tbody><tr><td>Key</td>\n<td>The partition key</td>\n</tr><tr><td>Tombstones</td>\n<td>Number of cell or range tombstones</td>\n</tr><tr><td>(droppable)</td>\n<td>Number of tombstones that can be dropped as per gc_grace_seconds</td>\n</tr><tr><td>Rows</td>\n<td>Total number of clustering rows in the partition</td>\n</tr><tr><td>Cells</td>\n<td>Number of cells in the partition</td>\n</tr><tr><td>Size</td>\n<td>Total uncompressed size of the partition</td>\n</tr><tr><td>SSTable Count</td>\n<td>Number of sstables that contain the partition</td>\n</tr></tbody></table><p>SSTable Leaders: Partitions that are in the most sstables</p>\n<table><thead><tr><th>Column</th>\n<th>Description</th>\n</tr></thead><tbody><tr><td>Key</td>\n<td>The partition key</td>\n</tr><tr><td>SSTable Count</td>\n<td>Number of sstables that contain the partition</td>\n</tr><tr><td>Size</td>\n<td>Total uncompressed size of the partition</td>\n</tr><tr><td>Rows</td>\n<td>Total number of clustering rows in the partition</td>\n</tr><tr><td>Cells</td>\n<td>Number of cells in the partition</td>\n</tr><tr><td>Tombstones</td>\n<td>Number of cell or range tombstones</td>\n</tr><tr><td>(droppable)</td>\n<td>Number of tombstones that can be dropped as per gc_grace_seconds</td>\n</tr></tbody></table><p>SSTables: Metadata about sstables as it relates to partitions.</p>\n<table><thead><tr><th>Column</th>\n<th>Description</th>\n</tr></thead><tbody><tr><td>SSTable</td>\n<td>Data.db filename of SSTable</td>\n</tr><tr><td>Size</td>\n<td>Uncompressed size</td>\n</tr><tr><td>Min Timestamp</td>\n<td>Minimum cell timestamp in the sstable</td>\n</tr><tr><td>Max Timestamp</td>\n<td>Maximum cell timestamp in the sstable</td>\n</tr><tr><td>Partitions</td>\n<td>Number of partitions</td>\n</tr><tr><td>(deleted)</td>\n<td>Number of row level partition deletions</td>\n</tr><tr><td>(avg size)</td>\n<td>Average uncompressed partition size in sstable</td>\n</tr><tr><td>(max size)</td>\n<td>Maximum uncompressed partition size in sstable</td>\n</tr><tr><td>Rows</td>\n<td>Total number of clustering rows in sstable</td>\n</tr><tr><td>(deleted)</td>\n<td>Number of row deletions in sstable</td>\n</tr><tr><td>Cells</td>\n<td>Number of cells in the SSTable</td>\n</tr><tr><td>Tombstones</td>\n<td>Number of cell or range tombstones in the SSTable</td>\n</tr><tr><td>(droppable)</td>\n<td>Number of tombstones that are droppable according to gc_grace_seconds</td>\n</tr><tr><td>(range)</td>\n<td>Number of range tombstones</td>\n</tr><tr><td>Cell Liveness</td>\n<td>Percentage of live cells. Does not consider tombstones or cell updates shadowing cells. That is it is percentage of non-tombstoned cells to total number of cells.</td>\n</tr></tbody></table><h2><a id=\"user-content-ic-purge\" class=\"anchor\" aria-hidden=\"true\" href=\"#ic-purge\"></a>ic-purge</h2>\n<p>Finds the largest reclaimable partitions (GCable). Intensive process, effectively does \"fake\" compactions to calculate metrics.</p>\n<h3><a id=\"user-content-usage-4\" class=\"anchor\" aria-hidden=\"true\" href=\"#usage-4\"></a>Usage</h3>\n<pre>ic-purge [-r &lt;limit&gt;] [-n &lt;num&gt;] [-t &lt;snapshot&gt;] [-f &lt;filter&gt;] &lt;keyspace&gt; &lt;column-family&gt;\n</pre>\n<table><thead><tr><th>-h</th>\n<th>Display help</th>\n</tr></thead><tbody><tr><td>-b</td>\n<td>Batch mode. Uses progress indicator that is friendly for running in batch jobs.</td>\n</tr><tr><td>-r </td>\n<td>Limit read throughput to ratelimit MB/s</td>\n</tr><tr><td>-n </td>\n<td>Number of partitions to display</td>\n</tr><tr><td>-t </td>\n<td>Snapshot to analyse. Snapshot is created if none is specified.</td>\n</tr></tbody></table><h3><a id=\"user-content-output-4\" class=\"anchor\" aria-hidden=\"true\" href=\"#output-4\"></a>Output</h3>\n<p>Largest reclaimable partitions: Partitions with the largest amount of reclaimable data</p>\n<table><thead><tr><th>Column</th>\n<th>Description</th>\n</tr></thead><tbody><tr><td>Key</td>\n<td>The partition key</td>\n</tr><tr><td>Size</td>\n<td>Total uncompressed size of the partition</td>\n</tr><tr><td>Reclaim</td>\n<td>Reclaimable uncompressed size</td>\n</tr><tr><td>Generations</td>\n<td>SSTable generations the partition belongs to</td>\n</tr></tbody></table></article>"}}]}},"pageContext":{"alternative_id":12165}}