{"data":{"allAnantCassandralinks":{"edges":[{"node":{"title":"Fulfilling the promise of Apache Cassandra performance - OpenCredo","alternative_id":13128,"content":"Fulfilling the promise of Apache Cassandra performance - OpenCredo&#13;\n&#13;\n\t\t<header class=\"bg-white-90 text-blue fixed w-full z-9999 transition-slow\">&#13;\n</header><section class=\"breadcrumb\"><section><div class=\"wrapper justify-start sm:flex-row pt-0 sm:pt-90 pb-60 max-w-full-minus-60 lg:max-w-895 mb-120\"><div class=\"w-full sm:w-2/3 pr-0 sm:pr-20\"><p class=\"font-title mb-10 uppercase\">&#13;\n\t\tAugust 24, 2016&#13;\n\t | <a href=\"https://opencredo.com/blogs/category/cassandra/\" class=\"text-blue\">Cassandra</a></p><p>At OpenCredo we are seeing an increase in adoption of <a href=\"http://cassandra.apache.org/\">Apache Cassandra</a> as a leading NoSQL database for managing large data volumes, but we have also seen many clients experiencing difficulty converting their high expectations into operational Cassandra performance. Here we present a high-level technical overview of the major strengths and limitations of Cassandra that we have observed over the last few years while helping our clients resolve the real-world issues that they have experienced.</p></div><div class=\"w-full sm:w-1/3 text-center first-on-sm mb-30\"><p class=\"font-title font-bold mt-30\">WRITTEN BY</p><img src=\"https://15rf562os5r61q4tvf2630fw-wpengine.netdna-ssl.com/wp-content/uploads/2018/10/Guy-Richardson-_-Principal-Consultant-.jpg\" alt=\"Guy Richardson\" class=\"circle mb-7.5 h-64 sm:h-auto w-64 sm:w-auto\" /><p class=\"font-title text-orange uppercase font-bold mb-0\"><a href=\"https://opencredo.com/authors/guy-richardson/\" title=\"Posts by Guy Richardson\">Guy Richardson</a></p><p>Principal Consultant</p></div></div></section><section class=\"bg-light-grey\"><div class=\"wrapper max-w-full-minus-60 lg:max-w-895 mb-30\"><div class=\"max-w-full\"><img src=\"https://15rf562os5r61q4tvf2630fw-wpengine.netdna-ssl.com/wp-content/uploads/2018/10/banner-events-895x196.jpg\" alt=\"Fulfilling the promise of Apache Cassandra performance\" class=\"-mt-120 mb-30 md:mb-60\" /><p><img class=\"wp-image-28753 alignright\" src=\"https://15rf562os5r61q4tvf2630fw-wpengine.netdna-ssl.com/wp-content/uploads/2016/08/cassandra-400x92.png\" alt=\"Cassandra Performance\" width=\"387\" height=\"89\" />Like all technologies, Cassandra operates according to certain principles and conventions. These conventions enable Cassandra to yield outstanding performance and support complex data needs, but this comes at the expense of some fundamental limitations. You should assess and understand these limitations  before committing to Cassandra as a technology, and align your rollout of Cassandra with this understanding to ensure that future performance and ongoing operations are within your expected bounds.<br /></p><p>We will cover each of the more complex topics in more detailed blog posts in the series. If you wish to receive notifications as they are published, please register for our newsletter via the form below.</p><h3>Webcast: “Cassandra – The Good, The Bad and the Ugly”</h3><p>We’ll also be hosting a webcast on Tuesday October 6th where you can hear first hand from our experts about these topics and ask questions of them. To secure your free place please <strong><a href=\"https://attendee.gotowebinar.com/register/1175277151907867650\">register here.</a></strong></p><h2>The promise of Cassandr<img class=\"alignright wp-image-28757 size-medium\" src=\"https://15rf562os5r61q4tvf2630fw-wpengine.netdna-ssl.com/wp-content/uploads/2016/08/cassandra-overview-400x233.jpg\" alt=\"Cassandra overview\" width=\"400\" height=\"233\" />a</h2><p>Cassandra has a number of strengths:</p><ol><li><b>Cassandra Performance</b><br />Cassandra supports very high throughput. In particular the Cassandra <a href=\"http://docs.datastax.com/en/cassandra/3.x/cassandra/dml/dmlHowDataWritten.html\" target=\"_blank\" rel=\"noopener\">write path</a> allows for high performance, robust writes.</li>\n<li><b>Elasticity</b> <br />Cassandra is horizontally scalable. Read/write performance and capacity scales linearly as new hardware is added. Adding new hardware requires no downtime or disruption to consumers. </li>\n<li><b>Fault Tolerance</b><br />Cassandra has no single point of failure. Every node in the cluster is identical and can run on commodity hardware. There is no master server.</li>\n<li><b>Resilience</b><br />Data is automatically replicated to multiple nodes – which may be cross-rack (or cloud availability zone) and cross-datacenter. This can be used to ensure high availability across geographical regions.<b></b></li>\n<li><b>Flexibility</b><br />Cassandra uses <a href=\"https://en.wikipedia.org/wiki/Column_(data_store)\" target=\"_blank\" rel=\"noopener\">columns</a> to store data within rows, as rows can be of different length, i.e. have different numbers of columns per row, this leads to rows only as wide as the data in them and users have the ability to change the schema at runtime. With <a href=\"http://docs.datastax.com/en/cassandra/3.x/cassandra/dml/dmlConfigConsistency.html\" target=\"_blank\" rel=\"noopener\">tunable consistency</a> on a <i>per read write operation</i>, replication and read write consistency guarantees can be tuned either for speed or reliability for each query. </li>\n<li><b>Familiar </b><b>SQL-like query language</b><br /><a href=\"http://docs.datastax.com/en/cql/3.3/cql/cqlIntro.html\" target=\"_blank\" rel=\"noopener\">CQL</a> the Cassandra Query Language is syntactically similar to SQL, simplifying the onboarding of SQL developers.</li>\n</ol><h2>Cassandra Performance Limitations to keep in mind</h2><h3>Writing data</h3><p><img class=\"alignright wp-image-28761\" src=\"https://15rf562os5r61q4tvf2630fw-wpengine.netdna-ssl.com/wp-content/uploads/2016/08/cassandra-restrictions.jpg\" alt=\"Cassandra limitations\" width=\"319\" height=\"319\" /></p><p>Cassandra supports very fast write throughput subject to the following:</p><ul><li><b>Traditional transactions are not supported</b><b><br /></b>Cassandra does not support rollback or locking mechanisms. <a href=\"http://docs.datastax.com/en/cassandra/3.x/cassandra/dml/dmlLtwtTransactions.html\">Lightweight transactions</a> are supported but are expensive.</li>\n<li><b>Mutation and deletes create overhead</b><br />Cassandra stores data in multiple immutable data structures (SSTables). Data is aggregated during read from these multiple tables. Updating data in Cassandra spreads data across multiple SSTables and <a href=\"http://docs.datastax.com/en/cassandra/3.x/cassandra/dml/dmlAboutDeletes.html\">deleting</a> data creates tombstones which ensure that data is deleted correctly across the distributed cluster. These increase overhead for reads and generate increased pressure to clean up (compact) SSTables.</li>\n</ul><h3>Querying data</h3><p>Querying data in Cassandra is subject to certain limitations:</p><ul><li><b><b>Joins are not supported</b></b><br />It is not possible to join data from different tables into a single query – and there are no foreign keys. This can be worked around by de-normalising data, duplicating into query-oriented storage format or utilising an add-on reporting technology such as Apache Spark.</li>\n<li><b>Indexes supported with caution</b><br />Cassandra behaves as a large distributed Hashmap, and as such searches via the primary key which uniquely identify a row are very fast, however Secondary Indexes have <a href=\"http://docs.datastax.com/en/cql/3.3/cql/cql_using/useWhenIndex.html\">limited use-cases</a> and can significantly impact performance if applied incorrectly. It is vital that appropriate <a href=\"http://docs.datastax.com/en/cql/3.3/cql/cql_using/useCompositePartitionKey.html\">key and clustering columns</a> are modelled for your querying needs.</li>\n<li><b>Eventual Consistency</b><br />Data is automatically replicated across the cluster. Even with this process, there is a latency and with a masterless configuration, we are subject to <a href=\"https://en.wikipedia.org/wiki/Eventual_consistency\">eventual consistency</a>. This can be <a href=\"http://docs.datastax.com/en/cassandra/3.x/cassandra/dml/dmlAboutDataConsistency.html\">mitigated by using QUORUM</a> reads and writes if required and the incurred overhead is acceptable.</li>\n</ul><h3>Data modelling</h3><p>Data modelling in Cassandra is a complex topic. Here we will provide four basic rules:</p><ol><li><b>Distribute  data evenly</b><br />Partition keys should be chosen so that data is evenly distributed  around the Cassandra ring to ensure that no one node is processing excessive traffic.</li>\n<li><b>Avoid aggregating data from multiple partitions/nodes</b><br />Reads which require multiple nodes to respond will take longer to process and aggregate data, with minimum response time equal to that of the  slowest-responding node. Querying across partitions may incur this overhead depending on partition strategy and location</li>\n<li><b>Structure by queries</b><br />Writes are cheap in Cassandra, so there is minimal overhead for duplicating data. Remember that there are no foreign keys, so denormalising into larger tables with duplicated data can significantly simplify reads. Aim to write data in such a way that your queries can be fulfilled by reading from a single partition.</li>\n<li><b>Avoid updates and deletes</b><br />Updates and deletes significantly complicate de-normalised and duplicate data models. In addition, there is a heavy operational overhead in clearing mutations and deletes from the ring. Cassandra performs best with append-only, immutable data.</li>\n</ol><h3>Operations</h3><p>The default settings for Cassandra can yield a high performance cluster. However, once operating in a non-trivial production environment operational oversight is inevitable. The distributed nature of Cassandra and unfamiliarity of its data model can create an operational skills gap. </p><p>A Cassandra DBA needs to understand:</p><ul><li>Distributed systems and consensus</li>\n<li>Java Virtual Machine tuning</li>\n<li>Various Cassandra production support processes such as compaction</li>\n<li>Monitoring and alerting requirements</li>\n</ul><p>Certain operations will also require manual intervention from ops:</p><ul><li>Node Failure. Where a node goes down it must be addressed manually. </li>\n<li>Failed operations. In some cases, updates and writes may fail to synchronise across the cluster correctly. Regular repairs are required.<br /></li>\n</ul><p>These gaps can certainly be filled with <a href=\"https://academy.datastax.com/courses\">online training</a> and will definitely benefit from at least one operationally experienced individual within your organisation “taking on” Cassandra.</p><h2>When should I use Cassandra?<img class=\"wp-image-28763 alignright\" src=\"https://15rf562os5r61q4tvf2630fw-wpengine.netdna-ssl.com/wp-content/uploads/2016/08/cassandra-good-400x280.png\" alt=\"cassandra-good\" width=\"320\" height=\"224\" /></h2><p>Having considered the promise and limitations of Cassandra, we finish with a recommendation for the areas in which Cassandra excels. </p><ul><li>Cassandra is ideally suited to <i>relatively</i> immutable data where updates and deletions are the exception rather than the rule.</li>\n<li>This includes handling high-throughput firehoses of immutable events such as personalisation, fraud detection, time series and IOT/sensors.</li>\n<li>If your application does not exactly fit this mould it may still benefit from Event Sourcing – storing all changes to the system as an immutable event log rather than mutable state</li>\n<li>Frameworks such as CQRS provide structure for reasoning about events.</li>\n<li>Technologies such as Spark provide the means to generate aggregate (cross-table) datasets from Cassandra data and generate reports.</li>\n</ul><h2>Who else uses Cassandra?</h2><ul><li>E-commerce platforms including <a href=\"http://www.ebay.com/\">Ebay</a> and <a href=\"http://www.wiggle.com/\">Wiggle</a> use Cassandra for their recommendation engines.</li>\n<li>Digital entertainment giants such as Sky, <a href=\"https://www.netflix.com/\">Netflix</a>, <a href=\"https://www.spotify.com/\">Spotify</a> and <a href=\"https://soundcloud.com/\">SoundCloud</a> use Cassandra to provide their online services</li>\n<li><a href=\"https://www.nasa.gov/\">NASA</a> use Cassandra to store vast amounts of security data</li>\n<li><a href=\"https://github.com/\">GitHub</a> and <a href=\"https://www.instagram.com\">Instagram</a> use Cassandra for analytics</li>\n<li><a href=\"https://www.barracuda.com/\">Barracuda</a> and <a href=\"https://www.iovation.com/\">Iovation</a> use Cassandra for fraud detection</li>\n</ul><p>This is the first post in our blog series “Cassandra – What You May Learn The Hard Way.” Get the full overview <a href=\"https://opencredo.com/?p=28779\" target=\"_blank\" rel=\"noopener\">here</a>.</p><p><a href=\"https://attendee.gotowebinar.com/register/1175277151907867650?source=OpenCredo+Website\" target=\"_blank\" rel=\"noopener\">Register here</a> to attend our free webinar “Cassandra – The Good, the Bad, and the Ugly” on October 6th!</p><p><a class=\"button\" href=\"#text_icl-6\">Sign up to receive updates via email</a></p></div></div></section><section class=\"bg-white text-blue pt-60 pb-60\"><div class=\"wrapper\"><p>&#13;\n\t\t\t\t\t</p><h2 class=\"mb-30 text-16 font-bold\">SIMILAR POSTS</h2>&#13;<div class=\"flex flex-wrap w-full lg:w-5/6 justify-center\"><div class=\"owl-carousel owl-carousel-insights flex items-stretch mb-30 md:mb-30 pl-0 sm:pl-30 pr-0 sm:pr-30 lg:pl-0 lg:pr-0\"><div class=\"bg-orange h-full\"><a href=\"https://opencredo.com/blogs/riak-the-dynamo-paper-and-life-beyond-basho/\" title=\"Read More\"><img src=\"https://15rf562os5r61q4tvf2630fw-wpengine.netdna-ssl.com/wp-content/uploads/2018/10/banner-case-studies-297x236.jpg\" alt=\"Riak, the Dynamo paper and life beyond Basho\" class=\"block w-full\" /></a><div class=\"text-white p-30\"><p class=\"text-18 mb-30\"><a href=\"https://opencredo.com/blogs/riak-the-dynamo-paper-and-life-beyond-basho/\" class=\"text-white no-underline font-bold\">Riak, the Dynamo paper and life beyond Basho</a></p>Recently, the sad news has emerged that Basho, which developed the Riak distributed database, has gone into receivership. This would appear to present a problem…<p><a href=\"https://opencredo.com/blogs/riak-the-dynamo-paper-and-life-beyond-basho/\" class=\"text-white no-underline font-bold\">Read More <img src=\"https://15rf562os5r61q4tvf2630fw-wpengine.netdna-ssl.com/wp-content/themes/wp-ocd/assets/img/arrow-white.png\" alt=\"Read More\" class=\"h-16 ml-7.5\" /></a></p></div></div><div class=\"bg-orange h-full\"><a href=\"https://opencredo.com/blogs/spark-testing/\" title=\"Read More\"><img src=\"https://15rf562os5r61q4tvf2630fw-wpengine.netdna-ssl.com/wp-content/uploads/2018/10/banner-expertise-297x236.jpg\" alt=\"Testing a Spark Application\" class=\"block w-full\" /></a><div class=\"text-white p-30\"><p class=\"text-18 mb-30\"><a href=\"https://opencredo.com/blogs/spark-testing/\" class=\"text-white no-underline font-bold\">Testing a Spark Application</a></p>Data analytics isn’t a field commonly associated with testing, but there’s no reason we can’t treat it like any other application. Data analytics services are…<p><a href=\"https://opencredo.com/blogs/spark-testing/\" class=\"text-white no-underline font-bold\">Read More <img src=\"https://15rf562os5r61q4tvf2630fw-wpengine.netdna-ssl.com/wp-content/themes/wp-ocd/assets/img/arrow-white.png\" alt=\"Read More\" class=\"h-16 ml-7.5\" /></a></p></div></div><div class=\"bg-orange h-full\"><a href=\"https://opencredo.com/blogs/deploy-spark-apache-cassandra/\" title=\"Read More\"><img src=\"https://15rf562os5r61q4tvf2630fw-wpengine.netdna-ssl.com/wp-content/uploads/2018/10/banner-services-297x236.jpg\" alt=\"Deploy Spark with an Apache Cassandra cluster\" class=\"block w-full\" /></a><div class=\"text-white p-30\"><p class=\"text-18 mb-30\"><a href=\"https://opencredo.com/blogs/deploy-spark-apache-cassandra/\" class=\"text-white no-underline font-bold\">Deploy Spark with an Apache Cassandra cluster</a></p>My recent blogpost I explored a few cases where using Cassandra and Spark together can be useful. My focus was on the functional behaviour of…<p><a href=\"https://opencredo.com/blogs/deploy-spark-apache-cassandra/\" class=\"text-white no-underline font-bold\">Read More <img src=\"https://15rf562os5r61q4tvf2630fw-wpengine.netdna-ssl.com/wp-content/themes/wp-ocd/assets/img/arrow-white.png\" alt=\"Read More\" class=\"h-16 ml-7.5\" /></a></p></div></div></div><a href=\"https://opencredo.com/blogs/\" class=\"btn hover-scale-105 text-18\">Blog</a></div></div></section><noscript>\n\n\t\t\t\n\t\t\t\t\n\t\t\t\n\t\t\t<div id=\"catapult-cookie-bar\" class=\"\"><p>This website uses cookies to maximise your experience and help us to understand how we can improve it. By continuing to browse this website or by clicking 'Accept', you consent to the use of cookies. If you would like to manage your cookie settings, you can control this in your internet browser. </p></div>\t</noscript></section>"}}]}},"pageContext":{"alternative_id":13128}}