{"data":{"allAnantCassandralinks":{"edges":[{"node":{"title":"Instagram/cassandra-aws-benchmark","alternative_id":9382,"content":"<h3>\n      \n      README.md\n    </h3><article class=\"markdown-body entry-content\" itemprop=\"text\">\n<p>Scripts and templates for cassandra benchmark environment provision</p>\n<h2><a href=\"#requirements\" aria-hidden=\"true\" class=\"anchor\" id=\"user-content-requirements\"></a>Requirements</h2>\n<ul><li>aws cli: <code>pip install awscli --upgrade --user</code> and <code>aws configure</code></li>\n</ul><h2><a href=\"#create-benchmark-environment\" aria-hidden=\"true\" class=\"anchor\" id=\"user-content-create-benchmark-environment\"></a>Create benchmark environment</h2>\n<p>create cloudformation stack:</p>\n<div class=\"highlight highlight-source-shell\"><pre>aws cloudformation create-stack --stack-name MY_STACK_NAME \\\n    --disable-rollback \\\n    --template-body file://cloudformation.yaml \\\n    --parameters \\\n    ParameterKey=CassandraAMI,ParameterValue=MY_CASSANDRA_AMI_ID \\\n    ParameterKey=KeyName,ParameterValue=MY_SSH_KEY_NAME \\\n    ParameterKey=VPCSubnetId,ParameterValue=MY_VPC_SUBNET_ID \\\n    ParameterKey=InstanceProfile,ParameterValue=NAME_OF_INSTANCE_PROFILE_WITH_EC2_AND_AUOSCALEGROUP_READONLY_ACCESS \\\n    --capabilities CAPABILITY_IAM</pre></div>\n<p>update cloudformation stack:</p>\n<div class=\"highlight highlight-source-shell\"><pre>aws cloudformation udpate-stack --stack-name MY_STACK_NAME \\\n    --template-body file://cloudformation.yaml \\\n    --parameters \\\n    ParameterKey=CassandraAMI,ParameterValue=MY_CASSANDRA_AMI_ID \\\n    ParameterKey=KeyName,ParameterValue=MY_SSH_KEY_NAME \\\n    ParameterKey=VPCSubnetId,ParameterValue=MY_VPC_SUBNET_ID \\\n    ParameterKey=InstanceProfile,ParameterValue=NAME_OF_INSTANCE_PROFILE_WITH_EC2_AND_AUOSCALEGROUP_READONLY_ACCESS \\\n    --capabilities CAPABILITY_IAM</pre></div>\n<h2><a href=\"#lastest-prebuilt-cassandra-ami\" aria-hidden=\"true\" class=\"anchor\" id=\"user-content-lastest-prebuilt-cassandra-ami\"></a>Lastest Prebuilt Cassandra AMI</h2>\n<ul><li>cassandra 3.0.15: ami-09cc7371 (us-west-2)</li>\n<li>rocksandra: ami-b770cdcf (us-west-2)</li>\n</ul><h2><a href=\"#build-cassandra-ami-myself\" aria-hidden=\"true\" class=\"anchor\" id=\"user-content-build-cassandra-ami-myself\"></a>Build Cassandra AMI Myself</h2>\n<p>prerequists:  packer: <code>brew install packer</code></p>\n<p>cassandra3x</p>\n<pre>$&gt; cd ami/cassandra3x\n$&gt; wget -O resources/cassandra.rpm https://www.apache.org/dist/cassandra/redhat/30x/cassandra-3.0.15-1.noarch.rpm \n$&gt; packer build -var \"image_version=$(date +%s)\" packer.json\n</pre>\n<p>ndbench</p>\n<pre>$&gt; cd ami/bencher\n$&gt; packer build -var \"image_version=$(date +%s)\" packer.json\n</pre>\n<h2><a href=\"#license\" aria-hidden=\"true\" class=\"anchor\" id=\"user-content-license\"></a>License</h2>\n<p>Cassandra AWS Benchmark is Apache 2.0 licensed, as found in the LICENSE file.</p>\n</article>"}}]}},"pageContext":{"alternative_id":9382}}