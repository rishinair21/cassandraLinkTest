{"data":{"allAnantCassandralinks":{"edges":[{"node":{"title":"smartcat-labs/berserker","alternative_id":9764,"content":"<p>Load generator with modular architecture.</p><p><a href=\"https://travis-ci.org/smartcat-labs/berserker\" rel=\"nofollow\"><img src=\"https://camo.githubusercontent.com/8ac158e9462f9535c5012441dd3a9bf79a8b706a/68747470733a2f2f7472617669732d63692e6f72672f736d6172746361742d6c6162732f6265727365726b65722e7376673f6272616e63683d6d6173746572\" alt=\"Build Status\" data-canonical-src=\"https://travis-ci.org/smartcat-labs/berserker.svg?branch=master\" /></a>\n<a href=\"https://bintray.com/smartcat-labs/maven/berserker/_latestVersion\" rel=\"nofollow\"> <img src=\"https://camo.githubusercontent.com/5ab44ddb3c261cc5f0e932342329abb69ff7e3ca/68747470733a2f2f6170692e62696e747261792e636f6d2f7061636b616765732f736d6172746361742d6c6162732f6d6176656e2f6265727365726b65722f696d616765732f646f776e6c6f61642e737667\" alt=\"Download\" data-canonical-src=\"https://api.bintray.com/packages/smartcat-labs/maven/berserker/images/download.svg\" /></a></p><p>Berserker is designed to be modular from beginning as illustrated on the following diagram.</p><p><a target=\"_blank\" href=\"https://github.com/smartcat-labs/berserker/blob/dev/images/core-design.png\"><img src=\"https://github.com/smartcat-labs/berserker/raw/dev/images/core-design.png\" alt=\"Core Design\" /></a></p><p>Rate generator controls the rate at which load generator operates, rate is expressed on per second basis, or better say, number of impulses which will be generated within one second. Each time impulse is generated load generator fetches data from data source and passes it to worker. Since those are simple interfaces, it is easy to add additional module implementing either data source, worker and even rate generator.\nFollowing diagram represents possible modules for Load Generator of which some are already implemented.</p><p><a target=\"_blank\" href=\"https://github.com/smartcat-labs/berserker/blob/dev/images/architecture.png\"><img src=\"https://github.com/smartcat-labs/berserker/raw/dev/images/architecture.png\" alt=\"Architecture\" /></a></p><p>Berserker is designed as command line tool, but having modular architecture makes it easy to use it as Java library as well.</p><h3>Berserker Commons</h3><p><a href=\"https://github.com/smartcat-labs/berserker/blob/dev/berserker-commons\">Berserker Commons</a> holds interface for core and configuration and it provides signature all the modules need to confront to be able to work together.</p><h3>Berserker Core</h3><p><a href=\"https://github.com/smartcat-labs/berserker/blob/dev/berserker-core\">Berserker Core</a> contains load generator implementation, and common implementations of data source, rate generator and worker.</p><h3>Berserker Runner</h3><p><a href=\"https://github.com/smartcat-labs/berserker/blob/dev/berserker-runner\">Berserker Runner</a> represents runnable jar where desired data source, rate generator and worker can be specified within YAML configuration.\nFollowing section illustrates YAML configuration example.</p><div class=\"highlight highlight-source-yaml\"><pre>load-generator-configuration:\n  data-source-configuration-name: Ranger\n  rate-generator-configuration-name: default\n  worker-configuration-name: Cassandra\n  metrics-reporter-configuration-name: JMX\n  thread-count: 10\n  queue-capacity: 100000\ndata-source-configuration:\n  values:\n    id: uuid()\n    firstName: random(['Peter', 'Mike', 'Steven', 'Joshua', 'John', 'Brandon'])\n    lastName: random(['Smith', 'Johnson', 'Williams', 'Davis', 'Jackson', 'White', 'Lewis', 'Clark'])\n    age: random(20..45)\n    email: string('{}@domain.com', randomLengthString(5))\n    statement:\n      consistencyLevel: ONE\n      query: string(\"INSERT INTO person (id, first_name, last_name, age, email) VALUES ({}, '{}', '{}', {}, '{}');\", $id, $firstName, $lastName, $age, $email)\n  output: $statement\nrate-generator-configuration:\n  rates:\n    r: 1000\n  output: $r\nworker-configuration:\n  connection-points: 0.0.0.0:32770\n  keyspace: my_keyspace\n  async: false\n  bootstrap-commands:\n    - \"CREATE KEYSPACE IF NOT EXISTS my_keyspace WITH replication = {'class': 'SimpleStrategy', 'replication_factor': 1};\"\n    - USE my_keyspace;\n    - CREATE TABLE IF NOT EXISTS person (id uuid, first_name text, last_name text, age int, email text, primary key (id));\nmetrics-reporter-configuration:\n  domain: berserker\n  filter:</pre></div><p>Main part of configuration is <code>load-generator-configuration</code> where concrete modules which will be used for data source, rate generator and worker need to be specified. After <code>load-generator-configuration</code> section, there should be exactly one section for data source, rate generator and worker.\nEach section is allowed to contain module specific configuration as configuration interpretation will be done by module itself.\nIn order for berserker-runner to be able to find particular module, each module jar must be in classpath.</p><h4>Rate generator configuration</h4><p>Documentation on rate generator configuration can be found <a href=\"https://github.com/smartcat-labs/berserker/blob/dev/rate-generator-configuration.md\">here</a>.</p><h3>Modules</h3><p>List of existing modules:</p><h4>Berserker Ranger</h4><p><a href=\"https://github.com/smartcat-labs/berserker/blob/dev/berserker-ranger\">Berserker Ranger</a> is Ranger data source implementation.</p><h4>Berserker Kafka</h4><p><a href=\"https://github.com/smartcat-labs/berserker/blob/dev/berserker-kafka\">Berserker Kafka</a> is worker implementation which sends messages to Kafka cluster.</p><h4>Berserker Cassandra</h4><p><a href=\"https://github.com/smartcat-labs/berserker/blob/dev/berserker-cassandra\">Berserker Cassandra</a> is worker implementation which executes CQL statements on Cassandra cluster.</p><h4>Berserker HTTP</h4><p><a href=\"https://github.com/smartcat-labs/berserker/blob/dev/berserker-http\">Berserker HTTP</a> is worker implementation which sends HTTP request on configured endpoint.</p><h4>Berserker RabbitMQ</h4><p><a href=\"https://github.com/smartcat-labs/berserker/blob/dev/berserker-rabbitmq\">Berserker RabbitMQ</a> is worker implementation which sends AMQP messages to RabbitMQ.</p><h4>Berserker MQTT</h4><p><a href=\"https://github.com/smartcat-labs/berserker/blob/dev/berserker-mqtt\">Berserker MQTT</a> is worker implementation which publishes messages to MQTT broker.</p><h3>Usage</h3><p>Berserker can be used either as a library or as a stand-alone command line tool.</p><h4>Library usage</h4><p>Artifact can be fetched from bintray.</p><p>Add following <code>repository</code> element to your <code>&lt;repositories&gt;</code> section in <code>pom.xml</code>:</p><div class=\"highlight highlight-text-xml\"><pre>&lt;repository&gt;\n  &lt;id&gt;bintray-smartcat-labs-maven&lt;/id&gt;\n  &lt;name&gt;bintray&lt;/name&gt;\n  &lt;url&gt;https://dl.bintray.com/smartcat-labs/maven&lt;/url&gt;\n&lt;/repository&gt;</pre></div><p>Add the <code>dependency</code> element to your <code>&lt;dependencies&gt;</code> section in <code>pom.xml</code> depending which <code>artifact</code> and <code>version</code> you need:</p><div class=\"highlight highlight-text-xml\"><pre>&lt;dependency&gt;\n  &lt;groupId&gt;io.smartcat&lt;/groupId&gt;\n  &lt;artifactId&gt;artifact&lt;/artifactId&gt;\n  &lt;version&gt;version&lt;/version&gt;\n&lt;/dependency&gt;</pre></div><h4>Command line tool usage</h4><ul><li>Download latest <a href=\"https://bintray.com/smartcat-labs/maven/berserker\" rel=\"nofollow\">Berserker Runner</a> version.</li>\n<li>Create config file (example can be found <a href=\"https://github.com/smartcat-labs/berserker/blob/dev/berserker-runner/src/example/resources/ranger-cassandra.yml\">here</a>).</li>\n<li>Run following command: <code>java -jar berserker-runner-&lt;version&gt;.jar -c &lt;path_to_config_file&gt;</code></li>\n<li>If you need to specify logging options, you can run berserker this way: <code>java -jar -Dlogback.configurationFile=&lt;path to logback.xml&gt; berserker-runner-&lt;version&gt;.jar -c &lt;path_to_config_file&gt;</code></li>\n</ul>"}}]}},"pageContext":{"alternative_id":9764}}