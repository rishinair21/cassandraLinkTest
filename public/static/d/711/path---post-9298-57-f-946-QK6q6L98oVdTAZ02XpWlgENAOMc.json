{"data":{"allAnantCassandralinks":{"edges":[{"node":{"title":"Monitoring Cassandra with Prometheus","alternative_id":9298,"content":"<div class=\"post-body entry-content\"><p>Cassandra is one of many Java-based systems that offers metrics via JMX. The <a href=\"https://github.com/prometheus/jmx_exporter\">JMX Exporter</a> offers way to use these with <a href=\"https://prometheus.io\">Prometheus</a>. By following these steps you can be up and running in under a minute!</p><p><a href=\"https://www.robustperception.io/wp-content/uploads/2015/10/Screen-Shot-2017-09-06-at-16.25.53.png\"><img class=\"aligncenter size-rect-image wp-image-3233\" src=\"https://www.robustperception.io/wp-content/uploads/2015/10/Screen-Shot-2017-09-06-at-16.25.53-600x450.png\" alt=\"\" width=\"600\" height=\"450\" srcset=\"https://www.robustperception.io/wp-content/uploads/2015/10/Screen-Shot-2017-09-06-at-16.25.53-600x450.png 600w, https://www.robustperception.io/wp-content/uploads/2015/10/Screen-Shot-2017-09-06-at-16.25.53-300x225.png 300w, https://www.robustperception.io/wp-content/uploads/2015/10/Screen-Shot-2017-09-06-at-16.25.53-800x600.png 800w\" /></a></p><p>We’ll start from scratch, first we download and extract the latest Cassandra tarball:</p><pre>wget http://archive.apache.org/dist/cassandra/2.2.4/apache-cassandra-2.2.4-bin.tar.gz&#13;\ntar -xzf apache-cassandra-*-bin.tar.gz&#13;\ncd apache-cassandra-*</pre><p>We’ll also need the JMX exporter java agent, configuration, and to tell Cassandra to use it:</p><pre>wget https://repo1.maven.org/maven2/io/prometheus/jmx/jmx_prometheus_javaagent/0.5/jmx_prometheus_javaagent-0.1.0.jar&#13;\nwget https://raw.githubusercontent.com/prometheus/jmx_exporter/master/example_configs/cassandra.yml&#13;\necho 'JVM_OPTS=\"$JVM_OPTS -javaagent:'$PWD/jmx_prometheus_javaagent-0.1.0.jar=7070:$PWD/cassandra.yml'\"' &gt;&gt; conf/cassandra-env.sh</pre><p>Now we can run Cassandra:</p><pre>./bin/cassandra &amp;</pre><p>If you visit <a href=\"http://localhost:7070/metrics\">http://localhost:7070/metrics</a> you’ll see the metrics.</p><p>Metrics alone aren’t very useful, let’s setup a quick Prometheus server:</p><pre>wget https://github.com/prometheus/prometheus/releases/download/v2.0.0/prometheus-2.0.0.linux-amd64.tar.gz&#13;\ntar -xzf prometheus-2.0.0.linux-amd64.tar.gz&#13;\ncd prometheus-*&#13;\ncat &lt;&lt;'EOF' &gt; prometheus.yml&#13;\nglobal:&#13;\n scrape_interval: 10s&#13;\n evaluation_interval: 10s&#13;\nscrape_configs:&#13;\n - job_name: 'cassandra'&#13;\n   static_configs:&#13;\n    - targets:&#13;\n      - localhost:7070&#13;\nEOF&#13;\n./prometheus&#13;\n&#13;\n</pre><p>Wait half a minute to let Prometheus gather data and then you can access the data via the <a href=\"http://localhost:9090/\">expression browser</a>!</p></div><div class=\"post-body entry-content\"><p>Have you ever wondered what percentage of time a given service or application spends up or down?</p><a href=\"https://www.robustperception.io/what-percentage-of-time-is-my-service-down-for/\" class=\"more-link\">read more</a></div><div class=\"post-body entry-content\"><p>Prometheus <a href=\"https://github.com/prometheus/prometheus/releases/tag/v2.0.0\">2.1.0</a> is now out, following on from <a href=\"https://www.robustperception.io/new-features-in-prometheus-2-0-0/\">2.0.0</a> last month with several fixes and improvements.</p><a href=\"https://www.robustperception.io/new-features-in-prometheus-2-1-0/\" class=\"more-link\">read more</a></div>"}}]}},"pageContext":{"alternative_id":9298}}